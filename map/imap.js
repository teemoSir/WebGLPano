
!function(window,document,undefined){function expose(){var t=window.L;L.noConflict=function(){return window.L=t,this},window.L=L,window.LD=LD,window.IMAP=LD}function xyzObject(t,e,i){this.z=t,this.x=e,this.y=i}function equals(t,e,i){this.url=t,this.Je=e,this.XA=i,this.Vg=this.Mu=!1}function gc(t,e){var i=hc;return function(){return i.call(this,t,e)}}function hc(t,e){t.hS=+new Date,t.loaded=e,clearTimeout(t.gQ);var i=t.IN;i.nh.remove(t.url)&&i.FH(),i=t.pN?t.Ua:t.X,t.Ua=null,(e||t.XA)&&t.Je(e?i:null,t),t.KB?(t.KB.tk(),t.KB=null):i&&(i.onload=null,i.onerror=null,i.onabort=null,t.X=null)}var L={version:"1.0.0-rc.1 (31fe582)"},LD={version:"3.6.5"};"object"==typeof module&&"object"==typeof module.exports?module.exports=L:"function"==typeof define&&define.amd&&define(L),"undefined"!=typeof window&&expose(),L.Util={extend:function(t){var e,i,n,o;for(i=1,n=arguments.length;n>i;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++L.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,o,s,a;return a=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return L.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?L.Util.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(L.Util.templateRe,function(t,i){var n=e[i];if(n===undefined)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function e(t){var e=+new Date,n=Math.max(0,16-(e-i));return i=e+n,window.setTimeout(t,n)}var i=0,n=window.requestAnimationFrame||t("RequestAnimationFrame")||e,o=window.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};L.Util.requestAnimFrame=function(t,i,o){return o&&n===e?void t.call(i):n.call(window,L.bind(t,i))},L.Util.cancelAnimFrame=function(t){t&&o.call(window,t)}}(),L.extend=L.Util.extend,L.bind=L.Util.bind,L.stamp=L.Util.stamp,L.setOptions=L.Util.setOptions,L.Class=function(){},L.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=L.Util.create(i);n.constructor=e,e.prototype=n;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(L.extend(e,t.statics),delete t.statics),t.includes&&(L.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=L.Util.extend(L.Util.create(n.options),t.options)),L.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},L.Class.include=function(t){return L.extend(this.prototype,t),this},L.Class.mergeOptions=function(t){return L.extend(this.prototype.options,t),this},L.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},L.Evented=L.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=L.Util.splitWords(t);for(var o=0,s=t.length;s>o;o++)this._on(t[o],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=L.Util.splitWords(t);for(var o=0,s=t.length;s>o;o++)this._off(t[o],e,i)}else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=undefined);for(var o={fn:e,ctx:i},s=n,a=0,r=s.length;r>a;a++)if(s[a].fn===e&&s[a].ctx===i)return;s.push(o),n.count++},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t])){if(!e){for(o=0,s=n.length;s>o;o++)n[o].fn=L.Util.falseFn;return void delete this._events[t]}if(i===this&&(i=undefined),n)for(o=0,s=n.length;s>o;o++){var a=n[o];if(a.ctx===i&&a.fn===e)return a.fn=L.Util.falseFn,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=L.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;a>s;s++){var r=o[s];r.fn.call(r.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=L.bind(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[L.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[L.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,L.extend({layer:t.target},t),!0)}});var proto=L.Evented.prototype;proto.addEventListener=proto.on,proto.removeEventListener=proto.clearAllEventListeners=proto.off,proto.addOneTimeEventListener=proto.once,proto.fireEvent=proto.fire,proto.hasEventListeners=proto.listens,L.Mixin={Events:proto},function(){var t=navigator.userAgent.toLowerCase(),e=document.documentElement,i="ActiveXObject"in window,n=-1!==t.indexOf("webkit"),o=-1!==t.indexOf("phantom"),s=-1!==t.search("android [23]"),a=-1!==t.indexOf("chrome"),r=-1!==t.indexOf("gecko")&&!n&&!window.opera&&!i,h=0===navigator.platform.indexOf("Win"),l="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),d=!window.PointerEvent&&window.MSPointerEvent,u=window.PointerEvent||d,c=i&&"transition"in e.style,p="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!s,f="MozPerspective"in e.style,m="OTransition"in e.style,g=!window.L_NO_TOUCH&&(u||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);L.Browser={ie:i,ielt9:i&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:n,gecko:r,android:-1!==t.indexOf("android"),android23:s,chrome:a,safari:!a&&-1!==t.indexOf("safari"),win:h,ie3d:c,webkit3d:p,gecko3d:f,opera12:m,any3d:!window.L_DISABLE_3D&&(c||p||f)&&!m&&!o,mobile:l,mobileWebkit:l&&n,mobileWebkit3d:l&&p,mobileOpera:l&&window.opera,mobileGecko:l&&r,touch:!!g,msPointer:!!d,pointer:!!u,retina:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1}}(),L.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},L.Point.prototype={clone:function(){return new L.Point(this.x,this.y)},add:function(t){return this.clone()._add(L.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(L.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new L.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new L.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=L.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=L.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=L.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.point=function(t,e,i){return t instanceof L.Point?t:L.Util.isArray(t)?new L.Point(t[0],t[1]):t===undefined||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new L.Point(t.x,t.y):new L.Point(t,e,i)},L.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},L.Bounds.prototype={extend:function(t){return t=L.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new L.Point(this.min.x,this.max.y)},getTopRight:function(){return new L.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof L.Point?L.point(t):L.bounds(t),t instanceof L.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=L.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return s&&a},overlaps:function(t){t=L.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,s=o.x>e.x&&n.x<i.x,a=o.y>e.y&&n.y<i.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},L.bounds=function(t,e){return!t||t instanceof L.Bounds?t:new L.Bounds(t,e)},L.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},L.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new L.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},L.DomUtil={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},create:function(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==undefined)return t.classList.contains(e);var i=L.DomUtil.getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==undefined)for(var i=L.Util.splitWords(e),n=0,o=i.length;o>n;n++)t.classList.add(i[n]);else if(!L.DomUtil.hasClass(t,e)){var s=L.DomUtil.getClass(t);L.DomUtil.setClass(t,(s?s+" ":"")+e)}},removeClass:function(t,e){t.classList!==undefined?t.classList.remove(e):L.DomUtil.setClass(t,L.Util.trim((" "+L.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===undefined?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===undefined?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&L.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},setTransform:function(t,e,i){var n=e||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,L.Browser.any3d?L.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new L.Point(0,0)}},function(){L.DomUtil.TRANSFORM=L.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=L.DomUtil.TRANSITION=L.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(L.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in document)L.DomUtil.disableTextSelection=function(){L.DomEvent.on(window,"selectstart",L.DomEvent.preventDefault)},L.DomUtil.enableTextSelection=function(){L.DomEvent.off(window,"selectstart",L.DomEvent.preventDefault)};else{var e=L.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.DomUtil.disableTextSelection=function(){if(e){var t=document.documentElement.style;this._userSelect=t[e],t[e]="none"}},L.DomUtil.enableTextSelection=function(){e&&(document.documentElement.style[e]=this._userSelect,delete this._userSelect)}}L.DomUtil.disableImageDrag=function(){L.DomEvent.on(window,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.enableImageDrag=function(){L.DomEvent.off(window,"dragstart",L.DomEvent.preventDefault)},L.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(L.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",L.DomEvent.on(window,"keydown",L.DomUtil.restoreOutline,this))},L.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,L.DomEvent.off(window,"keydown",L.DomUtil.restoreOutline,this))}}(),L.LatLng=function(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==undefined&&(this.alt=+i)},L.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=L.latLng(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return(e===undefined?1e-9:e)>=i},toString:function(t){return"LatLng("+L.Util.formatNum(this.lat,t)+", "+L.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return L.CRS.Earth.distance(this,L.latLng(t))},wrap:function(){return L.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return L.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new L.LatLng(this.lat,this.lng,this.alt)}},L.latLng=function(t,e,i){return t instanceof L.LatLng?t:L.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new L.LatLng(t[0],t[1],t[2]):2===t.length?new L.LatLng(t[0],t[1]):null:t===undefined||null===t?t:"object"==typeof t&&"lat"in t?new L.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===undefined?null:new L.LatLng(t,e,i)},L.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},L.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof L.LatLng)e=t,i=t;else{if(!(t instanceof L.LatLngBounds))return t?this.extend(L.latLng(t)||L.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new L.LatLng(e.lat,e.lng),this._northEast=new L.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new L.LatLngBounds(new L.LatLng(e.lat-n,e.lng-o),new L.LatLng(i.lat+n,i.lng+o))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new L.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof L.LatLng?L.latLng(t):L.latLngBounds(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof L.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=L.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return s&&a},overlaps:function(t){t=L.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>e.lat&&n.lat<i.lat,a=o.lng>e.lng&&n.lng<i.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=L.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},L.latLngBounds=function(t,e){return t instanceof L.LatLngBounds?t:new L.LatLngBounds(t,e)},L.Projection={},L.Projection.LonLat={project:function(t){return new L.Point(t.lng,t.lat)},unproject:function(t){return new L.LatLng(t.y,t.x)},bounds:L.bounds([-180,-90],[180,90])},L.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new L.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new L.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return L.bounds([-t,-t],[t,t])}()},L.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),o=this.transformation.transform(e.max,i);return L.bounds(n,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?L.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?L.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return L.latLng(i,e,n)}},L.CRS.Simple=L.extend({},L.CRS,{projection:L.Projection.LonLat,transformation:new L.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),L.CRS.Earth=L.extend({},L.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(s,1))}}),L.CRS.EPSG3857=L.extend({},L.CRS.Earth,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*L.Projection.SphericalMercator.R);return new L.Transformation(t,.5,-t,.5)}()}),L.CRS.EPSG900913=L.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.extend({},L.CRS,L.CRS.Earth,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,.5,-1/360,.5)}),L.Map=L.Evented.extend({options:{crs:L.CRS.EPSG3857,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=L.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==undefined&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==undefined&&this.setView(L.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),L.DomEvent.on(this._proxy,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===undefined?this._zoom:this._limitZoom(e),t=this._limitCenter(L.latLng(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==undefined&&(i.zoom=L.extend({animate:i.animate},i.zoom),i.pan=L.extend({animate:i.animate,duration:i.duration},i.pan));var n=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(L.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(L.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),s=t instanceof L.Point?t:this.latLngToContainerPoint(t),a=s.subtract(o).multiplyBy(1-1/n),r=this.containerPointToLatLng(o.add(a));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():L.latLngBounds(t);var i=L.point(e.paddingTopLeft||e.padding||[0,0]),n=L.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var s=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),r=this.project(t.getNorthEast(),o),h=this.unproject(a.add(r).divideBy(2).add(s),o);return{center:h,zoom:o}},fitBounds:function(t,e){if(t=L.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=L.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){function n(t){var e=t?-1:1,i=t?g:m,n=g*g-m*m+e*y*y*_*_,o=2*i*y*_,s=n/o,a=Math.sqrt(s*s+1)-s,r=1e-9>a?-18:Math.log(a);return r}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return o(t)/s(t)}function r(t){return m*(s(b)/s(b+v*t))}function h(t){return m*(s(b)*a(b+v*t)-o(b))/y}function l(t){return 1-Math.pow(1-t,1.5)}function d(){var i=(Date.now()-x)/M,n=l(i)*w;1>=i?(this._flyToFrame=L.Util.requestAnimFrame(d,this),this._move(this.unproject(u.add(c.subtract(u).multiplyBy(h(n)/_)),f),this.getScaleZoom(m/r(n),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(i=i||{},i.animate===!1||!L.Browser.any3d)return this.setView(t,e,i);this._stop();var u=this.project(this.getCenter()),c=this.project(t),p=this.getSize(),f=this._zoom;t=L.latLng(t),e=e===undefined?f:e;var m=Math.max(p.x,p.y),g=m*this.getZoomScale(f,e),_=c.distanceTo(u)||1,v=1.42,y=v*v,b=n(0),x=Date.now(),w=(n(1)-b)/v,M=i.duration?1e3*i.duration:1e3*w*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=L.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,L.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=L.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=L.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=L.bind(this._handleGeolocationResponse,this),i=L.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new L.LatLng(e,i),o=n.toBounds(t.coords.accuracy),s=this._locateOptions;if(s.setView){var a=this.getBoundsZoom(o);this.setView(n,s.maxZoom?Math.min(a,s.maxZoom):a)}var r={latlng:n,bounds:o,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(r[h]=t.coords[h]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=undefined,this._containerId=undefined}L.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=L.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new L.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=L.latLngBounds(t),i=L.point(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),a=t.getNorthWest(),r=t.getSouthEast(),h=this.getSize().subtract(i),l=this.project(r,n).subtract(this.project(a,n)),d=L.Browser.any3d?this.options.zoomSnap:1,u=Math.min(h.x/l.x,h.y/l.y);return n=this.getScaleZoom(u,n),d&&(n=Math.round(n/(d/100))*(d/100),n=e?Math.ceil(n/d)*d:Math.floor(n/d)*d),Math.max(o,Math.min(s,n))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new L.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===undefined?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===undefined?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===undefined?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=e===undefined?this._zoom:e,this.options.crs.latLngToPoint(L.latLng(t),e)},unproject:function(t,e){return e=e===undefined?this._zoom:e,this.options.crs.pointToLatLng(L.point(t),e)},layerPointToLatLng:function(t){var e=L.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(L.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(L.latLng(t))},distance:function(t,e){return this.options.crs.distance(L.latLng(t),L.latLng(e))},containerPointToLayerPoint:function(t){return L.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return L.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(L.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(t)));
},mouseEventToContainerPoint:function(t){return L.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=L.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");L.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=L.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&L.Browser.any3d,L.DomUtil.addClass(t,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(L.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=L.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),L.DomUtil.setPosition(this._mapPane,new L.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(L.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),L.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,i){e===undefined&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return L.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){L.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(L.DomEvent){this._targets={},this._targets[L.stamp(this._container)]=this;var e=t?"off":"on";L.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&L.DomEvent[e](window,"resize",this._onResize,this),L.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){L.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=L.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if(i=this._targets[L.stamp(s)],i&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!L.DomEvent._isExternalTarget(s,t))break;if(n.push(i),o)break}if(s===this._container)break;s=s.parentNode}return n.length||a||o||!L.DomEvent._isExternalTarget(s,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!L.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&L.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=L.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&L.DomEvent.preventDefault(t);var s={originalEvent:t};if("keypress"!==t.type){var a=o instanceof L.Marker;s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var r=0;r<i.length;r++)if(i[r].fire(e,s,!0),s.originalEvent._stopped||i[r].options.nonBubblingEvents&&-1!==L.Util.indexOf(i[r].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return L.DomUtil.getPosition(this._mapPane)||new L.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==undefined?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return L.bounds([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new L.Bounds(n.subtract(o),n.add(o)),a=this._getBoundsOffset(s,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new L.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=L.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),s=n.max.subtract(t.max),a=this._rebound(o.x,-s.x),r=this._rebound(o.y,-s.y);return new L.Point(a,r)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=L.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(i)?(this.panBy(i,e),!0):!1},_createAnimProxy:function(){var t=this._proxy=L.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=L.DomUtil.TRANSFORM,n=t.style[i];L.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===t.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),i=this.getZoom();L.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return i.animate===!0||this.getSize().contains(o)?(L.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0):!1},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,L.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(L.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(L.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),L.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),L.map=function(t,e){return new L.Map(t,e)},L.Layer=L.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[L.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[L.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),L.Map.include({addLayer:function(t){var e=L.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=L.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&L.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?L.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[L.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=L.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=o.minZoom===undefined?t:Math.min(t,o.minZoom),e=o.maxZoom===undefined?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-(1/0)?undefined:e,this._layersMinZoom=t===1/0?undefined:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),L.Http={},L.Http.Request=L.Evented.extend({options:{callback:"callback",type:"json",charset:"utf-8"},initialize:function(t,e){L.Util.setOptions(this,e),this.send(t)},send:function(t){var e=L.DomUtil.create("script");e.type="text/javascript",e.charset=this.options.charset;var i=this;L.Browser.ielt9?e.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&i.emit("complete")}:(e.onload=function(){i.emit("complete")},e.onerror=function(){i.emit("error",{status:0,info:"service error",url:t})}),e.src=t,document.getElementsByTagName("head")[0].appendChild(e)}}),L.Http.JSONP=L.Http.Request.extend({send:function(t){var e=L.Util.getGuid("_",5)+"_",i=L.DomUtil.create("script");i.type="text/javascript",i.charset=this.options.charset;var n=this;i.onerror=function(){n.emit("error",{status:0,info:"service error",url:t}),document.getElementsByTagName("head")[0].removeChild(i)};var o=function(t){n.emit("complete",t),L[e]=null,window[e]=null,document.getElementsByTagName("head")[0].removeChild(i)};window[e]=o,i.src=t+"&"+this.options.callback+"=window."+e,document.getElementsByTagName("head")[0].appendChild(i)}}),L.Util.trim=function(t){return t?t.trim?t.trim():t.replace(/^\s+|\s+$/g,""):""},L.Util.getGuid=function(t,e){return(t||"")+Math.round(Math.random()*Math.pow(10,e||6))},L.Util.extend(L.Evented.prototype,{has_events:function(t,e,i){var n=this._events;if(e&&i){if(n&&t in n)for(var o=0;o<n[t].length;o++)if(n[t].fn===e&&n[t].context===i)return!0;return!1}return n&&t in n&&n[t]&&n[t].length>0},emit:function(t,e){if(!this.has_events(t))return this;for(var i=L.extend({type:t},e),n=[].concat(this._events[t]),o=0;o<n.length;o++)n[o].fn&&(n[o].fn.call(n[o].context||this,i),n[o].once&&this._events[t].splice(o,1));return this}}),function(){var t=navigator.userAgent.toLowerCase(),e=-1!==t.indexOf("android"),i=-1!==t.indexOf("windows nt"),n=-1!==t.indexOf("macintosh"),o=-1!==t.indexOf("ipad;"),s=-1!==t.indexOf("ipod touch;"),a=-1!==t.indexOf("iphone;"),r=a||o||s;L.Browser.pf=e?"android":r?"ios":i?"windows":n?"mac":"other"}(),L.DomUtil.removeClass=function(t,e){e&&(t.classList!==undefined?t.classList.remove(e):L.DomUtil.setClass(t,L.Util.trim((" "+L.DomUtil.getClass(t)+" ").replace(" "+e+" "," "))))},L.DomUtil.setTransform=function(t,e,i,n){var o=e||new L.Point(0,0);t.style[L.DomUtil.TRANSFORM]=(L.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0) rotate("+(n||0)+"deg)")+(i?" scale("+i+")":"")},L.DomUtil.setPosition=function(t,e,i){t&&(t._leaflet_pos=e,L.Browser.any3d?L.DomUtil.setTransform(t,e,null,i):(t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.position="absolute"))},L.DomUtil.hexToRgba=function(t,e){var i,n,o,s=/^#/.test(t)?t.slice(1):t,a="transparent"===t?0:Math.ceil(e);return s=/^[0-9a-f]{3}|[0-9a-f]{6}$/i.test(s)?s:"fffff",3===s.length&&(s=s.replace(/(\w)(\w)(\w)/gi,"$1$1$2$2$3$3")),i=s.slice(0,2),n=s.slice(2,4),o=s.slice(4,6),i=parseInt(i,16),n=parseInt(n,16),o=parseInt(o,16),{hex:"#"+s,alpha:a,rgba:"rgba("+i+", "+n+", "+o+", "+(a/100).toFixed(2)+")"}},L.Util.extend(L.Point.prototype,{scaleBy:function(t,e){var i="EPSG:3857_360"==e?-(this.y*t.y)+Math.pow(2,this.z)*t.y-256:this.y*t.y;return new L.Point(this.x*t.x,i)}}),L.Util.extend(L.Layer.prototype,{options:L.Util.extend(L.Layer.prototype.options,{visible:!0}),_layerAdd:function(t){var e=t.target;e.hasLayer(this)&&(this._map=e,this._zoomAnimated=e._zoomAnimated,this.options.visible&&this.getEvents&&e.on(this.getEvents(),this),this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this}))}}),L.Map.include({addLayer:function(t){var e=L.stamp(t);return this._layers[e]?t:(this._layers[e]=t,0==t.type&&(this._baseLayer&&this.removeLayer(this._baseLayer,!0),this._baseLayer=t),t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t,e,i){var n=L.stamp(t);return this._layers[n]?(0!=t.type||e||delete this._baseLayer,this._loaded&&t.onRemove(this,i),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),t.getEvents&&this.off(t.getEvents(),t),e||(delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove"))),t._map=t._mapToAdd=null,this):this},getBGLayerIds:function(){var t=[],e=this._layers;for(var i in e)0==e[i].type&&t.push(L.stamp(e[i]));return t},changeBGLayer:function(t){var e=this;if(0==t.type){var i=L.stamp(t);return e._layers[i]?(e._baseLayer=t,t.beforeAdd(e)):e.addLayer(t),!0}return!1},getLayer:function(t){return this._layers[t]?this._layers[t]:null},layerToTop:function(t){var e=this;if(t){var i,n=0;for(var o in e._layers){var s=e._layers[o];0!=s.type&&(o==t&&(i=s),s.getZIndex()>n&&(n=s.getZIndex()))}i&&i.setZIndex(n+1)}}}),L.Util.extend(L.Map.prototype,{options:{crs:L.CRS.EPSG3857,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0,scaleX:1,scaleY:1},initialize:function(t,e){e=L.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=L.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==undefined&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==undefined&&this.setView(L.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),L.DomEvent.on(this._proxy,L.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers),this.setScale(this.options.scaleX,this.options.scaleY)},setScale:function(t,e){L.DomEvent.getMousePosition=function(i,n){if(!n)return new L.Point(i.clientX,i.clientY);var o=n.getBoundingClientRect();return new L.Point((i.clientX-o.left-n.clientLeft)/t,(i.clientY-o.top-n.clientTop)/e)}},inertia:function(t){this.options.inertia=t},setZoom:function(t,e){var e=e||{};return this._loaded?this.setView(e.center||this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},panBy:function(t){return this.fire("movestart"),this._rawPanBy(L.point(t)),this.fire("move").fire("change"),this.fire("moveend").fire("changed")},setMaxBounds:function(t){return t=L.latLngBounds(t),this.options.maxBounds=t,t?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},setZoomLevels:function(t,e,i){return this.options.maxZoom=e,this.options.minZoom=t,i?void 0:this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(e):this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},invalidateSize:function(t){if(!this._loaded)return this;t=L.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),s=n.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move").fire("change"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.bind(this.fire,this,"moveend"),200)):this.fire("moveend").fire("changed")),this.fire("resize",{oldSize:e,newSize:i})):this},plugin:function(t,e,i){if("string"==typeof t&&(t=[t]),0===t.length)return e(),this;var i=i||this.options.pUrl||"pluginUrl not config~",n=i+t.join(",").replace(/LD\.|IMAP\./g,"plugins/"),o=new L.Http.Request(n);return o.on("complete",function(){e()}),o.on("error",function(){throw"Plugin service error!"}),this},latLngToProjectedPoint:function(t){var e=this.project(L.latLng(t))._round();return e},projectedPointToLatlng:function(t){var e=this.unproject(t);return e},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&L.Browser.any3d,L.DomUtil.addClass(t,"leaflet-container"+(L.Browser.touch?" leaflet-touch":"")+(L.Browser.retina?" leaflet-retina":"")+(L.Browser.ielt9?" leaflet-oldie":"")+(L.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),this.options.backgoundImg?t.style.backgroundImage="url("+this.options.backgoundImg+")":t.style.background="#fcf9f2";var e=L.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_move:function(t,e,i){e===undefined&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n&&this.fire("zoom",i),this.fire("move",i).fire("change")},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend").fire("changed")},_fireDOMEvent:function(t,e,i){if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var n=i[0];if("contextmenu"===e&&L.DomEvent.preventDefault(t),"click"!==t.type&&"preclick"!==t.type||t._simulated||!this._draggableMoved(n)){var o={originalEvent:t};if("keypress"!==t.type){var s=n instanceof L.Marker;o.containerPoint=s?this.latLngToContainerPoint(n.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?n.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var a=0;a<i.length;a++)if(i[a].fire(e,o,!0),o.originalEvent._stopped||i[a].options.nonBubblingEvents&&-1!==L.Util.indexOf(i[a].options.nonBubblingEvents,e))return}}},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),s=new L.Bounds(n.subtract(o),n.add(o)),a=this._getBoundsOffset(s,i,e);return this.unproject(n.add(a),e)},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),o=this.project(e.getSouthEast(),i).subtract(t.max),s=this._rebound(n.x,-o.x),a=this._rebound(n.y,-o.y);return new L.Point(s,a)},_getTileId:function(t){var e=this.project(t,this._zoom).floor(),i=e.unscaleBy(this._baseLayer.getTileSize()).floor();return i.y=-(i.y+1-Math.pow(2,this._zoom)),i.z=this._zoom,i}}),L.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:L.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),a=s*Math.sin(n),r=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),s/2);return n=-i*Math.log(Math.max(r,1e-10)),new L.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),a=Math.exp(-t.y/n),r=Math.PI/2-2*Math.atan(a),h=0,l=.1;15>h&&Math.abs(l)>1e-7;h++)e=s*Math.sin(r),e=Math.pow((1-e)/(1+e),s/2),l=Math.PI/2-2*Math.atan(a*e)-r,r+=l;return new L.LatLng(r*i,t.x*i/n)}},L.CRS.EPSG3395=L.extend({},L.CRS.Earth,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*L.Projection.Mercator.R);return new L.Transformation(t,.5,-t,.5)}()}),L.GridLayer=L.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:L.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){L.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),L.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof L.Point?t:new L.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=i.length;s>o;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!L.Browser.ielt9){L.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);L.DomUtil.setOpacity(o.el,s),1>s?e=!0:(o.active&&(i=!0),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===undefined)return undefined;for(var i in this._levels)this._levels[i].el.children.length||i===t?this._levels[i].el.style.zIndex=e-Math.abs(t-i):(L.DomUtil.remove(this._levels[i].el),this._removeTilesAtZoom(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||(n=this._levels[t]={},n.el=L.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),L.Util.falseFn(n.el.offsetWidth)),this._level=n,n},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)L.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),a=i-1,r=new L.Point(+o,+s);r.z=+a;var h=this._tileCoordsToKey(r),l=this._tiles[h];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>n?this._retainParent(o,s,a,n):!1)},_retainChildren:function(t,e,i,n){for(var o=2*t;2*t+2>o;o++)for(var s=2*e;2*e+2>s;s++){var a=new L.Point(o,s);a.z=i+1;var r=this._tileCoordsToKey(a),h=this._tiles[r];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),n>i+1&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,i,n){var o=Math.round(e);(this.options.maxZoom!==undefined&&o>this.options.maxZoom||this.options.minZoom!==undefined&&o<this.options.minZoom)&&(o=undefined);var s=this.options.updateWhenZooming&&o!==this._tileZoom;(!n||s)&&(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),o!==undefined&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();L.Browser.any3d?L.DomUtil.setTransform(t.el,o,n):L.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),s=e.getSize().divideBy(2*n);return new L.Bounds(o.subtract(s),o.add(s))},_update:function(t){var e=this._map;if(e){var i=e.getZoom();if(t===undefined&&(t=e.getCenter()),this._tileZoom!==undefined){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),a=[],r=this.options.keepBuffer,h=new L.Bounds(o.getBottomLeft().subtract([r,-r]),o.getTopRight().add([r,-r]));for(var l in this._tiles){var d=this._tiles[l].coords;d.z===this._tileZoom&&h.contains(L.point(d.x,d.y))||(this._tiles[l].current=!1)}if(Math.abs(i-this._tileZoom)>1)return void this._setView(t,i);for(var u=o.min.y;u<=o.max.y;u++)for(var c=o.min.x;c<=o.max.x;c++){var p=new L.Point(c,u);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(c=0;c<a.length;c++)this._addTile(a[c],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return L.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),s=e.unproject(n,t.z),a=e.unproject(o,t.z);return this.options.noWrap||(s=e.wrapLatLng(s),a=e.wrapLatLng(a)),new L.LatLngBounds(s,a)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new L.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(L.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){L.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=L.Util.falseFn,t.onmousemove=L.Util.falseFn,L.Browser.ielt9&&this.options.opacity<1&&L.DomUtil.setOpacity(t,this.options.opacity),L.Browser.android&&!L.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),L.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&L.Util.requestAnimFrame(L.bind(this._tileReady,this,t,null,o)),
L.DomUtil.setPosition(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(L.DomUtil.setOpacity(i.el,0),L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(L.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),L.Browser.ielt9||!this._map._fadeAnimated?L.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(L.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new L.Point(this._wrapX?L.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?L.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new L.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),L.gridLayer=function(t){return new L.GridLayer(t)},L.Util.extend(L.GridLayer.prototype,{options:L.Util.extend(L.GridLayer.prototype.options,{visible:!0,zIndex:2}),onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this.options.visible&&(this._resetView(),this._update())},visible:function(t){this.options.visible=t,this._container&&this.options.visible!==undefined&&null!==this.options.visible&&(this._container.style.display=t?"block":"none")},getVisible:function(){return this.options.visible},getOpacity:function(){return this.options.opacity},getZIndex:function(t){return this.options.zIndex},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this._container.style.display=this.options.visible?"block":"none",this.getPane().appendChild(this._container))},_getTiledPixelBounds:function(t){var e=this._map,i=e.project(t,this._tileZoom).floor(),n=e.getSize().divideBy(2);return new L.Bounds(i.subtract(n),i.add(n))},_update:function(t){var e=this._map;if(e){var i=e.getZoom();if(t===undefined&&(t=e.getCenter()),this._tileZoom!==undefined){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),a=[];for(var r in this._tiles)this._tiles[r].current=!1;if(Math.abs(i-this._tileZoom)>1)return void this._setView(t,i);for(var h=o.min.y;h<=o.max.y;h++)for(var l=o.min.x;l<=o.max.x;l++){var d=new L.Point(l,h);if(d.z=this._tileZoom,this._isValidTile(d)){var u=this._tiles[this._tileCoordsToKey(d)];u?u.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var c=document.createDocumentFragment();for(l=0;l<a.length;l++)this._addTile(a[l],c);this._level.el.appendChild(c)}}}},_getTilePos:function(t){var e=this._map;return t.scaleBy(this.getTileSize(),e.options.crs.code).subtract(this._level.origin)}}),L.TileLayer=L.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=L.setOptions(this,e),e.detectRetina&&L.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),L.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return L.DomEvent.on(i,"load",L.bind(this._tileOnLoad,this,e,i)),L.DomEvent.on(i,"error",L.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:L.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return L.Util.template(this._url,L.extend(e,this.options))},_tileOnLoad:function(t,e){L.Browser.ielt9?setTimeout(L.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=L.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==n&&n>i?e.divideBy(t.getZoomScale(n,i)).round():null!==o&&i>o?e.divideBy(t.getZoomScale(o,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset,o=this.options.minNativeZoom,s=this.options.maxNativeZoom;return i&&(t=e-t),t+=n,null!==o&&o>t?o:null!==s&&t>s?s:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=L.Util.falseFn,e.onerror=L.Util.falseFn,e.complete||(e.src=L.Util.emptyImageUrl,L.DomUtil.remove(e)))}}),L.tileLayer=function(t,e){return new L.TileLayer(t,e)},L.Util.extend(L.TileLayer.prototype,{options:L.Util.extend(L.TileLayer.prototype.options,{tileSize:256}),createTile:function(t,e){var i=document.createElement("img");return L.DomEvent.on(i,"load",L.bind(this._tileOnLoad,this,e,i)),L.DomEvent.on(i,"error",L.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.src=this.getTileUrl(t.x,t.y,this._getZoomForUrl(),t),i},getTileUrl:function(t,e,i,n){return L.Util.template(this._url,L.extend({r:this.options.detectRetina&&L.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(n),x:t,y:this.options.tms?this._globalTileRange.max.y-e:e,z:i},this.options))},setTileUrlFunc:function(t){this.getTileUrl=t}}),L.GridVectorLayer=L.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,visible:!0,zIndex:2,updateWhenIdle:L.Browser.mobile,updateInterval:200,attribution:null,bounds:null,minZoom:0},initialize:function(t){t=L.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._deltTiles=[],this._resetView(),this._update(),this._firstRequest()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){L.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},visible:function(t){this.options.visible=t,this._container&&this.options.visible!==undefined&&null!==this.options.visible&&(this._container.style.display=t?"block":"none")},getVisible:function(){return this.options.visible},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},getOpacity:function(){return this.options.opacity},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getZIndex:function(t){return this.options.zIndex},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewreset:this._resetAll,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof L.Point?t:new L.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=i.length;s>o;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!L.Browser.ielt9&&this._map._fadeAnimated){L.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);L.DomUtil.setOpacity(o.el,s),1>s?e=!0:(o.active&&(i=!0),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this._container.style.display=this.options.visible?"block":"none",this.getPane().appendChild(this._container),this._labelCanvas=this._createLabelCanvas(),this._initCanvasRenderer(),this._bindMapContainerEvent())},_bindMapContainerEvent:function(){var t,e=this._map,i=e._panes.mapPane.parentNode,n=this;e._panes.mapPane.parentNode&&e.addEventListener("resize",function(e){t=e.newSize,n._labelCanvas.width=t.x,n._labelCanvas.height=t.y,n._labelCanvas.style.width=t.x+"px",n._labelCanvas.style.height=t.y+"px",canvasRenderer.updateSize(t),canvasRenderer.yd()},i),this._map.on("canvas",this._pruneTiles,this)},_createLabelCanvas:function(){var t=this._map,e=t.getSize(),i=document.createElement("canvas");return i.width=e.x,i.height=e.y,i.style.position="absolute",i.style.zIndex="19",i.style.width=e.x+"px",i.style.height=e.y+"px",i.style.left="0px",i.style.top="0px",this._container.appendChild(i),i},_initCanvasRenderer:function(){canvasRenderer.init(this._map,this._url);var t=this._map,e=t.getCenter(),i=t.getZoom();canvasRenderer.setContainer(this._container,this._labelCanvas,i,t.getSize(),this._tiles,e.lng,e.lat)},_normalRequest:function(t,e){var i=this._map,n=i.getCenter(),e=e||i.getZoom();if(canvasRenderer.updateCenter(n.lng,n.lat,e),t.length){var o,s={};for(var a in t)o=t[a].x+":"+t[a].y+":"+t[a].z,s[o]=this._tiles[o];canvasRenderer.loadTile(s,e)}else canvasRenderer.yd()},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===undefined)return undefined;for(var i in this._levels)this._levels[i].el.children.length||i===t?this._levels[i].el.style.zIndex=e-Math.abs(t-i):(L.DomUtil.remove(this._levels[i].el),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||(n=this._levels[t]={},n.el=L.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),L.Util.falseFn(n.el.offsetWidth)),this._level=n,n},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||(this._removeTile(t),canvasRenderer.tiles.cl(t))}},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_resetAll:function(){for(var t in this._levels)L.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null,this._resetView()},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),s=Math.floor(e/2),a=i-1,r=o+":"+s+":"+a,h=this._tiles[r];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),a>n?this._retainParent(o,s,a,n):!1)},_retainChildren:function(t,e,i,n){for(var o=2*t;2*t+2>o;o++)for(var s=2*e;2*e+2>s;s++){var a=o+":"+s+":"+(i+1),r=this._tiles[a];r&&r.active?r.retain=!0:(r&&r.loaded&&(r.retain=!0),n>i+1&&this._retainChildren(o,s,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){canvasRenderer.init(null,this._url),this._setView(t.center,t.zoom,!0,t.noUpdate)},_firstRequest:function(t){var e=this._map,i=e.getCenter(),t=t||e.getZoom();canvasRenderer.setContainer(this._container,this._labelCanvas,t,e.getSize(),this._tiles,i.lng,i.lat),canvasRenderer.loadTile(this._tiles,t)},_setView:function(t,e,i,n){var o=Math.round(e);(this.options.maxZoom!==undefined&&o>this.options.maxZoom||this.options.minZoom!==undefined&&o<this.options.minZoom)&&(o=undefined);var s=o!==this._tileZoom;(!n||s)&&(this._tileZoom=o,this._updateLevels(),this._resetGrid(),o!==undefined&&this._update(t),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();L.Browser.any3d?L.DomUtil.setTransform(t.el,o,n):L.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){if(this._map&&!this._map._animatingZoom){arguments[0].originalEvent;if("move"==arguments[0].type&&(canvasRenderer.__isDrawLabel=!1),this._resetView(),"moveend"==arguments[0].type){canvasRenderer.__isDrawLabel=!0;var t=/\-?[0-9]+/g,e=this._map,i=L.DomUtil.getStyle(e._panes.mapPane,"transform").match(t),n=-parseInt(i[1]),o=-parseInt(i[2]);isNaN(n)||isNaN(o)?(n=-parseInt(i[0]),o=-parseInt(i[1]),L.DomUtil.setPosition(this._labelCanvas,{x:n,y:o})):L.DomUtil.setPosition(this._labelCanvas,{x:n,y:o}),this._normalRequest([],this._tileZoom),canvasRenderer.updateTiles(this._tiles),this._normalRequest([].concat(this._deltTiles),this._tileZoom),this._deltTiles=[]}}},_getTiledPixelBounds:function(t){var e=this._map,i=e.project(t,this._tileZoom).floor(),n=e.getSize();return new L.Bounds(i.subtract(n),i.add(n))},_update:function(t){var e=this._map;if(e){var i=e.getZoom();if(t===undefined&&(t=e.getCenter()),this._tileZoom!==undefined){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),a=[];for(var r in this._tiles)this._tiles[r].current=!1;if(Math.abs(i-this._tileZoom)>1)return void this._setView(t,i);for(var h=o.min.y;h<=o.max.y;h++)for(var l=o.min.x;l<=o.max.x;l++){var d=new L.Point(l,h);if(d.z=this._tileZoom,this._isValidTile(d)){var u=this._tiles[this._tileCoordsToKey(d)];u?u.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(s)-e.distanceTo(s)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var c=document.createDocumentFragment();for(l=0;l<a.length;l++)this._addTile(a[l],this._level.el);this._level.el.appendChild(c)}this._deltTiles=this._deltTiles.concat(a)}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return L.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),s=e.wrapLatLng(e.unproject(n,t.z)),a=e.wrapLatLng(e.unproject(o,t.z));return new L.LatLngBounds(s,a)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new L.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(L.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){var e=this.getTileSize();t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px"},_getkey:function(t){var e=this._tileCoordsToKey(t),i=e.split(","),n=L.g.kt(i[1],i[2],i[0]);return n},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),L.bind(this._tileReady,this,t));if(this._initTile(o),this.createTile.length<2&&L.Util.requestAnimFrame(L.bind(this._tileReady,this,t,null,o)),L.DomUtil.setPosition(o,i),canvasRenderer.S.sa){var s=18<t.z?Math.pow(2,18-t.z):1;o.width=o.height=2*this.options.tileSize/s}this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(L.DomUtil.setOpacity(i.el,0),L.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=L.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),L.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load")))}},_getTilePos:function(t){var e=this._map;return t.scaleBy(this.getTileSize(),e.options.crs.code).subtract(this._level.origin)},_wrapCoords:function(t){var e=new L.Point(this._wrapX?L.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?L.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new L.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),L.gridLayer=function(t){return new L.GridLayer(t)},L=L||{},rb={},L.k={localStorage:!0,Ag:"1.3.12.1",key:""},function(){function B(t){return-1!==e.indexOf(t)}function sb(t){L.h=t.h,L.vd=t.vd,t.h=null,L.k.Va=t[2].split(",")[0];var e=L.k.Ic=L.k.Va.split(":")[0];"https"===e&&(L.k.jE="wss",L.k.Jb=L.k.Jb.replace("http","https"),L.k.mp=L.k.mp.replace("http","https"),L.k.Pu=L.k.Pu.replace("http","https"),L.k.Nu=L.k.Nu.replace("http","https"),L.k.Vp=L.k.Vp.replace("http","https"),L.k.bn=L.k.bn.replace("http","https"));var i=window.location.href;0!==i.indexOf("http")&&window.parent&&window.parent!==window&&(i=window.parent.location.href),i=encodeURIComponent(i),L.k.zo=i,L.k.ih=L.k.Va+"/theme/v1.3/markers/"+(L.h.sa?"b":"n"),L.k.mode=Number(t[3]),L.k.Af=t[1],L.k.key=t[0],L.k.zz=t[4],L.k.Je=t[5],L.k.vK=t[6]}config=["608d75903d29ad471362f8c58c550daf",[115.423411,39.442758,117.514625,41.060816,116.405285,39.904989],"",1,"1.3",null,"110000","",!0,!0];var e=navigator.userAgent.toLowerCase(),z=window,ba=document,ca=B("ucbrowser"),da=B("micromessenger"),ea=B("mqqbrowser"),D="ActiveXObject"in z,fa=D&&!z.XMLHttpRequest,ga=D&&!ba.querySelector,ha=D&&!ba.addEventListener,ia=D&&B("ie 9"),la=D&&B("rv:11"),oa=z.navigator&&z.navigator.msPointerEnabled&&!!z.navigator.msMaxTouchPoints,pa=oa||B("touch")||"ontouchstart"in ba,qa=B("webkit"),chrome=B("chrome"),ra=B("firefox"),sa=B("android"),ta=-1!==e.search(/android [123]/),ua=sa&&!ta,va=B("windows phone"),wa="devicePixelRatio"in z&&1<z.devicePixelRatio||D&&"matchMedia"in z&&z.matchMedia("(min-resolution:144dpi)")&&z.matchMedia("(min-resolution:144dpi)").matches,ya=B("ipad;"),za=ya&&wa,Aa=B("ipod touch;"),Ba=B("iphone;"),Ca=Ba||ya||Aa,Da=B("safari"),Ea=Ca&&-1===e.search(/ os [456]_/),Fa=sa||Ca||va||B("mobile")||"undefined"!=typeof orientation,Ga=ba.documentElement,Ha=D&&"transition"in Ga.style,Ia=!!ba.createElementNS&&!!ba.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,Ja=!!ba.createElement("canvas").getContext,Ka="WebKitCSSMatrix"in z&&"m11"in new window.WebKitCSSMatrix,La="MozPerspective"in Ga.style,Ma="OTransition"in Ga.style,Na=Ha||Ka||La||Ma,Oa=B("windows nt"),Pa=!Fa&&Oa&&-1!==e.search(/nt [1-5]\./),Qa=B("baidubrowser"),Ra;if(!(Ra=!Ja)){var Ua;if(!(Ua=ia)){var Va;if(!(Va=sa&&!(ua&&(-1!==e.search(/m351|firefox/)?0:da&&ea?-1===e.search(/hm note|gt-|m1 note/):B("gt-n710")&&-1!==e.search(/android( |\/)4\.1/)?0:-1!==e.search(/ucbrowser\/((9\.[0-5]\.)|(10\.))/)?-1===e.search(/huawei( p6|h30)/):B("baidubrowser")?-1===e.search(/hm201|sm-g900/):-1!==e.search(/lbbrowser|360|liebao|oupeng|mqqbrowser|sogou|micromessenger|chrome/)||!B("ucbrowser")&&-1!==e.search(/sm-n900|(gt-(n710|i95|p[67]))|(mi( [1-4]|-one))|(huawei( p6|_c8813|h30| g750))|lenovo k900|coolpad_9150/))))){var Wa;if(Wa=Ba){var Xa=screen.width;Wa=!(Ea&&(ca||da?!(Xa>375):Da))}Va=Wa||Aa||za||va||Fa&&ra||Oa&&B("version")}Ua=Va}Ra=Ua}var Ya=Ra,Za=!1;try{Za="undefined"!=typeof z.localStorage}catch($a){}var ab=void 0!==config[8]?config[8]:!0,bb=void 0!==config[9]?config[9]:!0;config.h={size:200,kp:B("macintosh"),EQ:Oa,Ns:Qa,tT:ea,Fk:D,td:fa,zm:ga,Oc:ha,gN:D&&!la,BQ:qa,jp:Za,Sd:sa,ER:ta,Zp:ca,chrome:chrome,QA:ra,LS:Ha,CQ:Ka,jS:La,lT:Ma,HK:Na,Y:Fa,iT:Fa&&qa,ON:Fa&&Ka,hT:Fa&&z.opera,zB:Ca,uc:pa,aC:oa,MS:ia,sa:wa,eh:Ia,Gk:Ja,RS:!!z.eR,yC:Ya,hg:ab&&!Ya&&!Pa,Xt:bb&&!!z.WebSocket&&!Qa,xC:!Ia&&Fa&&Ja},config.h.xu=config.h.Sd?"android":config.h.zB?"ios":config.h.EQ?"windows":config.h.kp?"mac":"other";var z=window,F="http map anip layers overlay0 brender mrender".split(" ");config.vd="main",config.h.uc&&(F+=",touch",config.vd+="t"),config.h.Y||(F+=",mouse",config.vd+="m"),config.vd+="c",config.h.hg&&(config.vd+="v",F+=",vectorlayer,overlay",F+=",vp",config.vd+="p"),config[7]&&(F+=","+config[7],config.vd+=config[7].replace(",","").replace(eval("/AMap./gi"),"")),F+=",sync",config.bE=F.split(","),window.AMap=window.AMap||{},window.AMap.Ag="1.3.12.1",sb(config)}(),L.VectorLayer=L.GridVectorLayer.extend({options:{maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tileSize:256,maxNativeZoom:null,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=L.setOptions(this,e),e.detectRetina&&L.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom=Math.max(0,e.minZoom),e.maxZoom--),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),L.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("canvas");return this._canvasCtxCache=i.getContext("2d"),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.width="",i},_drawContext:function(t,e){this._level.zoom,this._tileids},getTileUrl:function(t,e,i,n){return L.Util.template(this._url,L.extend({r:this.options.detectRetina&&L.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(n),x:t,y:this.options.tms?this._globalTileRange.max.y-e:e,z:i},this.options))},_tileOnLoad:function(t,e){L.Browser.ielt9?setTimeout(L.bind(t,this,null,e),0):t(null,e)},setTileUrlFunc:function(t){this.getTileUrl=t},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=L.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.maxNativeZoom;return null!==n&&i>n?e.divideBy(t.getZoomScale(n,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,e=this._tileZoom;return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,null!==t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=L.Util.falseFn,e.onerror=L.Util.falseFn,e.complete||(e.src=L.Util.emptyImageUrl,L.DomUtil.remove(e)))}}),L.vectorLayer=function(t,e){return new L.VectorLayer(t,e)},L.__Class=function(){},L.__Class.extend=L.__Class.extend=function(t){function e(){}function i(){this.r&&(this.r.apply(this,arguments),this.CLASS_NAME&&L.BuryPoint.add(this.CLASS_NAME))}e.prototype=this.prototype;var n=new e;n.constructor=i,i.prototype=n;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(i[o]=this[o]);return t.ID&&(L.__extend(i,t.ID),delete t.ID),t.jb&&(L.__extend.apply(null,[n].concat(t.jb)),delete t.jb),t.F&&n.F&&(t.F=L.__extend({},n.F,t.F)),L.__extend(n,t),t.toString&&(n.toString=t.toString),i.Dd=this.prototype,i},L.__extend=function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;n>i;i+=1)for(e in o=s[i]||{})Object.prototype.hasOwnProperty.call(o,e)&&("function"==typeof o[e]&&"function"==typeof t[e]&&(o[e].Sa=t[e]),t[e]=o[e]);return t},L.g={Qp:[],Wa:40075016.68557849,gL:"ASDFGHJKLQWERTYUIO!sdfghjkl",qb:function(t){if("object"==typeof t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=L.g.qb(t[e]));return i}return t},CB:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},decryptionLngLats:function(t){var e,i,n,o,s;for(i=[],n=NaN,o=0,s=t.length;s>o;o+=1)e=t[o],e=this.gL.indexOf(e),isNaN(n)?n=27*e:(i.push(n+e-333),n=NaN);return i},CP:function(t,e){for(var i=Math.ceil(e.length/8),n=0;i>n;n+=1){var o=8*n,s=o+8;for(s>e.length&&(s=e.length);s>o;o+=1)t(e[o])}},kt:function(t,e,i){var n,o;return n=Math.floor(i/2),o=i-n,n=(1<<n)-1<<o,o=(1<<o)-1,[i,t&n|e&o,e&n|t&o]},gj:function(t){return t?encodeURIComponent(t):""},gc:function(t,e,i,n){if(i=t[e].i[i],"undefined"==typeof i)return null;if(t=t[e].s,"number"==typeof i)return t[i];for(;"undefined"==typeof i[n.toString()]&&(n-=1,!(3>n)););return n=i[n.toString()],"number"==typeof n?t[n]:null},decryptionColor:function(t){for(var e=[],i=0,n=t.length;n>i;i+=2)e.push(parseInt(t.substr(i,2),16));return e.push((e.shift()/255).toFixed(2)),"rgba("+e.join(",")+")"},Ik:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},km:function(t,e){return 0>e?t:t.slice(0,e).concat(t.slice(e+1,t.length))},indexOf:function(t,e){if(t&&!t.length)return-1;if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i+=1)if(t[i]===e)return i;return-1},bind:function(t,e){var i=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},Na:function(t,e){return e=e||{},t.F=L.extend({},t.F,e),t.F},LA:function(){return!1},KM:function(t,e){return(t||"")+Math.round(Math.random()*Math.pow(10,e||6))},Vb:function(){var t=0;return function(e){return e._amap_id||(t+=1,e._amap_id=t),e._amap_id}}(),lM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",mj:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},ZS:function(t,e,i,n){var o;if(n){var s,a=0,r=this.mj;o=function(){return s=r(),e>s-a?!1:(a=s,void t.apply(i,arguments))}}else{var h,l,d;d=function(){h=!1,l&&(o.apply(i,l),l=!1)},o=function(){h?l=arguments:(h=!0,t.apply(i,arguments),setTimeout(d,e))}}return o},Ff:function(t,e){return Number(Number(t).toFixed(e||0))},isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},KD:function(t){var e=0;if(0===t.length)return e;for(var i,n=0,o=t.length;o>n;n+=1)i=t.charCodeAt(n),e=(e<<5)-e+i,e&=e;return e},iC:function(t){return"undefined"!=typeof JSON&&JSON.stringify?L.g.KD(JSON.stringify(t)):null},MT:function(t,e){if(e||!t.hasOwnProperty("_amap_hash")){var i=L.g.iC(t);i&&(t._amap_hash=i)}return t._amap_hash},iepngFix:function(t){function e(){for(var t;i.length;)t=i.shift(),window.DD_belatedPNG.fixPng(t);n.Wt=!0}this.QC||(this.QC=[],this.Wt=!1);var i=this.QC,n=this;if("img"===t.tagName.toLowerCase())i.push(t);else{t=t.getElementsByTagName("*");for(var o=0;o<t.length;o+=1)i.push(t[o])}window.DD_belatedPNG&&this.Wt?setTimeout(function(){e()},100):this.Wt||L.Ya.load("AMap.FixPng",e)},ka:function(t){if(L.g.isArray(t))if(L.g.isArray(t[0]))for(var e=0;e<t.length;e+=1)t[e]=L.g.ka(t[e]);else if(e=typeof t[0],"string"===e||"number"===e)return new L.LngLat(t[0],t[1]);return t},ii:function(t){return L.g.isArray(t)?new L.Size(t[0],t[1]):t}},function(){function t(t){window.clearTimeout(t)}function e(t){var e,i,n=["webkit","moz","o","ms"];for(e=0;e<n.length&&!i;e+=1)i=window[n[e]+t];return i}function i(t){var e=+new Date,i=Math.max(0,40-(e-n));return n=e+i,window.setTimeout(t,i)}var n=0,o=window.requestAnimationFrame||e("RequestAnimationFrame")||i,s=window.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||t;L.g.yg=function(t,e,i){return t=L.g.bind(t,e),i?void t():o.call(window,t,void 0)},L.g.Go=function(t){t&&s.call(window,t)}}(),L.oa={e:function(t,e,i,n,o){if(this.Xd(t,e,i||this))return this;var s=this.Rf=this.Rf||{};return s[t]=s[t]||[],o?s[t].unshift({xa:e,he:i||this,mh:n}):s[t].push({xa:e,he:i||this,mh:n}),"complete"===t&&this.Ab&&this.q(t),this},Xd:function(t,e,i){var n=this.Rf;if(e&&i){if(n&&t in n&&n[t])for(var o=0;o<n[t].length;o+=1)if(n[t][o].xa===e&&n[t][o].he===i)return!0;return!1}return n&&t in n&&n[t]&&0<n[t].length},D:function(t,e,i){if(!this.Xd(t))return this;var n=this.Rf;if(n&&n[t])for(var o=0;o<n[t].length;o+=1)if(!(n[t][o].xa!==e&&"mv"!==e||i&&n[t][o].he!==i)){n[t].splice(o,1),n[t].length||delete n[t];break}return this},q:function(t,e){if(!this.Xd(t))return this;for(var i=L.extend({type:t},e),n=[].concat(this.Rf[t]),o=0;o<n.length;o+=1)n[o].xa&&(n[o].xa.call(n[o].he||this,i),n[o].mh&&this.Rf[t]&&this.Rf[t].splice(o,1));return this}},L.oa.on||(L.oa.on=L.oa.e),L.oa.off||(L.oa.off=L.oa.D),L.oa.emit||(L.oa.emit=L.oa.q),L.d={get:function(t){return"string"==typeof t?document.getElementById(t):t},bT:function(t,e){var i=document.head||document.getElementsByTagName("head")[0];if(i){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),e?i.appendChild(n):i.insertBefore(n,i.firstChild)}else document.write("<link rel='stylesheet' href='"+t+"'/>")},gc:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i&&"auto"!==i||!document.defaultView||(i=(i=document.defaultView.getComputedStyle(t,null))?i[e]:null),i&&"auto"!==i||"height"!==e||(i=t.clientHeight+"px"),i&&"auto"!==i||"width"!==e||(i=t.clientWidth+"px"),"auto"===i?null:i},tm:function(t){return t?new L.Size(t.clientWidth||document.body.clientWidth,t.clientHeight||(L.h.Fk&&"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight),!0):void 0},Ht:function(t){var e,i=0,n=0,o=t,s=document.body,a=document.documentElement,r=L.h.zm;do{if(i+=o.offsetTop||0,n+=o.offsetLeft||0,i+=parseInt(L.d.gc(o,"borderTopWidth"),10)||0,n+=parseInt(L.d.gc(o,"borderLeftWidth"),10)||0,e=L.d.gc(o,"position"),o.offsetParent===s&&"absolute"===e)break;if("fixed"===e){i+=s.scrollTop||a.scrollTop||0,n+=s.scrollLeft||a.scrollLeft||0;break}o=o.offsetParent}while(o);o=t;do{if(o===s)break;i-=o.scrollTop||0,n-=o.scrollLeft||0,L.d.XL()||!L.h.BQ&&!r||(n+=o.scrollWidth-o.clientWidth,r&&"hidden"!==L.d.gc(o,"overflow-y")&&"hidden"!==L.d.gc(o,"overflow")&&(n+=17)),o=o.parentNode}while(o);return new L.Pixel(n,i)},XL:function(){return L.d.uG||(L.d.uG=!0,L.d.tG="ltr"===L.d.gc(document.body,"direction")),L.d.tG},create:function(t,e,i){return t=document.createElement(t),i&&(t.className=i),e&&e.appendChild(t),t},zA:function(){document.selection&&document.selection.empty&&document.selection.empty(),this.MI||(this.MI=document.onselectstart,document.onselectstart=L.g.LA);
},FA:function(){},Ek:function(t,e){return t&&e?0<t.className.length&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className):void 0},Qb:function(t,e){t&&e&&!L.d.Ek(t,e)&&(t.className+=(t.className?" ":"")+e)},Nb:function(t,e){function i(t,i){return i===e?"":t}t&&e&&(t.className=t.className.replace(/(\S+)\s*/g,i).replace(/(^\s+|\s+$)/,""))},RM:function(t,e){return 1===e?"":"opacity"in t.style?"opacity:"+e:8<=document.documentMode?"-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.ceil(100*e)+")'":"filter:alpha(opacity="+Math.ceil(100*e)+")"},mi:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){t=t.childNodes.length?t.childNodes:[t];for(var i=Math.round(100*e),n=0;n<t.length;n+=1)t[n].childNodes&&t[n].childNodes.length?this.mi(t[n],e):t[n].style&&(t[n].style.filter="",100!==i&&(t[n].style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")"))}},fv:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i+=1)if(t[i]in e)return t[i];return!1},iB:function(t){var e=L.h.CQ;return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+((e?",0":"")+")")},AS:function(t,e){return L.d.iB(e.add(e.multiplyBy(-1*t)))+(" scale("+t+") ")},IT:function(t,e,i){t.Od=e,!i&&L.h.HK?(e=L.d.iB(e),i=t.style[L.d.Zc].split("rotate"),1<i.length?(i[0]=e,t.style[L.d.Zc]=i.join("rotate")):t.style[L.d.Zc]=e,L.h.ON&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},dd:function(t){return t.Od||(t.Od=t.style.left?new L.Pixel(parseInt(t.style.left),parseInt(t.style.top)):new L.Pixel(0,0)),t.Od},GT:function(t,e){t=t instanceof Array?t:[t];for(var i=0;i<t.length;i+=1)t[i].style.cssText=e},pD:function(t,e){return";"!==e[e.length-1]&&(e+=";"),e.toLowerCase()!==t.style.cssText.replace(/ /g,"").toLowerCase()?(t.style.cssText=e,!0):!1},Z:function(t,e){t=t instanceof Array?t:[t];for(var i=0;i<t.length;i+=1)for(var n in e)e.hasOwnProperty(n)&&(t[i].style[n]=e[n]);return this},SO:function(t){for(;t.childNodes.length;)t.removeChild(t.childNodes[0])},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},rotate:function(t,e,i){var n=L.d.Zc;if(i=i||{x:t.clientWidth/2,y:t.clientHeight/2},n){var o;o=""+(" translate("+(i.x-t.clientWidth/2)+"px,"+(i.y-t.clientHeight/2)+"px)"),o=o+(" rotate("+e+"deg)")+(" translate("+(t.clientWidth/2-i.x)+"px,"+(t.clientHeight/2-i.y)+"px)"),t.style[n]=o}else n=Math.cos(e*Math.PI/180),e=Math.sin(e*Math.PI/180),t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length&&(t=t.filters.item(0),t.PQ=-i.x*n+i.y*e+i.x,t.QQ=-i.x*e-i.y*n+i.y,t.M11=t.M22=n,t.M12=-(t.M21=e))},VM:function(t,e,i){var n=L.d.Zc;if(i=i||{x:t.clientWidth/2,y:t.clientHeight/2},n){var o;return o=""+(" translate("+(i.x-t.clientWidth/2)+"px,"+(i.y-t.clientHeight/2)+"px)"),o=o+(" rotate("+e+"deg)")+(" translate("+(t.clientWidth/2-i.x)+"px,"+(t.clientHeight/2-i.y)+"px)"),L.d.al[n]+":"+o}return""},Rm:function(t,e,i){t.width=e,t.height=i},getElementsByClassName:function(t,e,i){if(e=e||"*",i=i||document,i.getElementsByClassName)return i.getElementsByClassName(t);e=i.getElementsByTagName(e),t=RegExp("(^|\\s)"+t+"(\\s|$)"),i=[];for(var n,o=0;o<e.length;o++)n=e[o],t.test(n.className)&&i.push(n);return i},fillText:function(t,e){return t?(void 0!==t.textContent?t.textContent=e:void 0!==t.innerText?t.innerText=e:t.innerHTML=e,t):void 0}},function(){var t,e=L.d.fv(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);L.extend(L.d,{zA:function(){if(L.l.e(window,"selectstart",L.l.preventDefault),e){var i=document.documentElement.style;"none"!==i[e]&&(t=i[e],i[e]="none")}},FA:function(){L.l.D(window,"selectstart",L.l.preventDefault),e&&"none"!==t&&(document.documentElement.style[e]=t,t="none")},SL:function(){L.l.e(window,"dragstart",L.l.preventDefault)},mM:function(){L.l.D(window,"dragstart",L.l.preventDefault)}})}(),L.d.Zc=L.d.fv(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),L.d.al={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"},L.d.nq=L.d.fv(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),L.d.ZQ="webkitTransition"===L.d.nq||"OTransition"===L.d.nq?L.d.nq+"End":"transitionend",L.g.Qm=window.Qm?window.Qm.bind(window):function(t){var e=Date.now();return setTimeout(function(){t({xA:!1,ZD:function(){return Math.max(0,70-(Date.now()-e))}})},0)},L.g.cm=window.cm?window.cm.bind(window):function(t){clearTimeout(t)},function(t){var e=t.__Class.extend({jb:[t.oa],r:function(){}});t.mn=new e}(L),function(t){var e=t.Class.extend({jb:[t.oa],r:function(){this.qH()},qH:function(){t.mn&&t.mn.e("vecTileParsed.buildings",this.kH,this)},FB:function(t){return t.map.Ax},rD:function(t,e){if(e){var i=e.map;i&&i.Ax!==t&&(i.Ax=t,i.set("display",0))}},iR:function(){},xx:function(t,e){for(var i=0,n=t.length;n>i;i++){var o=t[i].Ss;0>e.indexOf(o)&&e.push(o)}},PA:function(t){if(!t)return null;t=t.getLayers();for(var e=0,i=t.length;i>e;e++)if(t[e]&&t[e]instanceof K)return t[e];return null},xM:function(t){if(t=this.PA(t)){if(!(t=t.get("tiles",null,!0)))return null;if(t=t[0],!t||!t.length)return null;for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];o.Ue&&o.Ue.Ts&&this.xx(o.Ue.Ts,e)}return e}},kH:function(t){if(t.hv&&t.hv.Ue&&(t=t.hv.Ue.Ts)){var e=[];this.xx(t,e),this.q("vecTileParsed.builds.found",{aL:e})}}});t.Qe=new e}(L),L.Pixel=L.Class.extend({initialize:function(t,e,i){if(isNaN(t)||isNaN(e))throw"Invalid Object: Pixel("+t+", "+e+")";this.x=i?Math.round(t):Number(t),this.y=i?Math.round(e):Number(e)},getX:function(){return this.x},getY:function(){return this.y},add:function(t,e){return new L.Pixel(this.x+t.x,this.y+t.y,e)},subtract:function(t,e){return new L.Pixel(this.x-t.x,this.y-t.y,e)},divideBy:function(t,e){return new L.Pixel(this.x/t,this.y/t,e)},multiplyBy:function(t,e){return new L.Pixel(this.x*t,this.y*t,e)},distance:function(t){var e=t.x-this.x;return t=t.y-this.y,Math.sqrt(e*e+t*t)},floor:function(){return new L.Pixel(Math.floor(this.x),Math.floor(this.y))},round:function(){return new L.Pixel(this.x,this.y,!0)},equals:function(t){return t instanceof L.Pixel&&this.x===t.x&&this.y===t.y},qb:function(){return new L.Pixel(this.x,this.y)},toString:function(){return this.x+","+this.y}}),L.PixelBounds=L.Class.extend({initialize:function(){if(2===arguments.length)this.kb=arguments[0],this.Mb=arguments[1];else{if(!(1===arguments.length&&arguments[0]instanceof Array||4===arguments.length))throw"Invalid Object: PixelBounds("+arguments.join(",")+")";var t=arguments[0]instanceof Array?arguments[0]:arguments;this.kb=new L.Pixel(t[0],t[1]),this.Mb=new L.Pixel(t[2],t[3])}},getCenter:function(t){return new L.Pixel((this.kb.x+this.Mb.x)/2,(this.kb.y+this.Mb.y)/2,t)},contains:function(t){var e;return t instanceof L.PixelBounds?(e=t.kb,t=t.Mb):e=t,e.x>this.kb.x&&t.x<this.Mb.x&&e.y>this.kb.y&&t.y<this.Mb.y},getWidth:function(){return this.Mb.x-this.kb.x},getHeight:function(){return this.Mb.y-this.kb.y},intersects:function(t){var e=this.kb,i=this.Mb,n=t.kb;t=t.Mb;var o=t.y>=e.y-20&&n.y<=i.y+20;return t.x>=e.x-20&&n.x<=i.x+20&&o},toString:function(){return this.kb+";"+this.Mb},qb:function(){return new L.PixelBounds(this.kb.qb(),this.Mb.qb())}}),L.xn=L.Class.extend({initialize:function(t,e,i,n){this.nw=t,this.uw=e,this.xw=i,this.Pw=n},transform:function(t,e){return this.sz(t.qb(),e)},sz:function(t,e){return e=e||1,t.x=e*(this.nw*t.x+this.uw),t.y=e*(this.xw*t.y+this.Pw),t},pQ:function(t,e){return e=e||1,new L.Pixel((t.x/e-this.uw)/this.nw,(t.y/e-this.Pw)/this.xw)}}),L.Dg=L.Class.extend({initialize:function(t){this.gq=t.MAX_LATITUDE||85.0511287798,t.project&&t.unproject&&(this.project=t.project,this.unproject=t.unproject)}}),L.Dg.Rv={project:function(t){return new L.Pixel(t.B,t.G)},unproject:function(t,e){return new L.LngLat(t.x,t.y,e)}},L.Dg.XE=new L.Dg({MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.gq,i=Math.max(Math.min(i,t.G),-i);return t=t.B*e,e=Math.log(Math.tan(Math.PI/4+i*e/2)),new L.Pixel(t,e,!1)},unproject:function(t,e){var i=180/Math.PI;return new L.LngLat(t.x*i,(2*Math.atan(Math.exp(t.y))-Math.PI/2)*i,e)}}),L.Dg.Sv={gq:85.0840591556,kq:6356752.3142,jq:6378137,project:function(t){var e=Math.PI/180,i=this.gq,n=Math.max(Math.min(i,t.G),-i),o=this.jq,i=this.kq;return t=t.B*e*o,e*=n,o=i/o,o=Math.sqrt(1-o*o),n=o*Math.sin(e),n=Math.pow((1-n)/(1+n),.5*o),e=-i*Math.log(Math.tan(.5*(.5*Math.PI-e))/n),new L.Pixel(t,e)},unproject:function(t,e){for(var i=180/Math.PI,n=this.jq,o=this.kq,s=t.x*i/n,n=o/n,n=Math.sqrt(1-n*n),o=Math.exp(-t.y/o),a=Math.PI/2-2*Math.atan(o),r=15,h=.1;1e-7<Math.abs(h)&&(r-=1,r>0);)h=n*Math.sin(a),h=Math.PI/2-2*Math.atan(o*Math.pow((1-h)/(1+h),.5*n))-a,a+=h;return new L.LngLat(s,a*i,e)}},L.Pe={},L.Pe.hn={hp:function(t,e){var i=this.hd.project(t),n=this.scale(e);return this.Zm.sz(i,n)},yu:function(t,e,i){return e=this.scale(e),t=this.Zm.pQ(t,e),this.hd.unproject(t,i)},project:function(t){return this.hd.project(t)},scale:function(t){return 256*Math.pow(2,t)},If:function(t){return 12756274*Math.PI/(256*Math.pow(2,t))}},L.Pe.xE=L.extend({},L.Pe.hn,{code:"EPSG:3857",hd:L.Dg.XE,Zm:new L.xn(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){return this.hd.project(t).multiplyBy(6378137)}}),L.S={},L.S.ye=L.Class.extend({jb:[L.oa,L.Kc],initialize:function(t,e){this.xyzObject=t,this.vc=[3,18],this.vq=L.g.Vb(this),t&&this.cd(["opacity","visible","zIndex","zooms"],t),this.w=e,this.J("display",e)},ef:function(){this.Hc&&this.kA();var t=this.Ca;if(t){if(t.length)for(var e=0;e<t.length;e+=1)t[e].parentNode&&t[e].parentNode.removeChild(t[e]);else t.parentNode&&t.parentNode.removeChild(t);this.Ca=null}this.xyzObject.ef&&this.xyzObject.ef(),this.xyzObject.Cf=!1,this.xyzObject.S=null,this.bl(),this.P&&(this.P.bl(),this.P.K=null,this.P.Un=null,this.P.w=null,this.P.bl(),this.P.Ew&&this.P.Ew(),this.P=null)},ia:function(t,e){this.xyzObject.q(t,e)},visibleChanged:function(){this.set("display",0)},zIndexChanged:function(){this.set("display",0)},Vu:function(t){L.d.mi(t,this.opacity)},opacityChanged:function(){var t=this.get("opacity");if(this.opacity=Math.min(Math.max(0,t),1),t=this.Ca)if(t.length)for(var e=0;e<t.length;e+=1)this.Vu(t[e]);else this.Vu(t)},Yo:function(){var t=this.get("bounds");if(t){if(t instanceof L.Bounds){var e=t.getNorthWest(),i=t.getSouthEast(),n=this.w.wb(new L.LngLat(180,0)).x,o=this.w.wb(e),s=this.w.wb(i),a=this.w.get("center");e.B>i.B?0<a.B?s.x+=n:o.x-=n:0<a.B?(0>e.B&&(o.x+=n),0>i.B&&(s.x+=n)):(0<e.B&&(o.x-=n),0<i.B&&(s.x-=n)),this.j=[o.x,o.y,s.x,s.y]}return t instanceof L.PixelBounds&&(this.j=[t.kb.x,t.kb.y,t.Mb.x,t.Mb.y]),this.j}return null}}),xyzObject.prototype.qb=function(){return new xyzObject(this.z,this.x,this.y)},xyzObject.prototype.toString=function(){return[this.z,this.x,this.y].join("/")},L.tile=function(t,e){this.xyzObject=t,this.key=t.toString(),this.url=e},L.xyzObject=xyzObject,L.S.tile=L.S.ye.extend({r:function(t,e){arguments.callee.Sa.apply(this,arguments),this.J("tileSize",t),this.J("tiles",t),this.cd(["zooms","type","detectRetina","tileFun","errorUrl"],t),this.J("lang",e,!0);var i="overlayer"===t.get("type");this.Sf=!i&&!L.h.Y,(L.h.Oc||L.h.lU)&&(this.Sf=!1);var n=e.get("size"),n=n.width*n.height/65536;L.h.sa&&L.h.Y&&n>9&&(this.Sf=!1),this.Wf=!i,this.Xf=!i,this.J("reload",t)},ei:function(){return{yb:this.get("tileSize"),visible:this.get("visible"),j:this.Yo(),vc:this.get("zooms"),Bo:this.Sf,Wf:this.Wf,Xf:this.Xf,opacity:this.get("opacity"),af:this.get("tileFun"),sa:this.get("detectRetina")&&L.h.sa&&L.h.Y}},Yh:function(t){return L.P.$b.Eg?new L.P.$b.Eg(this,t):void 0}}),L.S.Buildings=L.S.ye.extend({r:function(t,e){this.map=e,this.Kj=0,this.Jf=!1,this.ug=this.tg=0,this.Nk=[],arguments.callee.Sa.apply(this,arguments),this.uj=[],this.ne=new L.S.Hv,t&&(this.J("style",t),this.WP=t.get("stable")||!1,this.J("dataSources",t),this.J("bubble",t)),this.J("display",e),this.AF()},ei:function(){return{visible:this.get("visible"),vc:this.get("zooms"),opacity:this.get("opacity"),zIndex:this.get("zIndex"),FK:this.xyzObject.get("alwaysRender")||!1}},dataSourcesChanged:function(){var t=this.get("dataSources");t&&("string"==typeof t?new L.ga.pa(t).e("complete",function(t){this.JC(t.data),this.dj=t.data,this.Jf=!0,this.set("display"),this.Ab=!0,this.xyzObject.q("complete")},this):t.length&&(this.JC(t),this.dj=t,this.Jf=!0,this.set("display"),this.Ab=!0,this.xyzObject.q("complete")))},getDatas:function(){return this.dj},rQ:function(){if(this.xyzObject.dh){var t=this.Pp;this.tg=t.size.width+t.anchor.x,this.ug=t.size.height+t.anchor.y}},ia:function(t,e){var i={type:t,data:"mouseout"===t?this.EH||null:e.nk.lb,target:this.xyzObject};this.EH="mouseout"===t?null:e.nk.lb,this.xyzObject.q(t,i)},tR:function(){},$a:function(t){this.ia(t.type,t)},AF:function(){this.e("click",this.$a),this.e("dblclick",this.$a),this.e("mousedown",this.$a),this.e("mouseup",this.$a),this.e("mouseover",this.$a),this.e("mouseout",this.$a),this.e("touchstart",this.$a),this.e("touchend",this.$a)},xR:function(){this.D("click",this.$a),this.D("dblclick",this.$a),this.D("mousedown",this.$a),this.D("mouseup",this.$a),this.D("mouseover",this.$a),this.D("mouseout",this.$a),this.D("touchstart",this.$a),this.D("touchend",this.$a)},styleChanged:function(){this.Pp=this.get("style"),this.rQ(),this.set("display",0)},JC:function(t){if(t){this.clear();for(var e=this.map.get("resolution",18),i=0;i<t.length;i+=1){var n=t[i].lnglat;t[i].lnglat=L.g.ka(n),n=this.map.wb(n,18,e),n=new L.kd({name:"point-"+L.g.Vb(this),ja:new L.W.Bd([n.x,n.y],!0)}),n.Mh=this,n.lb=t[i],this.xo(n)}}},dB:function(t){return"geojson"===t?new L.BE({map:this.map}):"topjson"===t?new L.aR({map:this.map}):"subway"===t?new L.YQ({map:this.map}):void 0},EO:function(t){if(t){var e=[],e=[],i={};if(t.rules){for(var e=t.rules,n=0,o=e.length;o>n;n+=1){for(var s=[],a=e[n].symbolizers,r=0,h=a.length;h>r;r+=1)a[r].fill&&(s[r]=new L.style.Bc.Iv(a[r].fill)),a[r].stroke&&(s[r]=new L.style.Bc.Yv(a[r].stroke));a=s,e[n].Rp=a,e[n]=new L.style.SE(e[n])}i.rules=e}if(t.symbolizers){for(e=t.symbolizers,t=0,n=e.length;n>t;t+=1)e[t].fill&&(e[t]=new L.style.Bc.Iv(e[t].fill)),e[t].stroke&&(e[t]=new L.style.Bc.Yv(e[t].stroke));i.Rp=e}t=new L.mq(i)}else t=new L.mq({});return this.set("style",t),t},wR:function(a,b){if(-1===L.g.indexOf(a,L.k.Va)){var c=new L.ga.pa(a);c.e("complete",function(t){t=this.Ua[a]=this.dB(b).wp(t),this.Ui(t),this.ia("complete")},this),c.e("error",this.Ka,this)}else new L.ga.XMLHttpRequest(a).e("complete",function(c){c=eval("("+c.data+")"),c=this.Ua[a]=this.dB(b).wp(c),this.Ui(c)},this)},OO:function(t){t.Cj>this.jh&&(this.jh=t.Cj)},xo:function(t){if(this.ne.add(t),!this.Ro&&!this.xyzObject.dh){0===t.name.indexOf("circle")&&(t.e("rad",this.OO,this),this.jh||(this.jh=t.get("radius")),t.Cj>this.jh&&(this.jh=t.get("radius")));var e=t.get("strokeWeight")||0;(!this.Mk||e>this.Mk)&&(this.Mk=e)}this.WP||t.J("feature",this,!0)},Ui:function(t){this.Jf=!0;for(var e=0,i=t.length;i>e;e+=1)this.xo(t[e])},clear:function(){this.Jf=!0,this.ne.clear()},Gf:function(t){var e;return 0>t[0]?(e=[t[0]+L.g.Wa,t[1],L.g.Wa,t[3]],t=[0,t[1],t[2],t[3]],e=this.ne.Gf(e),t=this.ne.Gf(t),L.extend(e,t)):t[2]>L.g.Wa?(e=[t[0],t[1],L.g.Wa,t[3]],t=[0,t[1],t[2]-L.g.Wa,t[3]],e=this.ne.Gf(e),t=this.ne.Gf(t),L.extend(e,t)):this.ne.Gf(t)},vS:function(t){var e,i=this.get("style"),n=t.Oe;return i instanceof L.mq||(i=this.EO(i)),n&&0<n.length?e=i.pA(n,t):((i.kD.length||i.Oe.length)&&(e=i.HL(t)),e||(e=t.DM())),e},kB:function(t){function e(t,e){return t.Uo-e.Uo}var i,n,o,s,a,r=[],h={};for(i in t)if(t.hasOwnProperty(i)){o=t[i],s=o.get("zIndex");for(n in h)if(h.hasOwnProperty(n)&&(a=r[h[n]][2],a===s))break;"undefined"==typeof h[s]&&(r.push([[],[],s]),h[s]=r.length-1),s=r[h[s]],s[0].push(o)}for(r.sort(this.SP),t=0,i=r.length;i>t;t+=1)r[t][0].sort(e);return r},featureChanged:function(t){this.Jf=!0;var e=t.target,i=e.ja;0!==this.ne.FM([L.g.Vb(e)]).length&&(this.ne.remove(e,t.vj),i&&!t.QL&&this.ne.add(e))},XC:function(t){this.Jf=!0;for(var e,i=0,n=t.length;n>i;i+=1)e=t[i],e.ja.vj=null,e.bi(!0),e.Lj("feature")},LT:function(t,e){return t[1].zIndex===e[1].zIndex?L.g.Vb(t[1])-L.g.Vb(e[1]):t[1].zIndex-e[1].zIndex},SP:function(t,e){return t[2]-e[2]},ET:function(t){return t.zS()===L.S.cR.WQ},Yh:function(t){return this.Ro?new L.P.hi.wi(this,t):L.h.Gk&&L.P.canvas.wi?new L.P.canvas.wi(this,t):L.P.$b.wi&&!L.h.xC?new L.P.$b.wi(this,t):null}}),L.S.Hv=L.Class.extend({r:function(){this.clear()},clear:function(){this.nj=[],this.Fu=new L.ze},add:function(t){var e=L.g.Vb(t),i=t.ja;this.nj[e]||(this.count+=1,this.nj[e]=t,i&&!L.j.equals(i.getBounds(),[1/0,1/0,-(1/0),-(1/0)])&&this.Fu.bp(i.getBounds(),t))},sS:function(){return this.nj},Gf:function(t){return this.Fu.zP(t)},FM:function(t){var e,i=t.length,n=[];for(e=0;i>e;e+=1)this.nj[t[e]]&&n.push(this.nj[t[e]]);return n},remove:function(t,e){var i=L.g.Vb(t).toString(),n=t.ja;this.nj[i]&&(delete this.nj[i],n&&(i="undefined"!=typeof e?e:n.getBounds(),this.Fu.remove(i,t)))}}),L.Lv=L.Class.extend({hR:"assets/image/blank.gif",r:function(t,e,i){this.timeout=e||15e3,this.Bj=new L.Ad(1024),this.nh=new L.Ad(1024),this.nA=t,this.HA=i},zw:function(t){for(t&&this.nh.count>=this.nA&&(t=this.nh.hb.ya.value,t.Vg&&(this.nh.remove(t.url),this.ow(t)));this.Bj.count&&!(this.nh.count>=this.nA);)this.qG(this.Bj.shift())},FH:function(){if(!this.Bw){this.Bw=!0;var t=this;setTimeout(function(){t.Bw=!1,t.zw()},0)}},qG:function(t){var e=document.createElement("img");e.src=t.url,t.X=e,t.IN=this,t.startTime=+new Date,t.Mu=!0,e.complete?hc(t,!0):(this.nh.set(t.url,t),e.onload=gc(t,!0),e.onerror=gc(t,!1),e.onabort=gc(t,!1),t.gQ=setTimeout(gc(t,!1),this.timeout))},ow:function(t){t.Mu&&(hc(t,!1),t.Vg=!0,t.AR=!0)},aT:function(t,e,i){return this.QB(t.url,e,i,!0,t.xyzObject.z+"_"+t.xyzObject.x+"_"+t.xyzObject.y)},QB:function(t,e,i,n,o){var s=this.nh.get(t);if(s&&s.Vg)s.Vg=!1,s.Je=e,s.XA=i;else{if(s=new equals(t,e,i),s.pN=n,s.key=o,this.Bj.get(L.g.Vb(s)))return;this.Bj.set(L.g.Vb(s),s),this.zw(!0)}return s},cL:function(t){t.Vg||(t.Vg=!0,this.Bj.remove(L.g.Vb(t)))},clear:function(t){if(this.Bj.forEach(function(t){t.Vg=!0}),this.Bj.clear(),t)for(;t=this.nh.pop();)this.ow(t);else this.nh.forEach(function(t){t.Vg=!0})}});var ic=function(){function t(t){return this.rq[L.g.Vb(t)]=t,this}function e(t){return delete this.rq[L.g.Vb(t)],this}return function(){function i(){var t,e,n=i.rq,o=[];for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.push(n[e]);for(n=o.length-1;n>=0;n-=1)e=o[n].apply(this,arguments),void 0!==e&&(t=e);return t}return i.rq={},i.BR=t,i.xT=e,i}}(),canvasRenderer={init:function(t,e){this._map=t||this._map,this.La=new L.P.canvas.pf.Buildings,this.dataUrl=e||"vdata.amap.com",this.VD=2,this.Zh=0,this.yb=256,this.S=L.h,this.S.VD=2,this.Wm=[new L.Ad,new L.Ad,new L.Ad,new L.Ad,new L.Ad],this.dataProcesObjectArray=[{type:"region",show:!0,dataProcesObject:new L.region(this),Hc:0},{type:"road",show:!0,dataProcesObject:new L.road(this),Hc:0},{type:"building",show:!0,dataProcesObject:new L.building(this),Hc:0},{type:"roadlabel",show:!0,dataProcesObject:new L.roadlabel(this),Hc:1},{type:"poilabel",show:!0,dataProcesObject:new L.poilabel(this),Hc:1}],this.tiles=new L.Ov({size:200,Zu:.7,qt:2,Yu:300}),this.__isDrawLabel=!0,this._La&&(this._La.__loadedImg__={}),this.Ti&&this.size&&(this.Ti.width=this.size.x,this.Ti.height=this.size.y)},_formatTileIds:function(t,e){var i,n="",o=[];for(var s in t)i=s.split(":"),o.push(s),n+=L.g.kt(i[0],i[1],i[2])+";";return 0==n.length?[n,o]:[n.substring(0,n.length-1),o]},loadTile:function(t,e){function i(n,o){var s=1;null==o&&(o="|",s=0);var a=n.indexOf(o);if(-1==a)h+=n;else{h+=n.substring(0,a+s);var l=JSON.parse(h);if(!l["x-vd-v"]){var d=l[0].split("-"),u=d[0]+":"+d[1]+":"+d[2],c=d[1]+":"+d[2]+":"+d[0];if(!r.tiles.get(u)){var p=new L.tile(new xyzObject(d[0],d[1],d[2]),"");p.key=u,r.tiles.set(u,p)}t[c]&&(r.tiles.get(u).Dc=t[c].el,r.parseTileData(l,e,u))}h="",i(n.substring(a+s+1),"]|[")}}var n=this._formatTileIds(t,e)[0],o=new XMLHttpRequest,s="http://"+this.dataUrl+"/tiles?mapType=normal&v=2&style=5&t="+n+"&lv="+e,a=0,r=this,h="";o.sT="";var l=e>18?Math.pow(2,e-18):1;o.onreadystatechange=function(){3===o.readyState?o.wG||(i(o.responseText.substring(a)),a=o.responseText.length,o.hG=!0):4===o.readyState&&(o.startTime&&(L.jd.RA=new Date-o.startTime,L.jd.sM=o.responseText.length/2,r.K.aE("first"),o.hG||r.wl(t,e,l)),c=o.responseText.substring(a),i(c),o.sx=!0,r._map.fire("canvas"))},o.open("GET",s,!0),o.send()},parseTileData:function(t,e,i){var n=t[0].split("-"),o=n[3],n=n.splice(0,3).join("/");e>18&&(n+=":"+e);var s=this.tiles.get(i);this.aE(t,s,e,o)},aE:function(t,e,i,n){if("first"===t)this.Wm[4].push(["co",6,b]);else if(e.Ab&&e.pb)e.pb.Ab||(e.pb.Dc=e.Dc,e.pb.X=e.pb.gg=e.pb.Ab=!0);else{e.Ua||(e.Ua=[]),e.typeDatas||(e.typeDatas={},e.hc=i,e.xyzObject.L1=this.L1);var o;switch(n){case"region":o=0;break;case"road":o=1;break;case"building":o=2;break;case"roadlabel":o=3;break;case"poilabel":o=4}(0===o||4===o||1!==t.length)&&(this.Wm[o].ov(["co",o,e]),this.dataProcesObjectArray[o].show&&this.Wm[o].ov([t.slice(1),o,e]),this.Zh>o&&(this.Zh=o)),3===o&&(this.Wm[3].ov(["co",5,e]),2<this.Zh&&(this.Zh=2)),this.FD()}},FD:function(){this.IC||(this.IC=L.g.yg(function(){var t=new Date,e=!1;do if(e=this.parse(),new Date-t>=this.zE)break;while(!e);this.IC=null,e||this.FD(),this.yd()},this))},parse:function(){var t,e=!1,i=this.Zh,n=this.Wm[this.Zh];if(!n.Ik()){if(t=n.WN(),!t)return e;if(6===t[1]){if(!this.Ab){var o=this;this.Ab=!0,L.g.yg(function(){o.SA||(L.jd.SA=new Date-L.jd.TA,L.jd.Fs=new Date-L.jd.xB),o.ia("complete")})}}else{var s,a=t[2],r=a.hc,h=a.key+(r>18?":"+r:"");if(!this.tiles.ac(h))return e;if("co"===t[0]){if(0===t[1])this.Cu(a),a.typeDatas.region&&"v4"!==this.xQ||(r=this.La.tb.getContext("2d"),r.fillStyle=this.yF,r.fillRect(0,0,a.Dc.width,a.Dc.height)),a.typeDatas.region&&(this.La.dD(a.typeDatas.region,0,a.xyzObject.z),a.typeDatas.region=null),a.X=!0,a.pb&&(a.pb.X=!0);else if(2===t[1]&&a.typeDatas&&a.typeDatas.building)this.Cu(a),this.La.dD(a.typeDatas.building,1,a.xyzObject.z,void 0,undefined),a.typeDatas.building=null;else if(1===t[1])this.Cu(a),a.typeDatas.road&&(this.La.oP(a.typeDatas.road,a.xyzObject.z),a.typeDatas.road=null),a.gg=!0,a.pb&&(a.pb.gg=!0);else if(4===t[1]){if(r>18){t=a.xyzObject,s=Math.pow(2,r-18);for(var l=0;s>l;l+=1)for(var d=0;s>d;d+=1){var u=this.tiles.get(r+":"+(s*t.x+l)+":"+(s*t.y+d));u&&(u.Ab=!0,u.eC=!0)}this.tiles.cl(h)}else a.Ab=!0,a.eC=!0;a.gg=!0,a.pb&&(a.pb.Ab=!0,a.pb.eC=!0,a.pb.gg=!0)}else if(5===t[1])if(a.typeDatas=null,a.X=!0,r>18)for(t=a.xyzObject,h=this.yb,s=Math.pow(2,r-18),l=0;s>l;l+=1)for(d=0;s>d;d+=1)(u=this.tiles.get(r+":"+(s*t.x+l)+":"+(s*t.y+d)))&&!u.X&&(u.Dc=this.GL(),u.Dc.width=u.Dc.height=h,u.Dc.getContext("2d").drawImage(a.Dc,-l*h,-d*h),u.status="loaded",u.gg=!0,u.Ab=!0,u.X=!0,this.en&&0===(u.xyzObject.x+u.xyzObject.y)%2&&u.Dc.getContext("2d").drawImage(this.en,0,0));else this.en&&0===(a.xyzObject.x+a.xyzObject.y)%2&&a.Dc.getContext("2d").drawImage(this.en,0,0)}else r=this.dataProcesObjectArray[t[1]],r.dataProcesObject.map=this.w,s=r.dataProcesObject.getParsedDatas(a,t[0],r),3!==t[1]&&4!==t[1]&&(a.typeDatas[r.type]=s)}n.Ik()&&(1===i&&2===i||!1)}return n.Ik()&&(4===i&&(e=!0),this.Zh=(this.Zh+1)%5),e},Cu:function(t){var e=18<t.hc?Math.pow(2,18-t.hc):1;t.Dc||(t.Dc=document.createElement("canvas"),t.Dc.width=t.Dc.height=this.yb/e,t.gg=!1),this.La.tb=t.Dc,this.La.nb=e},setContainer:function(t,e,i,n,o,s,a){this.Ca=this.Ca||t,this.Ti=this.Ti||e,this._La=this._La||new L.P.canvas.pf.Buildings(this.Ti),this._La.__isExtract=!0,this.K={sa:this.S.sa,lf:!1,hf:2},this.zoom=i,this.L1=L.Pe.xE.If(i),this.center={G:a,B:s,lng:s,lat:a},this.rotation=0,this.centerCoords=L.Pe.xE.hp(this.center,i).multiplyBy(this.L1),this.size={width:n.x,height:n.y},this._tiles=o||this._tiles,this._La.__loadedImg__=this._La.__loadedImg__||{}},updateCenter:function(t,e,i){this.zoom=i,this.center={G:e,B:t,lng:t,lat:e},this.L1=L.Pe.xE.If(i),this.centerCoords=L.Pe.xE.hp(this.center,i).multiplyBy(this.L1)},updateTiles:function(t){this._tiles=t},updateSize:function(t){this.size={width:t.x,height:t.y}},Bp:function(t){var e=this.Ti,i=this._La;i.lf=this.lf;var n=this.K.sa?this.K.hf:1;0!==t.va.rotation?L.d.Rm(e,2*Math.floor(t.Ea.mb.x)*n,2*Math.floor(t.Ea.mb.y)*n,!0):L.d.Rm(e,t.size.width*n,t.size.height*n,!0),i.Eb=[t.Ea.kb.x,t.Ea.kb.y],this._La.nb=this.L1*(this.K.sa?1/this.K.hf:1);var o,s;for(var a in this._tiles)if(o=a.split(":"),s=this.tiles.get(o[2]+":"+o[0]+":"+o[1]),s&&(this.Hg={ak:[s]},(e=this.Hg.ak)&&e.length&&!(.5<e[0].xyzObject.z-this.zoom)))for(i=e.length-1;i>=0;i-=1){var n=e[i].Ua,r=!1;!n&&e[i].pb&&e[i].pb.Ua&&(n=e[i].pb.Ua,r=!0),this._La.Bp(n||{})}},yd:function(){this.cn=!1;var t={};t.size=this.size,t.SK=15e5<t.size.width*t.size.height,t.va=this.ZM(),t.qc=!1,t.lf=!1,t.iu=!1,t.Up=!1,t.kv=!1,t.Ym=!1,this.Ym=!1,t.dC=!0,t.Ea=this.getCoordsBound(),t.Oz=this.Oz=!0,t.sa=!1,t.scale=Math.pow(2,t.va.zoom-t.va.xb),this.Bp(t)},ZM:function(){return{zoom:this.zoom,Th:this.center,fb:this.centerCoords,rotation:this.rotation,xb:this.zoom,nb:this.L1}},getCoordsBound:function(){var t=this.size,e=this.centerCoords,i=this.rotation,n=this.L1,i=Math.PI*i/180,t=new L.Pixel((Math.abs(t.width*Math.cos(i))+Math.abs(t.height*Math.sin(i)))/2,(Math.abs(t.width*Math.sin(i))+Math.abs(t.height*Math.cos(i)))/2),n=new L.PixelBounds(e.subtract(t.multiplyBy(n)),e.add(t.multiplyBy(n))),i=this.zoom;return n.mb=t,n}};L.Ad=L.Class.extend({initialize:function(t,e){this.Ki=0|t,this.Eq=!!e,this.count=0,this.eO=ic(),this.clear()},Ik:function(){return!this.count},PS:function(){return this.count>=this.Ki},HT:function(t){this.Ki!==t&&(this.Ki=0|t)&&this.uz(this.Ki)},get:function(t,e){var i=this.$w(t);return i?i.value:e},set:function(t,e){var i=this.$w(t);i?i.value=e:(i=new L.Ad.ui(t,e),this.w[t]=i,this.wx(i),this.count+=1)},remove:function(t){return Object.prototype.hasOwnProperty.call(this.w,t)?(this.Ql(this.w[t]),!0):!1},forEach:function(t,e){for(var i=this.hb.next;i!==this.hb;i=i.next)t.call(e,i.value,i.key,this)},Qk:function(t,e){return Object.prototype.hasOwnProperty.call(this.w,t)?this.w[t].value:e},pT:function(){return this.hb.next.value},qT:function(){return this.hb.ya.value},shift:function(){return this.Ly(this.hb.next)},push:function(t){t=new L.Ad.ui("",t),0===this.count?(this.hb.ya=null,t.ya=this.hb,this.hb.next=t):(this.no.next=t,t.ya=this.no),this.count+=1,this.no=t},ov:function(t){t=new L.Ad.ui("",t),0===this.count?(this.hb.ya=null,t.ya=this.hb,this.no=this.hb.next=t):(this.hb.next.ya=t,t.next=this.hb.next,t.ya=this.hb,this.hb.next=t),this.count+=1},WN:function(){if(this.count){this.count-=1;var t=this.hb.next;return t.next?(t.next.ya=this.hb,this.hb.next=t.next):(this.hb.next=null,this.no=this.hb.ya=null),t.next=null,t.ya=null,t.value}return null},pop:function(){return this.Ly(this.hb.ya)},$w:function(t){return Object.prototype.hasOwnProperty.call(this.w,t)?(t=this.w[t],this.Eq&&(t.remove(),this.wx(t)),t):void 0},wx:function(t){this.Eq?(t.next=this.hb.next,t.ya=this.hb,this.hb.next=t,t.next.ya=t):(t.ya=this.hb.ya,t.next=this.hb,this.hb.ya=t,t.ya.next=t),this.Ki&&this.uz(this.Ki)},uz:function(t){for(var e=this.count;e>t;e-=1){var i=this.Eq?this.hb.ya:this.hb.next;this.Ql(i),this.eO(i.value)}},Ql:function(t){t.remove(),delete this.w[t.key],this.count-=1},Ly:function(t){return this.hb!==t&&this.Ql(t),t.value},clear:function(){this.w={},this.hb=new L.Ad.ui("",null),this.hb.ya=this.hb.next=this.hb,this.count=0}}),L.Ad.ui=function(t,e){this.key=t,this.value=e},L.Ad.ui.prototype.ya=null,L.Ad.ui.prototype.next=null,L.Ad.ui.prototype.remove=function(){this.ya.next=this.next,this.next.ya=this.ya,this.next=this.ya=null},L.Ov=L.Class.extend({include:[L.oa],initialize:function(t){this.options=L.extend({size:120,Zu:.7,qt:2,Yu:300},t),this.de={},this.Fg=0,this.xq=this.options.size},oF:function(t){return{el:t,Js:L.g.mj(),wo:0}},get:function(t,e){if(!this.ac(t))return e;var i=this.de[t];return i.Js=L.g.mj(),i.wo+=1,i.el},forEach:function(t,e){for(var i in this.de)if(this.de.hasOwnProperty(i)&&!1===t.call(e,this.de[i].el,i))break},Qk:function(t,e){return this.get(t,e)},set:function(t,e){this.ac(t)?this.de[t].el=e:(this.Fg+=1,this.de[t]=this.oF(e)),this.Fg>this.xq&&this.pF()},ac:function(t){return this.de.hasOwnProperty(t)},cl:function(t){if(!this.ac(t))return null;this.Fg-=1;var e=this.de[t];return delete this.de[t],e.el},clear:function(){this.sq(),this.de={},this.Fg=0},sq:function(){this.yq&&clearTimeout(this.yq)},pF:function(){if(this.Fg>this.xq*this.options.qt)this.sq(),this.mw();else if(!(10>L.g.mj()-this.qF)){this.sq();var t=this;this.yq=setTimeout(function(){t.yq=null,t.mw()},this.options.Yu),this.qF=L.g.mj()}},mw:function(){var t=Math.round(this.xq*this.options.Zu);if(!(this.Fg<t))for(var e,i,t=this.kF(this.Fg-t),n=0,o=t.length;o>n;n+=1)e=t[n],i=this.cl(e),this.q?this.q("drop",{key:e,el:i}):L.oa.q("drop",{key:e,el:i})},gF:function(t,e){var i=this.de[t],n=this.de[e],o=i.Js-n.Js;return 0!==o?o:i.wo-n.wo},kF:function(t){var e,i=[];for(e in this.de)this.de.hasOwnProperty(e)&&i.push(e);return this.lF(i,t,this.gF)},lF:function(t,e,i){if(0>=e)return[];for(var n,o,s,a=0,r=t.length-1;r>a;){for(n=a,o=r,s=t[e];e>=n&&o>=e;){for(;e>=n&&0>i.call(this,t[n],s);)n+=1;for(;o>=e&&0<i.call(this,t[o],s);)o-=1;var h=t[n];t[n]=t[o],t[o]=h,n+=1,o-=1}e>o&&(a=n),n>e&&(r=o)}return t.slice(0,e)}}),L.ze=L.Class.extend({r:function(t){this.XB="undefined"!=typeof t?t:6,this.op=Math.floor(this.XB/2),this.Dp={j:[1/0,1/0,-(1/0),-(1/0)],qa:[]},this.count=0},mL:function(t,e){var i,n=-1,o=[];o.push(e);var s=e.qa;do{-1!==n&&(o.push(s[n]),s=s[n].qa,n=-1);for(var a=s.length-1;a>=0;a-=1){var r=s[a];if("undefined"!=typeof r.pj){n=-1;break}var h=L.ze.Zk(r.j[2]-r.j[0],r.j[3]-r.j[1],r.qa.length+1),r=L.ze.Zk((r.j[2]>t.j[2]?r.j[2]:t.j[2])-(r.j[0]<t.j[0]?r.j[0]:t.j[0]),(r.j[3]>t.j[3]?r.j[3]:t.j[3])-(r.j[1]<t.j[1]?r.j[1]:t.j[1]),r.qa.length+2);(0>n||Math.abs(r-h)<i)&&(i=Math.abs(r-h),n=a)}}while(-1!==n);return o},bp:function(t,e,i){t={j:t,pj:e},"undefined"!=typeof i&&(t.type=i),this.yB(t,this.Dp),this.count+=1},yB:function(t,e){var i;if(0===e.qa.length)e.j=L.j.qb(t.j),e.qa.push(t);else{var n=this.mL(t,e),o=t;do{if(i&&"undefined"!=typeof i.qa&&0===i.qa.length){var s=i;i=n.pop();for(var a=0,r=i.qa.length;r>a;a+=1)if(i.qa[a]===s||0===i.qa[a].qa.length){i.qa.splice(a,1);break}}else i=n.pop();if(s=o instanceof Array,"undefined"!=typeof o.pj||"undefined"!=typeof o.qa||s){if(s){for(s=0,a=o.length;a>s;s+=1)L.j.extend(i.j,o[s].j);i.qa=i.qa.concat(o)}else L.j.extend(i.j,o.j),i.qa.push(o);i.qa.length<=this.XB?o={j:L.j.qb(i.j)}:(o=s=this.CN(i.qa),1>n.length&&(i.qa.push(s[0]),n.push(i),o=s[1]))}else L.j.extend(i.j,o.j),o={j:L.j.qb(i.j)}}while(0<n.length)}},CN:function(t){for(var e=this.GO(t);0<t.length;)this.HO(t,e[0],e[1]);return e},GO:function(t){for(var e=t.length-1,i=0,n=t.length-1,o=0,s=t.length-2;s>=0;s-=1){var a=t[s];a.j[0]>t[i].j[0]?i=s:a.j[2]<t[e].j[1]&&(e=s),a.j[1]>t[o].j[1]?o=s:a.j[3]<t[n].j[3]&&(n=s)}return Math.abs(t[e].j[2]-t[i].j[0])>Math.abs(t[n].j[3]-t[o].j[1])?e>i?(e=t.splice(e,1)[0],i=t.splice(i,1)[0]):(i=t.splice(i,1)[0],e=t.splice(e,1)[0]):n>o?(e=t.splice(n,1)[0],i=t.splice(o,1)[0]):(i=t.splice(o,1)[0],e=t.splice(n,1)[0]),[{j:L.j.qb(e.j),qa:[e]},{j:L.j.qb(i.j),qa:[i]}]},HO:function(t,e,i){for(var n,o,s,a=L.ze.Zk(e.j[2]-e.j[0],e.j[3]-e.j[1],e.qa.length+1),r=L.ze.Zk(i.j[2]-i.j[0],i.j[3]-i.j[1],i.qa.length+1),h=t.length-1;h>=0;h-=1){var l=t[h],d=[e.j[0]<l.j[0]?e.j[0]:l.j[0],e.j[2]>l.j[2]?e.j[2]:l.j[2],e.j[1]<l.j[1]?e.j[1]:l.j[1],e.j[3]>l.j[3]?e.j[3]:l.j[3]],d=Math.abs(L.ze.Zk(d[1]-d[0],d[3]-d[2],e.qa.length+2)-a),l=[i.j[0]<l.j[0]?i.j[0]:l.j[0],i.j[2]>l.j[2]?i.j[2]:l.j[2],i.j[1]<l.j[1]?i.j[1]:l.j[1],i.j[3]>l.j[3]?i.j[3]:l.j[3]],l=Math.abs(L.ze.Zk(l[1]-l[0],l[3]-l[2],i.qa.length+2)-r),u=Math.abs(l-d);(!o||!n||n>u)&&(o=h,n=u,s=d>l?i:e)}a=t.splice(o,1)[0],e.qa.length+t.length+1<=this.op?(e.qa.push(a),L.j.extend(e.j,a.j)):i.qa.length+t.length+1<=this.op?(i.qa.push(a),L.j.extend(i.j,a.j)):(s.qa.push(a),
L.j.extend(s.j,a.j))},remove:function(t,e){var i=[];if(i[0]={j:t},(i[1]=e)||(i[1]=!1),i[2]=this.Dp,this.count-=1,!1===i[1]){var n=0,o=[];do n=o.length,o=o.concat(this.$C.apply(this,i));while(n!==o.length);return o}return this.$C.apply(this,i)},$C:function(t,e,i){var n=[],o=[],s=[];if(!t||!L.j.intersects(t.j,i.j))return s;t=L.j.qb(t.j);var a;o.push(i.qa.length),n.push(i);do{i=n.pop();var r=o.pop()-1;if("undefined"!=typeof e)for(;r>=0;){var h=i.qa[r];if(L.j.intersects(t,h.j)){if(e&&"undefined"!=typeof h.pj&&h.pj===e||!e&&("undefined"!=typeof h.pj||L.j.oA(t,h.j))){"undefined"!=typeof h.qa?(s=this.Yk(h,!0,[],h),i.qa.splice(r,1)):s=i.qa.splice(r,1),L.ze.Hu(i),e=void 0,i.qa.length<this.op&&(a=this.Yk(i,!0,[],i));break}"undefined"!=typeof h.qa&&(o.push(r),n.push(i),i=h,r=h.qa.length)}r-=1}else if("undefined"!=typeof a){for(i.qa.splice(r+1,1),0<i.qa.length&&L.ze.Hu(i),r=0,h=a.length;h>r;r+=1)this.yB(a[r],i);a.length=0,0===n.length&&1>=i.qa.length?(a=this.Yk(i,!0,a,i),i.qa.length=0,n.push(i),o.push(1)):0<n.length&&i.qa.length<this.op?(a=this.Yk(i,!0,a,i),i.qa.length=0):a=void 0}else L.ze.Hu(i)}while(0<n.length);return s},search:function(t,e){return this.Yk({j:t},!1,[],this.Dp,e)},zP:function(t,e){return this.Yk({j:t},!1,[],this.Dp,e,!0)},Yk:function(t,e,i,n,o,s){var a={},r=[];if(!L.j.intersects(t.j,n.j))return i;r.push(n.qa);do{n=r.pop();for(var h=n.length-1;h>=0;h-=1){var l=n[h];L.j.intersects(t.j,l.j)&&("undefined"!=typeof l.qa?r.push(l.qa):"undefined"!=typeof l.pj&&(e?i.push(l):("undefined"==typeof o||l.type===o)&&(l=l.pj,"undefined"!=typeof s?a[L.g.Vb(l)]=l:i.push(l))))}}while(0<r.length);return"undefined"!=typeof s?a:i}}),L.ze.Hu=function(t){var e=t.qa.length,i=t.j;if(0===e)L.j.empty(i);else{var n=t.qa[0].j;for(i[0]=n[0],i[2]=n[2],i[1]=n[1],i[3]=n[3],n=1;e>n;n+=1)L.j.extend(i,t.qa[n].j)}},L.ze.Zk=function(t,e,i){var n=(t+e)/2;return t*=e,t*i/(t/(n*n))},L.ra=L.ra||{},L.ra.Ah=L.Class.extend({jb:[L.oa,L.Kc],sO:["position","visible","clickable","bubble"],r:function(t,e){this.map=e,this.cd(this.sO,t),this.J("zIndex",t),this.J("draggable",t),L.h.uc||L.h.Y?this.IF():this.Jq(),this.zc=t,this.zc.ra=this},draggableChanged:function(){this.get("draggable")?this.Iq():this.Sr()},ia:function(t,e){var i;i=e?{type:t,pixel:e.sb,target:this.zc,lnglat:e.qg}:{type:t},this.zc&&this.zc.q(t,i)},$a:function(t){("click"!==t.type&&"rightclick"!==t.type&&"dblclick"!==t.type||this.get("clickable"))&&this.ia(t.type,t)},Hq:function(){this.e("click",this.$a),this.e("rightclick",this.$a),this.e("dblclick",this.$a)},vz:function(){this.D("click",this.$a),this.D("rightclick",this.$a),this.D("dblclick",this.$a)},Jq:function(){this.get("clickable")&&this.Hq(),this.e("mousemove",this.$a),this.e("mouseout",this.$a),this.e("mouseover",this.$a),this.e("mousedown",this.$a),this.e("mouseup",this.$a)},zR:function(){this.vz(),this.D("mousemove",this.$a),this.D("mouseout",this.$a),this.D("mouseover",this.$a),this.D("mousedown",this.$a),this.D("mouseup",this.$a)},clickableChanged:function(){this.get("clickable")?this.Hq():this.vz()},IF:function(){this.get("clickable")&&this.Hq(),this.e("touchstart",this.$a,this),this.e("touchmove",this.$a,this),this.e("touchend",this.$a,this)},Iq:function(){this.e("dragstart",this.Ni),this.e("dragging",this.Li),this.e("dragend",this.Mi)},Ni:function(t){this.re=t.sb,this.ia("dragstart",t)},Li:function(t){var e=t.sb.subtract(this.re),i=e.x,e=e.y;this.re=t.sb;var n=this.map.get("rotation")*Math.PI/180;this.lh(new L.Pixel(i*Math.cos(n)+Math.sin(n)*e,-Math.sin(n)*i+Math.cos(n)*e)),this.ia("dragging",t)},Mi:function(t){this.ia("dragend",t)},Sr:function(){this.D("dragstart",this.Ni),this.D("dragging",this.Li),this.D("dragend",this.Mi)},fx:function(t){var e,i,n=[];for(e=0,i=t.length;i>e;e+=1)n.push(this.lr(t[e]));return n},lr:function(t){return t=this.map.wb(t),[t.x,t.y]},Gb:function(t){var e=this.A.Aa||this.map.get("centerCoords"),i=this.map.get("crs").If(Math.floor(this.map.get("zoom")));return[(t[0]-e.x)/i,(t[1]-e.y)/i]}}),L.ra.Wc=L.ra.Ah.extend({uu:"content icon opacity angle autoRotation offset shadow title label isTop shape topWhenClick topWhenMouseOver".split(" "),r:function(t,e){arguments.callee.Sa.apply(this,arguments),this.cd(this.uu,t),this.J("move",t),this.ZK(),this.Wi(),this.set("AnimationOffset",new L.Pixel(0,0)),this.J("raiseOnDrag",t),this.GK={AMAP_ANIMATION_NONE:!1,AMAP_ANIMATION_DROP:L.Bg.Easing.Bounce,AMAP_ANIMATION_BOUNCE:L.Bg.Easing.Cubic},this.J("animation",t)},vr:function(t,e,i){if(this.get("animation")&&"AMAP_ANIMATION_NONE"!==this.get("animation")){var n=this;this.Mf=new L.Bg,this.Mf.transition=function(i,o,s){return t&&s>=600?(n.Mf.stop(),0):(i=0===Math.floor(s/600)%2?"Out":"In","out"===e?i="Out":"in"===e&&(i="In"),n.GK[n.get("animation")][i](s%600/600))},i=i||40,this.Mf.Im=function(t){n.set("AnimationOffset",n.Ur.add(new L.Pixel(0,-1*i*t)))},this.Ur=new L.Pixel(0,0),this.Mf.Ej()}},AnimationOffsetChanged:function(){this.positionChanged()},Sy:function(){if(this.Mf&&(this.Mf.stop(),this.set("AnimationOffset",this.Ur)),this.set("AnimationOffset",new L.Pixel(0,-40)),this.hl)this.hl.set("position",this.get("position"));else{var t=new M({zIndex:this.get("zIndex")-1,icon:new U({image:L.k.Va+"/theme/v1.3/dragCross.png",size:new L.Size(14,11)}),offset:new L.Pixel(-4,-5),position:this.get("position")});t.da=!0,this.hl=t}this.hl.setMap(this.map.Fb)},Uw:function(){this.set("animation","AMAP_ANIMATION_DROP",!0),this.vr(!0,"in"),this.hl.setMap(null)},animationChanged:function(){this.Mf&&(this.Mf.stop(),this.set("AnimationOffset",this.Ur),this.Mf=null);var t=this.get("animation");t&&"AMAP_ANIMATION_NONE"!==t&&("AMAP_ANIMATION_DROP"===t?this.vr(!0,"in",100):this.vr())},Vf:function(){this.hl&&this.hl.set("position",this.get("position"))},raiseOnDragChanged:function(){this.get("raiseOnDrag")?(this.e("dragstart",this.Sy,this),this.e("dragging",this.Vf,this),this.e("dragend",this.Uw,this)):(this.D("dragstart",this.Sy,this),this.D("dragging",this.Vf,this),this.D("dragend",this.Uw,this))},lh:function(t){var e=this.get("position");t=this.map.wb(e).add(t.multiplyBy(this.map.get("resolution"))),e instanceof L.LngLat?this.set("position",this.map.je(t)):this.set("position",t)},ZK:function(){var t=this.get("content"),e=this.get("shadow"),i=this.get("offset"),n=this.get("label"),t=t?this.Uz(t,i):this.Rs(this.get("icon"),i);this.set("contentDom",t),e&&(e=this.Wz(e,i),this.set("shadowDom",e)),n&&n.content&&this.set("labelDom",this.Vz(n.content))},Vz:function(t){var e=document.createElement("div");return e.className="amap-marker-label",e.innerHTML=t,e},Wi:function(){if(this.map&&this.get("position")&&!this.A){var t=this.map,e=this.map.wb(this.get("position")),t=this.A=new L.kd({name:"marker-"+L.g.Vb(this),map:t,ja:new L.W.Bd([e.x,e.y])});t.Mh=this,this.J("coords",t,!0),t.J("offset",this,!0),t.J("isTop",this,!0),t.J("zIndex",this,!0),t.J("params",this,!0)}},getParams:function(){return{zIndex:this.get("zIndex"),Kz:this.get("angle"),Xh:this.get("contentDom"),yN:this.get("labelDom"),QP:this.get("shadowDom"),opacity:this.get("opacity"),title:this.get("title"),label:this.get("label"),Bv:this.get("AnimationOffset"),offset:this.get("offset"),vN:this.get("isTop"),shape:this.get("shape"),visible:this.get("visible")}},offsetChanged:function(){if(this.A&&this.A.O){var t=this.map.wb(this.get("position")).subtract(this.A.ba).divideBy(this.map.get("resolution"));this.A.O&&(this.A.O.style.left=Math.floor(t.x)+this.get("offset").x+this.get("AnimationOffset").x+"px",this.A.O.style.top=Math.floor(t.y)+this.get("offset").y+this.get("AnimationOffset").y+"px")}},positionChanged:function(){if(this.A){var t=this.map.wb(this.get("position"));this.set("coords",[t.x,t.y]),this.A.O&&this.A.O.Zr&&(t=t.subtract(this.A.NB.ba).divideBy(this.map.get("resolution")),this.A.O.style.left=Math.floor(t.x)+this.get("offset").x+this.get("AnimationOffset").x+"px",this.A.O.style.top=Math.floor(t.y)+this.get("offset").y+this.get("AnimationOffset").y+"px",this.A.O.parentNode!==this.A.O.Zr&&this.A.O.Zr.appendChild(this.A.O))}},contentChanged:function(){if(this.A){this.map.Tb.um=!0,this.map.Tb.Nk.push(this.A),this.A.O&&this.A.O.removeChild(this.get("contentDom"));var t=this.get("content"),e=this.get("offset"),t=this.Uz(t,e);this.set("contentDom",t),this.A.O&&(L.h.td&&L.g.iepngFix(t),this.A.O.appendChild(t),this.A.Xh=t)}},iconChanged:function(){if(this.A&&this.A.O&&!this.get("content")){this.map.Tb.um=!0,this.map.Tb.Nk.push(this.A),this.A.O&&this.get("contentDom")&&this.A.O.removeChild(this.get("contentDom"));var t=this.get("icon"),e=this.get("offset"),t=this.Rs(t,e);this.set("contentDom",t),this.A.O&&(L.h.td&&L.g.iepngFix(t),this.A.O.appendChild(t),this.A.Xh=t)}},shadowChanged:function(){if(this.A&&this.A.O){var t=this.get("shadowDom");if(this.A.O&&t&&t.parentNode===this.A.O&&this.A.O.removeChild(t),t=this.get("shadow")){var e=this.get("offset"),t=this.Wz(t,e);this.set("shadowDom",t),this.A.O&&this.A.O.appendChild(t)}}},titleChanged:function(){this.A&&this.A.Xh&&"string"==typeof this.get("title")&&this.A.Xh&&this.get("title")&&(this.A.Xh.title=this.get("title"))},labelChanged:function(){if(this.A&&this.A.O){var t=this.get("label"),e=this.A.O;if(e&&t&&t.hasOwnProperty("content")){this.get("labelDom")&&e.removeChild(this.get("labelDom"));var i="";if(t.content){var i=this.Vz(t.content),n=0,o=0;t.offset&&(n=t.offset.y+"px",o=t.offset.x+"px"),i.style.top=n,i.style.left=o,e.appendChild(i)}this.set("labelDom",i)}}},isTopChanged:function(){var t=this.map.Tb.Tp,e=this.get("isTop"),i=this.get("zIndex");t?t===this?this.A&&this.A.O&&(this.A.O.style.zIndex=e?this.map.Tb.Kj+10:i,this.map.Tb.Tp=e?this:null):(t.A&&t.A.O&&(t.A.O.style.zIndex=e?t.get("zIndex"):this.map.Tb.Kj+10),this.A&&this.A.O&&(this.A.O.style.zIndex=e?this.map.Tb.Kj+10:i),this.map.Tb.Tp=e?this:t):(this.map.Tb.Tp=this,this.A&&this.A.O&&(this.A.O.style.zIndex=e?this.map.Tb.Kj+10:i))},visibleChanged:function(){this.A&&this.A.O&&(this.get("visible")?this.A.O.style.display="block":this.A.O.style.display="none")},angleChanged:function(){if(this.A&&this.A.O){var t={x:-1*this.get("offset").x,y:-1*this.get("offset").y};L.d.rotate(this.A.O,this.get("angle")||0,t)}},zIndexChanged:function(){var t=this.get("zIndex");if(t>this.map.Tb.Kj){this.map.Tb.Kj=t;var e=this.map.Tb.Tp;e&&e.A&&e.A.O&&(e.A.O.style.zIndex=t+10)}this.A&&this.A.O&&(this.A.O.style.zIndex=this.get("isTop")?this.map.Tb.Kj+10:this.get("zIndex"))},opacityChanged:function(){var t=this.get("contentDom"),e=this.get("shadowDom");t&&L.d.mi(t,this.get("opacity")),e&&L.d.mi(e,this.get("opacity"))},Uz:function(t){var e;return e=document.createElement("div"),e.className="amap-marker-content","string"!=typeof t?e.appendChild(t):(e.innerHTML=t,e.childNodes[0]&&!e.childNodes[0].style&&(e.style["white-space"]="pre")),L.d.mi(e,this.get("opacity")),e},Rs:function(t){var e,i,n,o,s,a=0,r=0;return t?("string"==typeof t?(e=t,s=!0):(e=t.get("image"),r=t.get("size"),i=t.get("imageSize"),a=r.width,r=r.height,i&&(n=i.width,o=i.height)),a||(a=0),r||(r=0),t="string"!=typeof t?t.get("imageOffset"):{x:0,y:0}):(e=L.k.ih+"/mark_bs.png",t={x:0,y:0},a=19,r=33,n=19,o=33),i=document.createElement("div"),i.className="amap-icon",i.style.position="absolute",s&&!L.h.Oc&&(i.style.overflow="inherit"),a&&(i.style.width=a+"px"),r&&(i.style.height=r+"px"),a=document.createElement("img"),a.src=e,n&&o&&(a.style.width=n+"px",a.style.height=o+"px"),a.style.top=t.y+"px",a.style.left=t.x+"px",L.h.Oc&&s||i.appendChild(a),L.d.mi(L.h.Oc&&s?a:i,this.get("opacity")),L.h.Oc&&s?a:i},Wz:function(t,e){var i=this.Rs(t,e);return i.style.zIndex=-1,i},moveChanged:function(){var t=this.get("move");return!1===t?this.ZP():void(void 0!==t&&("[object Array]"===Object.prototype.toString.call(t.qg)?this.SN(t.qg,t.speed,t.xa,t.nL):this.moveTo(t.qg,t.speed,t.xa)))},moveTo:function(t,e,i){var n=this.get("position");t.subtract(n);var o=Math.round(t.distance(n)/1e3/e*36e5);return 0===o?this.q("moveend"):(this.df&&(this.df.stop(),this.df=null),this.df=new L.Bg(n,t),i=i||function(t){return t},this.df.transition=function(t,e,n){if(n>=o)return e;var s=(e.B-t.B)*i(n/o)+t.B;return t=(e.G-t.G)*i(n/o)+t.G,new L.LngLat(s,t)},this.df.Im=function(e){this.set("position",e),e.equals(t)?(this.df&&(this.df.stop(),this.df=null),this.zc.q("moveend"),this.q("moveend")):this.zc.q("moving")},this.get("autoRotation")&&!L.h.Oc&&(e=this.PG(n,t),this.set("angle",e)),void this.df.Ej(this))},ZP:function(){this.df&&(this.df.stop(),this.df=null,this.q("movestop"))},SN:function(t,e,i,n){function o(){s+=1,s<t.length?this.moveTo(t[s],e,i):(this.ia("movealong"),n?(s=1,this.set("position",t[0]),this.moveTo(t[1],e,i)):this.D("moveend",o,this))}var s=0;this.set("position",t[0]),this.e("moveend",o,this),this.e("movestop",function(){this.D("moveend",o,this)},this),this.moveTo(t[0],e,i)},PG:function(t,e){var i=this.map,n=i.wb(t),i=i.wb(e),o=0;i.distance(n);var s=i.y-n.y,a=i.x-n.x;return 0!==i.x-n.x?(o=Math.atan((i.y-n.y)/(i.x-n.x)),s>=0&&0>a?o=Math.PI+o:0>s&&0>=a?o=Math.PI+o:0>s&&a>=0&&(o=2*Math.PI+o)):o=i.y>n.y?Math.PI/2:3*Math.PI/2,L.g.Ff(180*o/Math.PI,1)}}),L.ra.cq=L.ra.Ah.extend({r:function(t,e){arguments.callee.Sa.apply(this,arguments),this.J("items",t,!0),this.J("content",t,!0),this.J("resolution",e),this.J("centerCoords",e),this.bm=t},lC:function(){this.setContainer(),this.dl(),this.uh(),this.map.e("movestart",this.uf,this),this.map.e("mapmove",this.uf,this),this.map.e("zoomstart",this.uf,this),this.map.e("click",this.uf,this),this.map.e("closeOverlays",this.uf,this),this.map.e("rotate",this.uf,this)},uf:function(){this.bm.map&&this.bm.close()},mapChanged:function(){},positionChanged:function(){this.uh()},setContainer:function(){this.u&&(this.u.parentNode&&this.u.parentNode.removeChild(this.u),this.u=null);var t=L.d.create("div",null,"amap-menu");L.l.e(t,"mousedown",function(t){L.l.stopPropagation(t)},this),this.u=t,this.map.Ra.ra.appendChild(this.u)},dl:function(){var t=this,e=this.u;e.innerHTML="";var i=this.get("content");if("object"==typeof i)e.appendChild(i);else if("string"==typeof i)e.innerHTML=i;else if((i=this.get("items"))&&i.length){var n=L.d.create("ul",e,"amap-menu-outer");for(i.sort(function(t,e){return isNaN(t.qp)||isNaN(e.qp)?0:t.qp-e.qp}),e=0;e<i.length;e+=1)(function(e){var i=e.eE,o=e.xa,s=L.d.create("li",n);s.innerHTML=i,L.l.e(s,"click",function(){o.call(s),t.bm.close()},s)})(i[e])}else this.u.innerHTML=""},uh:function(){var t=this.map,e=this.u;if(t&&e){var i=t.wb(this.get("position")),n=this.get("centerCoords"),e=(i.x-n.x)/this.get("resolution"),i=(i.y-n.y)/this.get("resolution"),t=t.get("size"),i=i+t.height/2,e=e+t.width/2;this.u.style.right="",this.u.style.bottom="",this.u.style.left=e+"px",this.u.style.top=i+"px"}},ef:function(){this.u&&(this.map.D("click",this.Fw,this),this.map.Ra.ra.removeChild(this.u),this.bm.Cf=!1,this.u=this.bm.Ae.map=null,this.map.D("movestart",this.uf,this),this.map.D("zoomstart",this.uf,this),this.map.D("click",this.uf,this),this.map.D("closeOverlays",this.uf,this),this.map.D("rotate",this.uf,this))},visibleChanged:function(){this.u&&(this.get("visible")?this.u.style.display="block":this.u.style.display="none")},itemsChanged:function(){this.u&&this.dl()}}),L.ra.yh=L.ra.Ah.extend({r:function(t,e){arguments.callee.Sa.apply(this,arguments),this.cd("content position contentU isCustom autoMove showShadow closeWhenClickMap size offset".split(" "),t),this.J("resolution",e),this.J("centerCoords",e),this.J("retainWhenClose",t,!0),this.J("display",e),t.J("toBeClose",this),this.map=e,this.Ug=t},lC:function(){this.zL?this.map.Ra.ra.appendChild(this.Ia):(this.setContainer(),this.dl(),this.uL()),this.rv(),this.uh(),this.pw(),this.zL=!0},setContainer:function(){var t=L.d.create("div");t.className="amap-info";var e=L.d.create("div",t),i=L.d.create("div",t),n=L.d.create("div",i);t.style.position="absolute",i.style.position="absolute",i.style.bottom=-1*(this.get("offset").y||0)+"px",i.style.left=(this.get("offset").x||0)+"px",e.style.position="absolute",e.style.bottom=-1*(this.get("offset").y||0)+"px",e.style.left=(this.get("offset").x||0)+"px",this.Ia=t,this.Rb=i,this.Sm=e,this.Td=n,this.map.Ra.ra.appendChild(this.Ia)},dl:function(){var t=this.get("contentU");if(t){var e=this.get("isCustom"),i=this.Td,n=this.Sm;i.innerHTML="";var o=null;if(e){if("string"==typeof t)i.innerHTML=t;else if(t instanceof Array)for(o=0;o<t.length;o+=1)i.appendChild(t[o]);else i.appendChild(t);o=i,n.parentNode&&n.parentNode.removeChild(n)}else o=n=L.d.create("div",i,"amap-info-content amap-info-outer"),"string"==typeof t?n.innerHTML=t:n.appendChild(t),this.AL=n,t=L.d.create("a",this.Td,"amap-info-close"),t.innerHTML="\\u00d7",this.Vs=t,t.href="javascript: void(0)",L.h.uc?(L.l.e(t,"touchstart",function(t){L.l.stop(t)},this),L.l.e(t,"touchend",function(t){L.l.stop(t),this.Ug.close()},this),L.l.e(t,"click",function(t){L.l.stop(t),this.Ug.close()},this)):(L.l.e(t,"mousedown",function(t){L.l.stop(t)},this),L.l.e(t,"click",function(t){L.l.stop(t),this.Ug.close()},this)),(t=this.get("size",!0))&&(0!==t.width&&(n.style.width=t.width+"px"),0!==t.height&&(n.style.height=t.height+"px")),t=L.d.create("div",i,"amap-info-sharp"),t.style.height="23px",(L.h.td||L.h.zm)&&(t.style.marginLeft=i.childNodes[0].offsetWidth/2-5),this.Sm.style.display="block";i=function(t){L.l.stopPropagation(t)},L.h.uc?(L.l.e(o,"touchstart",i,this),L.l.e(o,"touchmove",i,this),L.l.e(o,"touchend",i,this)):(L.l.e(o,"mousedown",i,this),L.l.e(o,"mouseup",i,this),L.l.e(o,"mousemove",i,this))}},rv:function(){var t=this.get("isCustom"),e=this.get("showShadow");if(!t&&e){var t=this.Sm,e=L.d.tm(this.Td),i=e.height-23,n=e.width;(L.h.td||L.h.zm)&&(i=this.Td.childNodes[0].offsetHeight,n=this.Td.childNodes[0].offsetWidth+26),e="background-image:url("+L.k.Va+(L.h.td?"/theme/v1.3/iws.gif);":"/theme/v1.3/iws.png);"),t.innerHTML="";var o,s=[];for(o=s[1]={},o.height=.5*i+4,o.width=n,o.offsetX=400,o.offsetY=16,o.top=-o.height-10-15,o.left=23,o=s[2]={},o.height=s[1].height,o.width=s[1].height,o.offsetX=1075-o.width,o.offsetY=s[1].offsetY,o.top=s[1].top,o.left=23+s[1].width,o=s[3]={},o.height=10,o.width=22,o.offsetX=30,o.offsetY=445,o.top=-25,o.left=23+(L.h.zm||L.h.td?5:0),o=s[4]={},o.height=10,o.width=n/2-15-s[3].left-s[3].width,o.offsetX=132,o.offsetY=445,o.top=-25,o.left=s[3].left+s[3].width,o=s[5]={},o.height=10,o.width=70,o.offsetX=80,o.offsetY=445,o.top=-25,o.left=s[4].left+s[4].width,o=s[6]={},o.height=10,o.width=n-s[5].left-s[5].width,o.offsetX=132,o.offsetY=445,o.top=-25,o.left=s[5].left+s[5].width,o=s[7]={},o.height=10,o.width=30,o.offsetX=621,o.offsetY=445,o.top=-25,o.left=n,o=s[8]={},o.height=15,o.width=70,o.offsetX=47,o.offsetY=470,o.top=-15,o.left=n/2-15,i=1;8>=i;i+=1)n=L.d.create("div",t),o=[],o.push("position:absolute;"),o.push(e),o.push("top:"+s[i].top+"px;"),o.push("left:"+s[i].left+"px;"),o.push("width:"+s[i].width+"px;"),o.push("height:"+s[i].height+"px;"),o.push("background-position:"+-s[i].offsetX+"px "+-s[i].offsetY+"px;"),n.style.cssText=o.join("")}},WT:function(){},uh:function(){var t=this.map,e=this.Ia,i=this.get("position"),n=this.get("resolution");if(t&&e&&i){var i=t.wb(this.get("position")),o=this.get("centerCoords"),e=(i.x-o.x)/n,n=(i.y-o.y)/n,t=t.get("size"),i=L.d.tm(this.Td);if((L.h.td||L.h.zm)&&(i.width=this.Td.childNodes[0].offsetWidth+14),i=this.get("isCustom")?i.width/2:(i.width-30)/2,this.Ia.style.left=e+t.width/2-i+"px",this.Ia.style.top=n+t.height/2+"px",e=this.AL,this.Vs&&e.childNodes[0]){for(n=t=0;n<e.childNodes.length;n+=1)t+=e.childNodes[0].clientHeight||0;t>(this.get("size").height||e.clientHeight)?this.Vs.style.right="20px":this.Vs.style.right="5px"}}},gG:function(){var t=new L.Pixel(2-this.Td.offsetWidth/2,2-this.Td.offsetHeight),e=this.get("offset")||new L.Pixel(0,0);return this.get("isCustom")||(t=t.add(new L.Pixel(0,-23))),t.add(e)},pw:function(){if(this.get("position")&&this.get("autoMove")&&this.Td){var t=this.map,e=new L.Size(this.Td.offsetWidth,this.Td.offsetHeight);t.lnglatTocontainer(this.get("position"));for(var i=t.lnglatTocontainer(this.get("position")).add(this.gG()),n=i.add(e.$k()),o=t.get("size"),s=t.AM(),a=0,r=0,h=0;h<s.length;h+=1){var l=s[h],d=0,u=0;0===l[1]&&0===l[2]?(d=l[3]-(i.x+a),u=l[0]-(i.y+r),d>0&&u>0&&(Math.abs(d)<Math.abs(u)?a+=d:r+=u)):0===l[2]&&0===l[3]?(d=o.getWidth()-l[1]-(n.x+a),u=l[0]-(i.y+r),0>d&&u>0&&(Math.abs(d)<Math.abs(u)?a+=d:r+=u)):0===l[0]&&0===l[3]?(d=o.getWidth()-l[1]-(n.x+a),u=o.getHeight()-l[2]-(n.y+r),0>d&&0>u&&(Math.abs(d)<Math.abs(u)?a+=d:r+=u)):0===l[0]&&0===l[1]&&(d=l[3]-(i.x+a),u=o.getHeight()-l[2]-(n.y+r),d>0&&0>u&&(Math.abs(d)<Math.abs(u)?a+=d:r+=u))}i=i.add(new L.Pixel(a,r)),n=n.add(new L.Pixel(a,r)),h=s=0,0>i.x||e.getWidth()>o.getWidth()?s=20-i.x:o.getWidth()<n.x&&(s=o.getWidth()-n.x-25),0>i.y||e.getHeight()>o.getHeight()?h=5-i.y:o.getHeight()<n.y&&(h=o.getHeight()-n.y-15),s+=a,h+=r,(s||h)&&t.Fb.panBy(s,h)}},uL:function(){this.get("closeWhenClickMap")&&this.map.e("closeInfo",this.Fw,this,!1)},Fw:function(){this.Ug.Cf&&this.Ug.close()},ef:function(){this.Ia&&(this.get("retainWhenClose")?this.map.Yj.appendChild(this.Ia):this.Ia.parentNode===this.map.Ra.ra&&this.map.Ra.ra.removeChild(this.Ia),this.Ug.Cf=!1,this.Ug.Ae.map=null,this.Ug.map=null,this.zc.q("close",{type:"close",target:this.zc}))},mR:function(){if(!this.get("isCustom"))return this.Td.offsetWidth;for(var t=this.Ce,e=t.firstChild,i=t.lastChild;e&&i&&e.style&&i.style&&e===i;)t=e,e=t.firstChild,i=t.lastChild;return t=L.d.gc(t,"width"),t=parseInt(t.replace("px",""),10)},displayChanged:function(t){t?this.uh():L.g.yg(this.uh,this)},positionChanged:function(){this.map&&this.Ia&&(this.uh(),this.pw())},offsetChanged:function(){var t=this.get("offset");this.Rb.style.bottom=-1*(t.y||0)+"px",this.Rb.style.left=(t.x||0)+"px",this.Sm.style.bottom=-1*(t.y||0)+"px",this.Sm.style.left=(t.x||0)+"px"},contentChanged:function(){this.dl(),this.rv(),this.uh()},sizeChanged:function(){this.dl(),this.rv(),this.uh()}}),L.W={},L.W.si=L.Class.extend({jb:[L.oa,L.Kc],r:function(){},qb:function(){return new this.r(this.Ta)},vt:function(){return this.Ta},setCoords:function(t){this.FP(t)},FP:function(t){if(this.vj=this.getBounds(),this.Mc=null,L.W.Xc&&this instanceof L.W.Xc){var e=t.length;this.ue=Array(e);for(var i,n,o=0;e>o;o+=1)if(i=t[o],n=new L.W.Qv(i),this.ue[o]=n,0===o){if(0===i.length)break;n.oj(i)||i.reverse()}else 0!==i.length&&n.oj(i)&&i.reverse()}else this.Ta=t}}),L.W.VectorLayer=L.extend({},{Qj:"point",fq:"linestring",Nv:"linearring",un:"polygon",iq:"multipoint",hq:"multilinestring",rn:"multipolygon",RQ:"geometrycollection"}),L.kd=L.Class.extend({jb:[L.oa,L.Kc],r:function(t){t=t||{},this.Qn=t.Qn,this.map=t.map,this.Uo=L.g.Vb(this),this.name=t.name||"",this.Ze=!1,this.set("visible",!0,!0),this.Tu(t.ja),this.Oe=t.Rp,this.style=t.style},UL:function(){this.style=this.Oe=this.Mh=this.NB=this.ja=this.name=this.map=null,this.bl(),this.tk()},XM:function(){return this.Oe},MP:function(t){this.Oe=t,this.zIndex=this.Oe[0].xe||this.zIndex},uS:function(){return this.ja},Tu:function(t){t&&(this.ja=t,this.J("coords",t,!0),this.Qn&&(t.J("radius",this),t.J("center",this),t.J("resolution",this),t.J("strokeWeight",this)))},setStyle:function(t){this.MP(t),this.bi()},coordsChanged:function(){this.bi()},radiusChanged:function(){this.ja.vj=this.ja.getBounds(),this.ja.Mc=null,this.bi()},bi:function(t){this.set("feature",{target:this,QL:t,vj:this.ja.vj||this.ja.getBounds(),UN:this.ja.getBounds()}),this.ja.vj=this.ja.getBounds()},visibleChanged:function(){this.bi()},CS:function(t){for(var e=0;e<this.Oe.length;e+=1){var i=this.Oe[e];if(t.equals(i.vk(this)))return i}},DM:function(){var t=this.ja,e=[];return t.Hd()===L.W.VectorLayer.un||t.Hd()===L.W.VectorLayer.rn?e.push(new L.style.Ob.Xc({fillColor:"#78cdd1",sc:.2,strokeColor:"#122e29",na:.5,Xa:1})):t.Hd()===L.W.VectorLayer.fq||t.Hd()===L.W.VectorLayer.Nv||t.Hd()===L.W.VectorLayer.hq?e.push(new L.style.Ob.Pv({color:"#888888",width:1,zIndex:10})):t.Hd()!==L.W.VectorLayer.Qj&&t.Hd()!==L.W.VectorLayer.iq||e.push(new L.style.Ob.nn({url:L.k.Va+"/theme/v1.3/markers/0.png",width:36,height:36,rotation:0,mU:-12,nU:-36,zIndex:100})),e}}),L.kd.NQ="geometry",L.W.Bd=L.W.si.extend({r:function(t,e){this.Ta=t,this.dh=e,this.Mc=null},getBounds:function(){if(!this.Mc){var t=this.Ta[0],e=this.Ta[1];if(this.dh)this.Mc=[t,e,t,e];else{var i=this.get("radius"),i=i?i/Math.cos(Math.PI*this.get("center").G/180):0,n=this.get("resolution")*this.get("strokeWeight")||0;this.Mc=[t-i-n,e-i-n,t+i+n,e+i+n]}}return this.Mc},Hd:function(){return L.W.VectorLayer.Qj}}),L.P={canvas:{},$b:{},eU:{},hi:{}},L.P.ye=L.Class.extend({jb:[L.oa,L.Kc],initialize:function(t,e){this.K=t,this.dh=t.xyzObject.dh,this.Un=e,this.w=e.w,this.J("display",e)},yt:function(t,e){var i=this.zoom,n=[],o=this.K;if(Math.floor(i)!==i)e(n,o);else{if(i=[t.x,t.y],o.um){for(var s=o.Nk,a=!0,r=[],h=0;h<s.length;h+=1){var l=s[h].Xh;if(l){var d=l.clientWidth,u=l.clientHeight;l.childNodes[0]&&(d=d||l.childNodes[0].clientWidth,u=u||l.childNodes[0].clientHeight),window.opera&&(d=Math.max(d,l.childNodes[0].scrollWidth),u=Math.max(u,l.childNodes[0].scrollHeight)),0===d||0===u?(a=!1,r.push(s[h])):(o.tg=Math.max(o.tg,Math.abs(s[h].get("offset").x)+d),o.ug=Math.max(o.ug,Math.abs(s[h].get("offset").y)+u),s[h].width=d,s[h].height=u)}}a?(o.um=!1,o.Nk=[]):o.Nk=r}if(s=Math.max(o.tg,o.Mk||0)*this.L1,a=Math.max(o.ug,o.Mk||0)*this.L1,a=Math.max(a,o.jh||0),s=Math.max(s,o.jh||0),s=o.Gf([i[0]-s,i[1]-a,i[0]+s,i[1]+a])){for(var c in s)if(s.hasOwnProperty(c)&&(a=s[c],a.get("visible")&&!a.get("noSelect")))if(h=a.ja,h instanceof L.W.Bd){if(this.dh){var r=this.K.Pp,d=r.size.width*this.L1,u=r.size.height*this.L1,p=r.anchor.x*this.L1,f=r.anchor.y*this.L1,d=L.j.Rz([[i[0]-d+p,i[1]-u+f],[i[0]+p,i[1]+f]]);L.j.ge(d,h.Ta)&&n.push(a)}else if("undefined"!=typeof h.get("radius"))r=h.Ta,r=new L.Pixel(r[0],r[1]),new L.Pixel(i[0],i[1]).distance(r)*Math.cos(a.get("center").G*Math.PI/180)<=h.get("radius")&&n.push(a);else if(r=a.get("params"),r.visible){if(h=h.Ta,p=r.Kz%360,l=[i[0],i[1]],p){var d=(i[0]-h[0])/this.L1,u=(i[1]-h[1])/this.L1,f=Math.PI*p/180,p=Math.cos(-f),f=Math.sin(-f),m=d*f+u*p;l[0]=h[0]+(d*p-u*f)*this.L1,l[1]=h[1]+m*this.L1}for(d=a.width*this.L1,u=a.height*this.L1,p=r.offset.x*this.L1,f=r.offset.y*this.L1,d=L.j.Rz([[l[0]-d-p,l[1]-u-f],[l[0]-p,l[1]-f]]),h[0]instanceof Array||(h=[h]),u=h.length-1;u>=0;u-=1)if(L.j.ge(d,h[u])){r.shape?this.oN(a,l,h)&&n.push(a):n.push(a);break}}}else h.ge?h.ge(i)&&n.push(a):h.Qo&&1.8*h.Qo(i)<=a.get("strokeWeight")*this.L1&&n.push(a);this.dh||n.sort(function(t,e){return t.get("isTop")?-1:e.get("isTop")?1:t.get("zIndex")>e.get("zIndex")||t.get("zIndex")===e.get("zIndex")&&t.Uo>e.Uo?-1:1}),e(n,o)}else e([],o)}},oN:function(t,e,i){var n=(e[0]-i[0][0])/this.L1;e=(e[1]-i[0][1])/this.L1,t=t.get("params"),i=t.offset;var o,n=[n-i.x,e-i.y];if(t=t.shape,"circle"===t.F.type){if(e=t.F.coords[0],i=t.F.coords[1],Math.sqrt((n[0]-e)*(n[0]-e)+(n[1]-i)*(n[1]-i))<=t.F.coords[2])return!0}else{if("poly"===t.F.type)return o=t.F.coords,o=this.eL(o),L.wh.ge(n,o);if("rect"===t.F.type)return o=t.F.coords,t=o[0],e=o[1],i=o[2],o=o[3],o=[[t,e],[i,e],[i,o],[t,o]],L.wh.ge(n,o)}return!1},eL:function(t){for(var e=[],i=0;i/2<t.length/2;i+=2)e.push([t[i],t[i+1]]);return e},zt:function(t,e,i,n,o,s,a){var r=["position:absolute;"];r.push("top:"+Math.round(i)+"px;"),r.push("left:"+Math.round(e)+"px;"),r.push("width:"+Math.round(n)+"px;"),r.push("height:"+Math.round(o)+"px;"),1>s&&("opacity"in t.style?(r.push("opacity"),r.push(":"),r.push(s),r.push(";")):8<=document.documentMode?(r.push("-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(opacity="),r.push(Math.ceil(100*s)),r.push(")';")):(r.push("filter:alpha(opacity="),r.push(Math.ceil(100*s)),r.push(");"))),r.push("z-index:"+a+";"),L.d.pD(t,r.join(""))}}),L.P.Ld=L.Class.extend({jb:[L.oa,L.Kc],r:function(t){this.w=t,this.Br={},this.Yj=t.Yj,this.u=t.Ra.S,this.J("display",t),this.J("rotateEnable",t)},yt:function(t,e,i,n){function o(t,n){t.length&&(r[L.g.indexOf(e,n)]=t),h-=1,0>=h&&(i(r),h=0)}for(var s,a=e.length,r=[],h=0,l=[],d=0;a>d;d+=1)s=e[d],s instanceof L.S.Buildings&&s.get("visible")&&(l.push(this.At(s)),h+=1);for(a=0;a<l.length;a+=1)l[a].yt(t,o,n)}}),L.P.canvas.Ld=L.P.Ld.extend({r:function(t){arguments.callee.Sa.apply(this,arguments)},At:function(t){var e=L.g.Vb(t);return this.Br[e]||(this.Br[e]=t.P=t.Yh(this)),this.Br[e]},yd:function(t){this.w.Ra.Sh.style.cssText="";for(var e=t.vb,i=t.va,n=t.size.width,o=t.size.height,s=0;s<e.length;s+=1){var a=e[s],a=this.At(a),r=e[s].ei();if(a)if(!r.visible||r.vc[0]>i.zoom||r.vc[1]<i.zoom)if(a=a.Hf(),a.length)for(r=0;r<a.length;r+=1)a[r].parentNode===this.u&&this.u.removeChild(a[r]);else a.parentNode===this.u&&this.u.removeChild(a);else{a.yd(t,r);var h,l,d=a.Hf(),u=a.transform;if(u&&d){e[s].Ca=d,d.length||(d=[d],u=[u]);for(var c=0;c<d.length;c+=1){h=d[c],l=u[c];var p=l.translate.x,f=l.translate.y;e[s].ep||(p=L.g.Ff(p,2),f=L.g.Ff(f,2));var m=l.scale;1e-5>Math.abs(p)&&(p=0),1e-5>Math.abs(f)&&(f=0);var g=[];g.push("position:absolute"),g.push("z-index:"+(l.xe||e[s].get("zIndex"))),e[s].Ro?(g.push("top:"+Math.floor(o/2+f)+"px"),g.push("left:"+Math.floor(n/2+p)+"px")):h.getContext?(g.push("height:"+Math.floor(h.height*m)+"px"),g.push("width:"+Math.floor(h.width*m)+"px"),g.push("top:"+Math.floor(o/2-f*m)+"px"),g.push("left:"+Math.floor(n/2-p*m)+"px")):(1!==m&&(g.push(L.d.al[L.d.Zc]+"-origin:"+p+"px "+f+"px"),g.push(L.d.al[L.d.Zc]+":scale3d("+m+","+m+",1)")),g.push("top:"+Math.floor(o/2-f)+"px"),g.push("left:"+Math.floor(n/2-p)+"px")),!a.ep&&1!==r.opacity&&"number"==typeof r.opacity&&"opacity"in h.style&&g.push("opacity:"+r.opacity),(h.parentNode!==this.u||L.h.Sd)&&this.u.appendChild(h),L.d.pD(h,g.join(";"))}}else e[s].Hk&&(d.parentNode!==this.u||L.h.Sd)&&(this.u.appendChild(d),e[s].Ca=d)}}t=this.w.Ra.Sh,a=this.w.Ra.S,e=this.w.Ra.ra,L.d.Zc&&"number"==typeof i.rotation&&0!==i.rotation?(t.style[L.d.Zc+"Origin"]=n/2+"px "+o/2+"px",t.style[L.d.Zc]="rotate("+i.rotation+"deg)",t.style.overflow="visible",a.style.overflow="visible",e.style.overflow="visible"):(t.style.cssText="",a.style.cssText="-webkit-transform: translateZ(0);",e.style.cssText=""),this.w.Mp=!1}}),L.P.Eg=L.P.ye.extend({initialize:function(t,e){arguments.callee.Sa.apply(this,arguments),this.J("reload",t,!0),this.tiles=new L.Ov({size:L.h.size,Zu:.7,qt:2,Yu:300});var i=this;this.tiles.e("drop",function(t){i.sG(t.el)}),this.Pb=1,this.LF=50,this.qw=!0,this.K.tiles=this.tiles,this.Qt=new L.Lv(6,null,t.HA),new L.Lv(5,null,t.HA)},reloadChanged:function(){this.K&&(this.K.Ab=!1),this.tiles.clear(),this.reload=!0,this.set("display")},RB:function(t,e){if(!t.Jk||t.Jk.Vg){var i=this;t.loaded=!1,t.Jk=e.QB(t.url,function(e){t.Jk=null,t.loaded=!0,i.tiles.set(t.key,t),e&&i.K&&(t.X=e,t.Jk=null,i.set("display",0),i.Lk+=1,i.K.Ab||i.Lk!==i.ip||(i.K.Ab=!0,i.K.ia("complete")))},!1)}},cE:function(t,e,i,n){var o=[];i=i||18,e=Math.pow(2,e-i);for(var s=0;s<t.length;s+=1){var a=t[s].xyzObject,r=Math.floor(a.x/e),a=Math.floor(a.y/e);n?(r=i+"/"+r+"/"+a,a=this.tiles.get(r)):(a=new L.xyzObject(i,r,a),r=a+"",a=new L.tile(a)),!o[r]&&a&&(o.push(a),o[r]=1)}return o},SB:function(t){for(var e=t.length-1;e>=0;e-=1){var i=t[e];if(i.length)if(this.Hc){var n=i[0].xyzObject.z;n>18&&(i=this.cE(i,n)),this.DD(i,!0);for(var o=0,s=0;o<t.length;)this.HN(i.slice(30*s,30),n),o+=30,s+=1}else for(this.DD(i),this.ip+=i.length,n=i.length-1;n>=0;n-=1)this.RB(i[n],this.Qt)}},Ft:function(t,e){var i=t+"";return(e?this.tiles.Qk(i):this.tiles.get(i))||new L.tile(t.qb(),this.af(t.x,t.y,t.z))},Tm:function(t,e){return this.yb*Math.pow(2,t-e)},sG:function(t){t.Jk&&this.Qt.cL(t.Jk),t.Mu=!1,t.loaded=!1},Xs:function(t,e,i){var n=this.xb,o=t.L1;t=e.Mb.x;var s=e.Mb.y,a=e.kb.x;return e=e.kb.y,this.Sp=new L.Pixel(0,0),n=this.Tm(this.zoom,n)*o,n/=Math.pow(2,this.De),i&&(a=Math.max(i[0],a)-i[0],e=Math.max(i[1],e)-i[1],t=Math.min(i[2],t)-i[0],s=Math.min(i[3],s)-i[1],this.Sp=new L.Pixel(Math.floor(i[0]/n),Math.floor(i[1]/n))),t/=n,s/=n,i={ae:0===t%1?t-1:Math.floor(t),ud:0===s%1?s-1:Math.floor(s),te:Math.floor(a/n),gd:Math.floor(e/n)},i.Nm=i.ae-i.te+1,i.vp=i.ud-i.gd+1,i},DD:function(t,e){if(t.length){
var i=this.fb.divideBy(this.yb*Math.pow(2,this.xb-t[0].xyzObject.z)*this.nb),n=Math.floor(i.x),o=Math.floor(i.y);t.sort(function(t,i){var s=t.xyzObject,a=i.xyzObject,r=s.x-n,s=s.y-o,h=a.x-n,a=a.y-o;return(e?-1:1)*(h*h+a*a-(r*r+s*s))})}},clear:function(){this.Qt.clear()},Du:function(t,e){e.af!==this.af&&(this.af=e.af,this.tiles.clear()),this.clear(),this.Xf=e.Xf,this.Wf=e.Wf,this.yb=e.yb;var i=t.va;this.hd=e.hd||t.va.hd,this.Th=i.Th,this.size=t.size,this.rotation=i.rotation,this.fb=i.fb,this.nb=i.nb,this.De=(this.io=L.h.Y&&e.sa&&!e.wN)?1:0,this.zoom=i.zoom,this.ad=this.xb=i.xb,this.ad+=this.De,this.L1=i.L1,t.scale=Math.pow(2,this.zoom-this.xb);var n;n=this.xb>this.zoom&&t.Ea.kE?t.Ea.kE:t.Ea;var o,s,a,r,h,l,d,u,i=this.Rc=this.Xs(i,n,e.j),c=[],p=[],f=[],m=[],g=[],_=new L.xyzObject(0,0,0),v=this.zoom,m=this.Hg||"",y={},b={};for(this.Uc=1e6*Math.random()<<0,s=m.length-1;s>=0;s-=1)if(o=m[s],!(o.ol<e.opacity))if(_.z=o.xyzObject.z,_.x=o.xyzObject.x,_.y=o.xyzObject.y,_.z===this.ad)y[_+""]|=16;else if(_.z<this.ad){if(y[_+""]|=64,this.Xf)for(u=this.ad-_.z,a=Math.max(i.te,_.x<<u),v=Math.min(i.ae,(_.x+1<<u)-1),r=Math.max(i.gd,_.y<<u),h=Math.min(i.ud,(_.y+1<<u)-1),_.z=this.ad,l=a;v>=l;l+=1)for(_.x=l,d=r;h>=d;d+=1)_.y=d,u=_+"",y[u]|=32,b[u]=b[u]?Math.max(o.xyzObject.z,b[u]):o.xyzObject.z}else if(this.Wf)for(u=1;_.z>=this.ad;){for(y[_+""]|=u,a=_.x>>1,r=_.y>>1,v=a<<1,h=r<<1,o=0,l=2;l>0;l-=1)for(_.x=v+l,d=2;d>0;d-=1)_.y=h+d,5&y[_+""]&&(o+=1);_.z-=1,_.x=a,_.y=r,u=4===o?4:2}for(m=[],_.z=this.ad,l=i.te;l<=i.ae;l+=1)for(_.x=l,d=i.gd;d<=i.ud;d+=1)_.y=d,o=this.Ft(_),u=_+"",a=!1,o.X?t.qc&&this.Hc&&!o.gg?a=!0:(o.Uc=this.Uc,m.push(o),u=y[u],36&u?(o.Pb!==this.Pb||1>o.ol)&&(a=!0):o.Jl=!0):(a=!0,!o.status&&_.z<=e.vc[1]+this.De&&f.push(o)),a&&g.push(o);if(m.hc=this.xb,m.length&&(c.push(m),c["lv"+this.xb]=m),p.push(f),p["lv"+this.xb]=f,this.Wf){for(g=g.slice(0),f=[],s=g.length-1;s>=0;s-=1)o=g[s],4&y[o.key]||f.push(o);for(o=e.vc[1]+this.De,v=this.ad+1;g.length&&o>=v;v+=1){for(m=[],h=g,g=[],_.z=v,s=h.length-1;s>=0;s-=1)if(l=h[s],u=y[l.key],7&u)for(a=l.xyzObject.x<<1,r=l.xyzObject.y<<1,l=2;l>0;l-=1)for(_.x=a+l,d=2;d>0;d-=1){_.y=r+d,u=_+"";var x=this.tiles.Qk(u);5&y[u]&&x&&x.X?(x.Jl=!0,x.Uc=this.Uc,m.push(x)):g.push(new L.tile(_.qb(),""))}m.length&&(m.hc=v-this.De,c.push(m),c["lv"+(v-this.De)]=m,this.Hc&&this.aD(m,c,this.ad-v))}g=f}if(this.Xf)for(l=Math.max(e.vc[0],this.ad-3),d=Math.max(l,this.ad-this.oR),v=this.ad-1;g.length&&v>=l;v-=1){for(r=v>=d,f=[],m=[],x={},h=g,g=[],s=h.length-1;s>=0;s-=1)o=h[s],_.z=v,_.x=o.xyzObject.x>>1,_.y=o.xyzObject.y>>1,o=this.Ft(_,!r),x[o.key]||(x[o.key]=1,a=!1,o.X&&(!this.uR||64&y[o.key])?(_.x=Math.min(i.ae,Math.max(i.te,_.x<<this.ad-v)),_.y=Math.min(i.ud,Math.max(i.gd,_.y<<this.ad-v)),_.z=this.ad,u=_+"","number"==typeof b[u]&&o.xyzObject.z>b[u]?a=!0:(o.Jl=!0,o.Uc=this.Uc,m.push(o))):(a=!0,r&&!o.status&&f.push(o),a&&g.push(o)));m.length&&(c.push(m),m.hc=v-this.De,c["lv"+(v-this.De)]=m,this.Hc&&this.aD(m,c,this.ad-v)),r&&f.length&&(p.push(f),p["lv"+(v-this.De)]=f)}this.Lk=this.ip=0,this.Hc&&!t.dC||this.SB(p,n),this.jv=c,this.K.set("tiles",c)},aD:function(t,e,i){for(var n=0;n<t.length;n+=1)for(var o=t[n].xyzObject,s=o.z+i,a=Math.pow(2,i),r=o.x*a,o=o.y*a,h=0;a>h;h+=1)for(var l=0;a>l;l+=1){var d=this.tiles.get(s+"/"+(r+h)+"/"+(o+l));if(d&&e["lv"+(s-this.De)]){var u=e["lv"+(s-this.De)].indexOf(d);-1!==u&&d.X&&!d.gg&&e["lv"+(s-this.De)].splice(u,1)}}},rT:function(){var t=this.Rc.ae+1,e=this.Rc.ud+1,i=this.Rc.ae-1,n=this.Rc.ud-1,o=new L.xyzObject(0,0,0);o.z=this.ad;for(var s=[],a=i;t>=a;a+=1){o.x=a;for(var r=n;e>=r;r+=1)o.y=r,this.tiles.Qk(void 0)||(i=new L.tile(o.qb(),this.af(o.x,o.y,o.z)),s.push(i))}this.SB([s])}}),L.P.$b.Eg=L.P.Eg.extend({r:function(t,e){arguments.callee.Sa.apply(this,arguments),this.setContainer()},setContainer:function(){this.Ca=document.createElement("div")},Hf:function(){return this.Ca},Dj:function(){if(this.Hg)for(var t=0;t<this.Hg.length;t+=1){var e=this.Hg[t];if(e.X&&this.Uc!==e.Uc&&this.Ca===e.X.parentNode){if(L.h.td&&e.X.vml)for(var i in e.X.vml)e.X.vml.hasOwnProperty(i)&&this.Ca===e.X.vml[i].shape.parentNode&&this.Ca.removeChild(e.X.vml[i].shape);this.Ca.removeChild(e.X)}else{var n=e.xyzObject,o=n.x/Math.pow(2,n.z-this.xb),n=n.y/Math.pow(2,n.z-this.xb);if((Math.ceil(o)<this.Rc.te||Math.floor(o)>this.Rc.ae||Math.ceil(n)<this.Rc.gd||Math.floor(n)>this.Rc.ud)&&e.X&&this.Ca===e.X.parentNode){if(L.h.td&&e.X.vml)for(var s in e.X.vml)e.X.vml.hasOwnProperty(s)&&this.Ca===e.X.vml[s].shape.parentNode&&this.Ca.removeChild(e.X.vml[s].shape);this.Ca.removeChild(e.X),e.zoom=null}}}},yd:function(t,e){if(t.Up||t.kv)this.Jc(t,e,!0);else{this.Du(t,e);var i=!1;(!this.ba||3e4<Math.abs(this.fb.x-this.ba.x)/this.L1||3e4<Math.abs(this.fb.y-this.ba.y)/this.L1)&&(i=!0),(i||this.zoom<<0!==this.zoom||this.Jd!==this.zoom)&&(this.ba=this.fb,this.Jd=this.zoom);var i=!1,n=+new Date,o=e.opacity;"opacity"in this.Ca.style&&(o=1),this.Sf=e.Bo;var s=[],a=this.Pb;this.Pb+=1;var r=this.jv;if(this.Dj(),L.h.td&&"overlayer"===this.K.get("type")&&this.Ca&&t.lf)this.Ca.innerHTML="",this.Hg=[];else{for(var h,l,d=r.length-1;d>=0;d-=1){var u=r[d];if(h=u.hc+this.De,u.length){var c,p=this.Tm(this.zoom,h);for(h=u.length-1;h>=0;h-=1){l=u[h],c=l.xyzObject;var f=o;if((!l.Ln||this.qw&&l.Pb!==a)&&(l.Ln=n),l.Pb=this.Pb,this.Sf&&!l.Jl?(f=Math.max(0,Math.abs(c.z-this.zoom)-1),f=Math.min(o,(n-l.Ln)/(1/Math.pow(1.32,f)*this.LF)),L.h.td&&(f=o),1!==f&&(i=!0)):l.Jl=!1,0!==f&&l.X){if(l.X.parentNode!==this.Ca||l.zoom!==this.zoom||l.ol!==o){var m=new L.Pixel(c.x,c.y).add(this.Sp).multiplyBy(p).subtract(this.ba.divideBy(this.L1)),m=m.round(),g=Math.ceil(p);this.zt(l.X,m.x,m.y,g,g,f,c.z),l.zoom=this.zoom}if(l.X.parentNode!==this.Ca){if(L.h.td&&"overlayer"===this.K.get("type"))try{l.X.style.visibility="hidden",L.g.iepngFix(l.X)}catch(_){}this.Ca.appendChild(l.X)}else L.h.td&&"overlayer"===this.K.get("type")&&(l.X.style.visibility="hidden");s.push(l)}l.ol=f}}}this.Hg=s,i&&this.set("display",0),this.Jc(t,e)}}},Jc:function(t,e){var i=Math.pow(2,t.va.zoom-this.Jd);t.sa&&!e.sa&&(i*=2),this.transform={translate:t.va.fb.subtract(this.ba).divideBy(this.L1),scale:i,rotate:0}}}),window.CanvasRenderingContext2D&&(window.CanvasRenderingContext2D.prototype.at=function(t,e,i,n,o){"undefined"==typeof o&&(o=[10,10]),this.moveTo(t,e);var s=i-t,a=n-e,r=Math.floor(Math.sqrt(s*s+a*a));n=s/r,i=a/r,o.Zt=0;for(var h=[],s=this.Oo,l=0,d=0,u=!1,c=a=0;c<o.length;c+=1)o.Zt+=o[c],h[c]={ht:o[c]*n,it:o[c]*i,$d:a+=o[c]},s-=o[c],0>s&&!u&&(l=c,d=-s,u=!0);for(u=0;r>=d+u;)d<o[l]?(s=d*n,a=d*i):(s=h[l].ht,a=h[l].it),t+=s,e+=a,this.Um?this.moveTo(t,e):this.lineTo(t,e),u+=d,this.Um=!this.Um,d=o[(l+1)%o.length],l=(l+1)%o.length;r-=u,t+=r*n,e+=r*i,this.Um?this.moveTo(t,e):this.lineTo(t,e),this.Oo=(this.Oo+u+r)%o.Zt},window.CanvasRenderingContext2D.prototype.KL=function(t,e,i,n){"undefined"==typeof n&&(n=[10,10]);var o=2*Math.PI*i,s=0>=n?o:Math.round(o/(n[0]+n[1])),a=(n[0]+n[1])/o*2*Math.PI;for(n=n[0]/o*2*Math.PI,o=0;s>o;o+=1)this.beginPath(),this.arc(t,e,i,o*a,o*a+n),this.stroke()}),L.DataParse=L.Class.extend({initialize:function(t){this.yb=256,this.S=t.S},dU:function(){},parseStyle:function(t,e){e=e.split("&"),t.face=L.g.decryptionColor(e[this.QD]),e[this.dv]?(t.border=L.g.decryptionColor(e[this.dv]),t.width=(this.S.sa?2:1)*(parseInt(e[this.LD])||1)):t.border=null},mO:function(t,e,i,n,o,s){return t=i-t,i=o-i,0===t||0===i?t===i?!0:!1:(s-n)/i===(n-e)/t?!0:void 0},formatLnglats:function(t,e,i,n){var o,s=[],a=0,r=0;if(i){a=this.yb*e.x,r=this.yb*e.y,e=e.L1,i=0;for(var h=t.length;h>i;i+=2)n=(a+t[i])*e,o=(r+t[i+1])*e,s.push([n,o]),a+=t[i],r+=t[i+1]}else for(e=(18<e.hc?Math.pow(2,18-e.hc):1)/(this.S.sa?2:1),i=0,h=t.length;h>i;i+=2){for(window.EK+=1;!n&&0!==i&&h-2>i&&this.mO(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3]);)i+=2,window.$L+=1;1===e?s.push([t[i],t[i+1]]):s.push([t[i]/e,t[i+1]/e])}return s},$K:function(t,e,i){var n=0,o=0,s=1;return i&&(n=this.yb*e.x,o=this.yb*e.y,s=e.L1),[(n+t[0])*s,(o+t[1])*s]},parseLngLats:function(t,e,i,n){for(var o=[],s=0,a=t.length;a>s;s+=1){var r=this.formatLnglats(L.g.decryptionLngLats(t[s]),e,i,n);r.length&&(o.push(r),o.Rh=o.Rh?o.Rh+r.Rh:r.Rh)}return o},getParsedDatas:function(t,e,i){var n,o;if("roadlabel"===i.type||"poilabel"===i.type?(o=!0,n=[]):(o=!1,n={}),!e)return n;t.xyzObject.hc=t.hc;for(var s,a,r,h,l=0,d=e.length;d>l;l+=1)if(o){for(a=0;a<e[l][0].length;a+=1)if(h=this.parse(t,e[l][0][a],e[l][1],i))if(18<t.hc){var u=t.hc;r=t.xyzObject,s=Math.pow(2,u-18);var c=Math.floor(h.wd[0]/256*s),p=Math.floor(h.wd[1]/256*s),c=Math.max(0,c),c=Math.min(c,s-1),p=Math.max(0,p),p=Math.min(p,s-1);(u=this.S.tiles.get(u+"/"+(s*r.x+c)+"/"+(s*r.y+p)))&&(u.Ua||(u.Ua=[]),t.Ue&&(u.Ue||(u.Ue={}),L.extend(u.Ue,t.Ue)),h.wd[0]=h.wd[0]*s%256,h.wd[1]=h.wd[1]*s%256,u.Ua.push(h))}else t.Ua.push(h)}else a=e[l][this.Vm],h=this.parse(t,e[l],a,i),s=this.Em?e[l][this.Em]:1,r=n[s]?n[s]:n[s]={},r[a]||(r[a]=[],"road"===i.type?(u=t.hc,s=1,u>18&&(s=Math.pow(2,u-18)),this.parseStyle(r[a],a,s)):this.parseStyle(r[a],a)),r[a].push(h);return n}}),L.region=L.DataParse.extend({initialize:function(){L.DataParse.prototype.initialize.apply(this,arguments),this.fm=0,this.Em=2,this.Vm=1,this.QD=0,this.LD=1,this.dv=2},parse:function(t,e,i){return this.parseLngLats(e[this.fm],t.xyzObject,i.Hc)}}),L.building=L.DataParse.extend({initialize:function(){L.DataParse.prototype.initialize.apply(this,arguments),this.fm=0,this.Vm=1,this.QD=0,this.LD=1,this.dv=2},parse:function(t,e,i){if(t=this.parseLngLats(e[this.fm],t.xyzObject,i.Hc,1),(e=e[4])&&e.length){i=0;for(var n=e.length;n>i;i+=1)for(var o=e[i].split("-"),s=t[parseInt(o[0])],a=1,r=o.length;r>a;a+=1)s[parseInt(o[a])].mC=!0}return t},dK:function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n,o=e[i];for(n in o)if(o.hasOwnProperty(n))for(var s=o[n],a=0,r=s.length;r>a;a++){var h=s[a];h.MF===t.UK&&(h.pK=!0,h[t.MA]&&(h[t.MA].pK=!0))}}},NF:function(t,e,i){for(var n=[],o=0,s=e.length;s>o;o++){var a=e[o].split("-"),a={UK:t,MA:a[0],Ss:a[1]};n.push(a),this.dK(a,i)}return n},getParsedDatas:function(t,e,i){var n=L.DataParse.prototype.getParsedDatas.apply(this,arguments),o=!1;if(e&&e.length){for(var s=[],a=0,r=e.length;r>a;a++){var h=e[a];6<=h.length&&h[5].length&&s.push.apply(s,this.NF(a,h[5],n))}s.length&&(t.Ue||(t.Ue={}),t.Ue.Ts=s,o=!0)}return o&&L.mn&&L.mn.q("vecTileParsed.buildings",{hv:t,data:e,UR:i,Ua:n}),n}}),L.road=L.DataParse.extend({initialize:function(){L.DataParse.prototype.initialize.apply(this,arguments),this.fm=0,this.Vm=1,this.Em=2,this.linear="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" ")},parseStyle:function(a,b,c){var linear=this.linear;b=b.split("&");var f="",g=0,h=0,k="butt",l="",m=0,n=0,q="butt",m=L.g.decryptionColor(b[1]),n=(parseInt(b[0])*c||1)*(this.S.sa?2:1);c=b[2],c===linear[1]?q="round":c===linear[2]?q="square":0!==c.indexOf(linear[5])&&(0===c.indexOf(linear[3])?l=eval("["+c.substring(5).split(")")+"]"):0===c.indexOf(linear[4])&&(g=m,m="white",l=eval("["+c.substring(8).split(")")+"]"),h=n+1+(this.S.sa?1:0),n=n-1-(this.S.sa?1:0))),b[3]&&(g=L.g.decryptionColor(b[4]),h=parseInt(b[3])*(this.S.sa?2:1)+n,b=b[5],b===linear[1]?k="round":b===linear[2]?k="square":0!==b.indexOf(linear[5])&&0===b.indexOf(linear[3])&&(f=eval("["+b.substring(5).split(")")+"]"))),a.strokeColor=m,a.strokeWeight=n,a.lineCap=q,a.wP=l,a.outlineStrokeColor=g,a.outlineStrokeWeight=h,a.outlineLineCap=k,a.PK=f},parse:function(t,e,i){return i=this.parseLngLats(e[this.fm],t.xyzObject,i.Hc),(!t.S||e[this.Em]>t.S)&&(t.S=e[this.Em],t.Rh=0),t.Rh=Math.max(t.Rh,i.Rh),i}}),L.LabelDataParse=L.DataParse.extend({initialize:function(t){L.DataParse.prototype.initialize.apply(this,arguments),this.sd=[],this.WA="http://"+t.dataUrl+"/icons/"+(L.h.Y||L.h.sa?"b":"n"),this.RK=L.h.Y?15:7,this.Yt=L.h.sa?320:256},parse:function(t,e,i,n){var o=this.S.sa,s=this.S.VD,a=e[this.cC];i=i.split("&");var r,h="Microsoft YaHei",l=parseInt(i[this.ND]),d=L.g.decryptionColor(i[this.MD]),u=400,c=L.g.decryptionLngLats(e[this.RC]);if(!(255<c[0]||0>c[0]||255<c[1]||0>c[1])){o&&(l*=s);var p={Ta:this.$K(c,t.xyzObject,n.Hc)};p.wd=c,p.sd=[],p.vg=[],i[this.cv]&&(r=L.g.decryptionColor(i[this.cv]));var f,m;if("roadlabel"===n.type)n=!1,p.uN=!0,(i=i[this.Of])&&e[this.ym]&&(p.sd.push(this.WA+(10>t.xyzObject.z?"39":"18")+"/1/"+i+".png"),d="152"===i?"black":"white",r=null,u=e[this.ym],o&&(u[0]*=s,u[1]*=s,u[2]*=s,u[3]*=s),p.vg.push(u),u=400,h="Arial Narrow,Arial",n=!0),n&&(L.h.Y?(f=47,m=15):(f=22,m=13),o&&(f*=s,m*=s)),l=Math.round(l),u=this.hB(t,a.replace(" ",""),h,l,d,r,u,f),p.sd.push(u),1<a.length||n?(t=Math.ceil(u.gi/2),o=u.gi,f&&(o=Math.min(f,o),t=Math.min(Math.floor(f/2)-1,t)),u.pm===l&&(m=l),p.vg.push([-t,-Math.ceil(m/2),o,u.pm,u.ru,u.su,u.gi,u.pm])):(l=u.pm+2,t=-u.pm/2,p.vg.push([-u.gi/2,t,l,l,u.ru,u.su,u.fn,u.wm])),p.Ou=e[this.Gs]?5>e[this.Gs]?0:e[this.Gs]:0,1<a.length&&p.sd[0].indexOf&&p.sd[0].indexOf("png")>-1&&(p._sd={},p._sd[p.sd[0]]=[u,p.vg[p.vg.length-1]]);else{if(p.name=a.replace("^",""),a=a.split("^"),m=e[this.eQ],i[this.Of]&&e[this.ym]&&(p.rN=!0,p.sd.push(this.WA+(10>t.xyzObject.z?"39":"18")+"/1/"+i[this.Of]+".png"),u=e[this.ym],"334"===i[this.Of]&&o&&(u[0]=u[1]=-7,u[3]=u[2]=15),"445"===i[this.Of]&&o&&(u[0]=-3,u[1]=-6,u[3]=13,u[2]=6),"301"===i[this.Of]&&o&&(u[1]=u[0],u[3]=u[2]),o&&(u[0]*=s,u[1]*=s,u[2]*=s,u[3]*=s),p.vg.push(u)),0<m.length)for(n=0;n<m.length;n+=1){var u=_n=a[n],c=m[n][0],g=m[n][1]+n;("375"===i[this.Of]||"3751"===i[this.Of])&&(l=12,g=-5,f=15,o&&(l*=s,f*=s)),l=Math.round(l),u=this.hB(t,u,h,l,d,r,null,f,i[this.OD]),o&&(c*=s,g*=s,m[n][2]*=s,m[n][3]*=s),("375"===i[this.Of]||"3751"===i[this.Of])&&(c=-Math.min(u.gi/2,f/2)),p.sd.push(u),g-=L.h.Y?3:1,p.vg.push([c,g,i[this.OD]?u.gi:Math.min(m[n][2],u.gi),u.wm,u.ru,u.su,u.gi,u.wm])}1==m.length&&p.sd[0].indexOf&&p.sd[0].indexOf("png")>-1&&(p.__sd={},p.__sd[p.sd[0]]=[u,p.vg[p.vg.length-1]]),e[4]&&(p.MC=e[4])}return p}},YR:function(){return document.createElement("img")},$M:function(t){return Math.min(Math.max(100*(t-this.RK),400),800)},hB:function(t,e,i,n,o,s,a,r,h){var l=t.xN;l||(l=L.d.create("canvas"),t.xN=l,l.width=l.height=this.Yt,l.DC=l.EC=0,l.he=l.getContext("2d"),l.he.lineWidth=2);var d=l.he;a=a||this.$M(n),t=this.S.sa?this.S.VD:1;var u=h?2*t:0,c=(n+2)*e.length+2,p=n+5*t,f=l.DC,m=l.EC;return f+c>this.Yt&&(f=0,m+=l.maxHeight,m>this.Yt&&(l.maxHeight=0)),l.maxHeight=Math.max(l.maxHeight||0,p),d.font=a+" "+n+"px "+i,n=parseInt(d.font),(n>100||!n)&&(n=parseInt(d.font.split(" ")[1])),i=n*e.length,s&&(d.strokeStyle!==s&&(d.strokeStyle=s),d.strokeText(e,f+u,m+n,r||i)),s=d.measureText(e).width,h&&(h=L.g.decryptionColor(h),d.fillStyle!==h&&(d.fillStyle=h),d.fillRect(f,m,s+4*t,n+4*t+L.h.Y)),d.fillStyle!==o&&(d.fillStyle=o),d.fillText(e,f+u,m+n,r||i),l.DC=f+c,l.EC=m,e=l,e.gi=h?s+4*t:s,e.pm=n,e.fn=c,e.wm=p,e.ru=f,e.su=m,e}}),L.poilabel=L.LabelDataParse.extend({initialize:function(){L.LabelDataParse.prototype.initialize.apply(this,arguments),this.cC=0,this.RC=1,this.eQ=2,this.Vm=1,this.ym=3,this.Of=0,this.ND=1,this.MD=2,this.cv=3,this.OD=4},parse:function(t,e,i,n){var o=L.LabelDataParse.prototype.parse.apply(this,arguments);return o&&5<e.length&&1===e[5]&&(o.nH=!0),o}}),L.roadlabel=L.LabelDataParse.extend({initialize:function(){L.LabelDataParse.prototype.initialize.apply(this,arguments),this.cC=0,this.RC=1,this.Gs=2,this.ym=this.Vm=3,this.Of=0,this.ND=1,this.MD=2,this.cv=3}}),L.P.canvas.pf=L.P.Eg.extend({initialize:function(t,e){arguments.callee.Sa.apply(this,arguments),this.Hc=!0,this.Ci=[];var i=this;this.On=function(){i.VN=!0,i.set("display",0)},this.setContainer(),t.w.Fb.Xt&&this.GF(t,e)},EM:function(t){var e=256*this.nb,i=this.xb,n=t.wd.x/e,o=n%1*256,n=Math.floor(n);t=t.wd.y/e,e=t%1*256,t=Math.floor(t);var s=n-1,a=n+1,r=t-1,h=t+1;for(128>o?a=n:s=n,128>e?h=t:r=t;a>=s;s+=1)for(var l=r;h>=l;l+=1){var d=this.tiles.get(i+"/"+s+"/"+l);if(d&&d.Ua)for(var u=d.Ua.length-1;u>=0;u-=1)if(d.Ua[u].MC&&d.Ua[u].rN&&this.nN(d.Ua[u],o,e,s-n,l-t))return d.Ua[u]}return null},nN:function(t,e,i,n,o){n=t.wd[0]+256*n,o=t.wd[1]+256*o;for(var s=0;s<t.sd.length;s+=1){var a=t.vg[s][2],r=t.vg[s][3],h=t.vg[s][0],l=t.vg[s][1];if(this.K.sa&&(a/=this.K.hf,r/=this.K.hf,h/=this.K.hf,l/=this.K.hf),e>=n+h-1&&n+h+a+1>=e&&i>=o+l-1&&o+l+r+1>=i)return!0}return!1},reloadChanged:function(){this.K&&(this.K.Ab=!1,L.jd.TA=null),this.tiles.clear(),this.Ca&&this.Ca.parentNode&&this.Ca.parentNode.removeChild(this.Ca),this.Ti&&this.Ti.parentNode&&this.Ti.parentNode.removeChild(this.Ti),this.set("display")},Hf:function(){return[this.Ca,this.Ti]},wT:function(t){for(var e=0;e<this.Ci.length;e+=1)this.Ci[e].hc&&!t["lv"+this.Ci[e].hc]&&(this.Ci[e].QS=!1,this.Ci[e].width=0,this.Ci[e].height=0,this.WS[this.Ci[e].hc]=null)}}),L.P.canvas.pf.include({GF:function(t){this.fe={},this.webSocket=new L.WebSocket,this.webSocket.e("tiles",this.gO,this),this.webSocket.e("ack",this.fO,this),this.webSocket.e("disable",this.dO,this),this.J("mapStyle",t,!0)},Ew:function(){this.webSocket&&(this.webSocket.close(),this.webSocket.tk(),this.webSocket=null)},bA:function(){if(this.webSocket&&"unsupport"!==this.webSocket.zb){var t={command:"status",payload:{mapType:this.get("mapStyle"),style:5}};this.webSocket.send(t)}},mapStyleChanged:function(){this.bA()},dO:function(){for(var t in this.fe)this.fe.hasOwnProperty(t)&&(this.wl(this.fe[t].iv,this.fe[t].hc),delete this.fe[t]);this.webSocket=null,this.Lj("mapStyle"),this.set("display",1)},fO:function(t){var e=t.reqId;this.fe[e]&&(!t.content.status&&this.fe[e]&&this.wl(this.fe[e].iv,this.fe[e].hc),delete this.fe[e])},gO:function(t){var e=t.content.opt;if(e===this.xb){t=t.content.data;for(var i=0,n=t.length;n>i;i+=1)this.parseTileData(t[i],e)}else this.fe[t.reqId]&&this.wl(this.fe[t.reqId].iv,this.fe[t.reqId].hc)},HN:function(t,e){if(t.length){var i=1,n=[];e>18&&(i=Math.pow(2,e-18));for(var o=this.K.aj.If(t[0].xyzObject.z),s=0;s<t.length;s+=1){var a=t[s],r=a.xyzObject;if(a.hc=e,r.L1=o,e>18){for(var h=0;i>h;h+=1)for(var l=0;i>l;l+=1){var d=new L.tile(new L.xyzObject(e,i*r.x+h,i*r.y+l));this.tiles.ac(d.key)||(this.tiles.set(d.key,d),d.status="loading")}this.tiles.set(a.key+"/"+e,a)}else if(this.tiles.set(a.key,a),a.status="loading",10>e){var u,c,h=r.x,l=r.y,d=r.z;c=Math.ceil(this.Rc.Nm/2);var p=Math.pow(2,d);h>=p&&p+c>=h?(h-=p,u=!0):0>h&&h>=-c&&(h+=p,u=!0),u&&(u=d+"/"+h+"/"+l,(c=this.tiles.get(u))?(a.status=c.status,a.X=c.X,a.gg=c.gg):(c=new L.tile(new L.xyzObject(d,h,l)),this.tiles.set(u,c),c.status="loading"),c.pb=a,a.pb=c)}"loaded"===a.status?this.set("display"):n.push(L.g.kt(r.x,r.y,r.z).join(","))}n.length&&(this.webSocket&&"unsupport"!==this.webSocket.zb?(0===this.webSocket.count?this.loadTile(t,e,n):(1!==this.webSocket.count&&"connected"===this.webSocket.zb||this.bA(),this.GN(t,e,n)),this.webSocket.count+=1,this.webSocket.MB&&this.webSocket.Lu.push(Math.ceil((new Date-this.webSocket.MB)/1e3)),this.webSocket.MB=new Date):this.loadTile(t,e,n))}},GN:function(t,e,i){var n=(new Date).getTime()+"-"+(this.webSocket.count+1&65535);this.webSocket.send({command:"tiles",reqId:n,payload:{t:i,opt:e,cs:{level:e}}}),this.fe[n]={iv:t,hc:e}},uC:function(t){t.Ab||(t.status="",t.Ab=void 0,t.X=null,t.Dc=null,t.pb&&(t.pb.pb=null,t.pb=null),this.tiles.cl(t.key))},parseTileData:function(t,e){if(this.K){var i=t[0].split("-"),n=i[3],i=i.splice(0,3).join("/"),o=e>18?Math.pow(2,e-18):1;e>18&&(i+="/"+e);var s=this.tiles.get(i);s&&"loaded"!==s.status&&(this.XD(s,o)||s.pb&&this.XD(s.pb,o))&&("poilabel"===n&&(s.status="loaded",s.pb&&(s.pb.status="loaded")),this.K.aE(t,s,e,n))}},wl:function(t,e,i){i||(i=e>18?Math.pow(2,e-18):1);for(var n=0;n<t.length;n+=1){var o=t[n];this.tD(e,o,i,L.g.bind(this.uC,this)),e>18&&this.tiles.cl(o.key+"/"+e)}},loadTile:function(t,e,i){function n(t){if(e!==a.xb);else{var i=t.indexOf("|");if(-1==i)r+=t;else{r+=t.substring(0,i);var o=JSON.parse(r);o["x-vd-v"]||a.parseTileData(o,e),r="",n(t.substring(i+1))}}}var o=new XMLHttpRequest;i=this.K.url+i.join(";")+"&lv="+e;var s=0,a=this,r="";o.sT="";var h=e>18?Math.pow(2,e-18):1;o.onreadystatechange=function(){a.K&&(3===o.readyState?o.wG||(n(o.responseText.substring(s)),s=o.responseText.length,o.hG=!0):4===o.readyState&&o.startTime&&(a.K.aE("first"),o.hG||a.wl(t,e,h)))},this.bN||(this.bN=1,L.jd.TA=o.startTime=new Date),o.open("GET",i,!0),o.send()},XD:function(t,e){var i=t.xyzObject.x,n=t.xyzObject.y;return i>Math.floor(this.Rc.ae/e)||i<Math.floor(this.Rc.te/e)||n>Math.floor(this.Rc.ud/e)||n<Math.floor(this.Rc.gd/e)?!1:!0},tD:function(t,e,i,n){if(t>18){e=e.xyzObject;for(var o=0;i>o;o+=1)for(var s=0;i>s;s+=1){var a=new L.xyzObject(t,i*e.x+o,i*e.y+s)+"";(a=this.tiles.get(a))&&n(a)}}else n(e),e.pb&&n(e.pb)}}),L.P.canvas.pf.include({setContainer:function(){this.Ca=document.createElement("div"),this.Ti=document.createElement("canvas"),this.La=new L.P.canvas.pf.Buildings(this.Ti,this.On),this.Xo=document.createDocumentFragment()},YO:function(t){var e=Math.pow(2,t.va.zoom-this.xb),i=this.K.sa?2:1,n=t.va.fb.subtract(this.gp).divideBy(this.nb);this.transform=[{translate:this.transform[0].translate.add(n),scale:e,rotate:0},{translate:this.transform[1].translate.add(n.multiplyBy(i)),scale:e/i,rotate:0,xe:1}],this.fb=t.va.fb},XO:function(t,e){var i=Math.pow(2,t.va.zoom-this.Jd);if(i>=8)this.cD(t,e);else{var n=t.va.fb.subtract(this.gp).divideBy(this.xg);this.transform[0]={translate:this.transform[0].translate.add(n),scale:i,rotate:0},i=this.Rc,this.Bp(t,256*i.Nm,256*i.vp),i=new L.Pixel(t.Ea.mb.x*(this.K.sa?this.K.hf:1),t.Ea.mb.y*(this.K.sa?this.K.hf:1)),this.transform[2]={translate:i,scale:1/(this.K.sa?this.K.hf:1),rotate:0,xe:this.K.get("textIndex")},this.fb=t.va.fb}},cD:function(t,e){(!this.ba||3e4<Math.abs(this.fb.x-this.ba.x)/this.L1||3e4<Math.abs(this.fb.y-this.ba.y)/this.L1)&&(this.ba=this.fb),this.Jd=this.xb,this.xg=this.nb,this.Iu=!1,this.currentTime=+new Date,this.wQ=e.wQ;var i=this.Rc;this.Eb=[256*i.te*this.nb,256*i.gd*this.nb],this.Sf=e.Bo;var n=this.jv,o=256*i.Nm,i=256*i.vp;this.lf=this.zoom<<0!==this.zoom;var s=this.fb.subtract(this.ba);s.x<-L.g.Wa/2&&(s.x+=L.g.Wa),s.x>L.g.Wa/2&&(s.x-=L.g.Wa),this.dL=s.divideBy(this.nb),this.nP(n,o,i,e),this.Bp(t,o,i),this.VN=!1,this.Iu&&this.set("display",0),this.Jc(t)},yd:function(t,e){this.Du(t,e),this.gp&&(t.kv||t.Up&&L.h.Sd||t.iu&&t.SK)?this.YO(t,e):this.gp&&t.lf?this.XO(t,e):this.cD(t,e),this.gp=this.fb},Dj:function(){for(var t=Array.prototype.slice.call(this.Ca.childNodes,0),e=t.length-1;e>=0;e-=1)t[e]&&t[e].Pb!==this.Pb&&this.Ca.removeChild(t[e])},nP:function(t){var e=this.Pb;this.Pb+=1;var i,n,o,s=!1,a=!1,r=[];for(this.ba.x-this.fb.x<-L.g.Wa/2?this.ba=new L.Pixel(this.ba.x+L.g.Wa,this.ba.y):this.ba.x-this.fb.x>L.g.Wa/2&&(this.ba=new L.Pixel(this.ba.x-L.g.Wa,this.ba.y)),i=t.length-1;i>=0;i-=1)if(o=t[i],n=o.hc,o.length){var a=!1,h=n-this.xb;(1>=h&&!r.ak||r.ak&&r.ak.dt>h)&&(r.ak=[],r.ak.dt=Math.abs(h),a=!0);for(var l=this.Tm(this.xb,n),d=o.length-1;d>=0;d-=1){if(h=o[d],a&&r.ak.push(h),!h.pb&&this.ba===h.ba&&h.Jd===this.Jd){var u=h.Dc;if(u&&u.parentNode===this.Ca){r.push(h),u.Pb=this.Pb,h.Pb=this.Pb;continue}}h.ba=this.ba,h.Jd=this.Jd,n=h.xyzObject;var s=!0,u=new L.Pixel(n.x*l*this.nb,n.y*l*this.nb),c=u.subtract(this.fb);c.x<-L.g.Wa/2?u.x+=L.g.Wa:c.x>L.g.Wa/2&&(u.x-=L.g.Wa),c=u.subtract(this.ba),c=c.divideBy(this.nb),c.x=Math.floor(c.x),c.y=Math.floor(c.y),(!h.Ln||this.qw&&h.Pb!==e)&&(h.Ln=this.currentTime),h.Jl=!1,h.X?(h.Pb=this.Pb,u=h.Dc,!u&&h.pb&&h.pb.Dc&&(u=h.pb.Dc),u&&(h.ol=1,this.zt(u,c.x,c.y,l,l,1,n.z),u.parentNode!==this.Ca&&this.Ca.appendChild(u),u.Pb=this.Pb,h.xb=this.xb,r.push(h))):h.Uc=null}a=!0}return this.Hg=r,this.Dj(),s||!a},Bp:function(t){var e=this.Ti,i=this.La;i.lf=this.lf;var n=this.K.sa?this.K.hf:1;if(0!==t.va.rotation?L.d.Rm(e,2*Math.floor(t.Ea.mb.x)*n,2*Math.floor(t.Ea.mb.y)*n,!0):L.d.Rm(e,t.size.width*n,t.size.height*n,!0),i.Eb=[t.Ea.kb.x,t.Ea.kb.y],this.La.nb=this.L1*(this.K.sa?1/this.K.hf:1),(e=this.Hg.ak)&&e.length&&!(.5<e[0].xyzObject.z-this.zoom))for(i=e.length-1;i>=0;i-=1){var n=e[i].Ua,o=!1;!n&&e[i].pb&&e[i].pb.Ua&&(n=e[i].pb.Ua,o=!0),this.La.Bp(n||{},o,t.lf||e[0].xyzObject.z!==this.zoom,L.Qe&&L.Qe.FB(this.w.Fb))}},Jc:function(t){var e=Math.pow(2,this.zoom-this.xb),i=this.fb.subtract(this.ba);i.x<-L.g.Wa/2&&(i.x+=L.g.Wa),i.x>L.g.Wa/2&&(i.x-=L.g.Wa),i.divideBy(this.nb),t=new L.Pixel(t.Ea.mb.x*(this.K.sa?this.K.hf:1),t.Ea.mb.y*(this.K.sa?this.K.hf:1)),this.transform=[{translate:this.dL,scale:e,rotate:0},{translate:t,scale:1/(this.K.sa?this.K.hf:1),rotate:0,xe:this.K.get("textIndex")}]}}),L.P.canvas.pf.Buildings=L.Class.extend({initialize:function(t,e){this.tb=t,this.sd={},this.Jg=e},dD:function(t,e,i,n,o){i=[];for(var s in t)t.hasOwnProperty(s)&&(t[s].gn=parseInt(s),i.push(t[s]));i.sort(function(t,e){return t.gn>e.gn?1:-1});for(s in i)if(i.hasOwnProperty(s)){t=i[s];for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this.Ku(n,n.face,n.border,n.width,e,o))}},Ku:function(t,e,i,n,o){var s,a,r,h,l,d,u,c=this.tb.getContext("2d"),p=[NaN,NaN,0],f=[NaN,NaN];for(c.save(),i&&n&&(c.strokeStyle=i,c.lineWidth=n),e&&(c.fillStyle=e),this.fl={},c.beginPath(),s=0,a=t.length;a>s;s+=1)if(r=t[s],h=r.length,h>0)for(var m=0;h>m;m+=1)for(l=r[m],d=0,u=l.length;u>d;d+=1)p=l[d],0===d?(f=p,c.moveTo(p[0],p[1])):(p[0]!==f[0]||p[1]!==f[1])&&(c.lineTo(p[0],p[1]),f=p);if(e&&c.fill(),o)for(c.beginPath(),s=0,a=t.length;a>s;s+=1)if(r=t[s],h=r.length,h>0)for(m=0;h>m;m+=1)for(l=r[m],d=0,u=l.length;u>d;d+=1)p=l[d],0===d?(f=p,c.moveTo(p[0],p[1])):(p[0]!==f[0]||p[1]!==f[1])&&(f.mC?(c.moveTo(p[0],p[1]),p.mC&&c.lineTo(p[0],p[1])):c.lineTo(p[0],p[1]),f=p);return i&&n&&c.stroke(),c.restore(),!0},Zo:function(t){if("IMG"===t.tagName||"CANVAS"===t.tagName)return t;var e=this.sd[t];return"undefined"==typeof e?(e=document.createElement("img"),e.src=t,this.sd[t]=e,e.loaded=!1,L.l.mh(e,"load",this.Mt,this),null):e.loaded?e:void 0},Mt:function(t){t.target.loaded=!0,this.Jg&&this.Jg()},Gb:function(t,e){return this.lf?[(t-this.Eb[0])/this.nb,(e-this.Eb[1])/this.nb]:[.5+(t-this.Eb[0])/this.nb<<0,.5+(e-this.Eb[1])/this.nb<<0]},oP:function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&(t[e].gn=parseInt(e),i.push(t[e]));i.sort(function(t,e){return t.gn>e.gn?1:-1});for(e in i)if(i.hasOwnProperty(e)){t=i[e];var n,o;for(n in t)t.hasOwnProperty(n)&&(o=t[n],o.outlineStrokeColor&&this.drawLIneORPolygon(o,o.outlineStrokeColor,o.outlineStrokeWeight,o.outlineLineCap,o.PK));for(n in t)t.hasOwnProperty(n)&&(o=t[n],o.strokeColor&&this.drawLIneORPolygon(o,o.strokeColor,o.strokeWeight,o.lineCap,o.wP))}},drawLIneORPolygon:function(t,e,i,n,o){var s=this.tb.getContext("2d");return s.save(),s.lineWidth=i,s.strokeStyle=e,s.lineCap=n,s.lineJoin="bevel",s.setLineDash?(this.setLinePath(s,t),o&&(s.setLineDash(o),s.lineDashOffset=o[0])):o&&1<o.length?this.setPolygonPath(s,t,o):this.setLinePath(s,t),s.stroke(),s.restore(),!0},setLinePath:function(t,e){t.beginPath();var i,n,o,s,a,r,h,l,d,u;for(i=0,a=e.length;a>i;i+=1)for(r=e[i],n=0,h=r.length;h>n;n+=1)for(d=r[n],o=0,l=d.length;l>o;o+=1)s=d[o],0===o?(t.moveTo(s[0],s[1]),u=s):(s[0]!==u[0]||s[1]!==u[1])&&(t.lineTo(s[0],s[1]),u=s)},setPolygonPath:function(t,e,i){t.beginPath();var n,o,s,a,r,h,l,d,u,c;for(n=0,r=e.length;r>n;n+=1)for(h=e[n],t.Oo=i[0]+i[1],t.Um=!1,o=0,l=h.length;l>o;o+=1)for(u=h[o],s=0,d=u.length;d>s;s+=1)a=u[s],0===s?(t.moveTo(a[0],a[1]),c=a):(a[0]!==c[0]||a[1]!==c[1])&&(t.at(c[0],c[1],a[0],a[1],i),c=a);t.closePath()}}),L.P.canvas.pf.Buildings.include({Bp:function(t,e,i,n){for(var o=0,s=t.length;s>o;o+=1)if(!(i&&t[o].uN||n&&t[o].nH)){var a=t[o].Ta,r=a[0];e&&(r>I.g.Wa/2?r-=I.g.Wa:r<I.g.Wa/2&&(r+=I.g.Wa));for(var a=this.Gb(r,a[1]),r=0,h=t[o].sd.length;h>r;r+=1)this.dP(a,t[o].sd[r],t[o].vg[r],t[o].Ou,t[o]._sd||t[o].__sd)}},dP:function(t,e,i,n,o){var s=this.tb.getContext("2d");if(this.__isExtract){if(e&&e.indexOf&&e.indexOf("png")>-1){var a,r=this;o?r.__loadedImg__[e]?(r._dP(t,r.__loadedImg__[e].cloneNode(),i,n,s),r._dP(t,o[e][0],o[e][1],n,s)):(a=document.createElement("img"),a.src=e,a.onload=function(){r._dP(t,a,i,n,s),r._dP(t,o[e][0],o[e][1],n,s),r.__loadedImg__[e]=a.cloneNode(),a.onload=null}):r.__loadedImg__[e]?r._dP(t,r.__loadedImg__[e],i,n,s):(a=document.createElement("img"),a.src=e,a.onload=function(){r.__loadedImg__[e]=a,r._dP(t,a,i,n,s),a.onload=null})}else if(!o){if(e=this._Zo(e),!e)return 1;this._dP(t,e,i,n,s)}}else{if(e=this.Zo(e),!e)return 1;this._dP(t,e,i,n,s)}},_dP:function(t,e,i,n,o){var s=i[2],a=i[3],r=i[0],h=i[1];if(n=(n||0)%360*-Math.PI/180,0!==n){var l=Math.cos(n),d=Math.sin(n),u=t[0],c=t[1];o.transform(l,d,-d,l,(1-l)*u+d*c,(1-l)*c-d*u)}4===i.length?o.drawImage(e,t[0]+r,t[1]+h,s,a):o.drawImage(e,i[4],i[5],i[6],i[7],t[0]+r,t[1]+h,s,a),0!==n&&o.setTransform(1,0,0,1,0,0)},_Zo:function(t){if("IMG"===t.tagName||"CANVAS"===t.tagName)return t;var e=this.sd[t];return"undefined"==typeof e?(e=document.createElement("img"),e.src=t,this.sd[t]=e,e.loaded=!1,I.l.mh(e,"load",this.Mt,this),null):e.loaded?e:void 0}}),L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=L.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=L.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&L.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===L.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+L.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return L.extend(this.wmsParams,t),e||this.redraw(),this}}),L.tileLayer.wms=function(t,e){return new L.TileLayer.WMS(t,e)},L.Util.extend(L.TileLayer.WMS.prototype,{defaultWmsParams:L.Util.extend(L.TileLayer.WMS.prototype.defaultWmsParams,{version:"1.1.0",format:"image/png",layers:"default",transparent:!0}),getTileUrl:function(t,e,i,n){var o=this._tileCoordsToBounds(n),s=this._crs.project(o.getNorthWest()),a=this._crs.project(o.getSouthEast()),r=[s.x,a.y,a.x,s.y].join(","),h=L.TileLayer.prototype.getTileUrl.call(this,t,e,i,n);return h+L.Util.getParamString(this.wmsParams,h,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r}}),L.TileLayer.WMTS=L.TileLayer.extend({defaultWmsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"default",format:"image/jpeg",uppercase:!1,style:"normal",tilematrixSet:"",mid:"",p:0,scale:1},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=L.extend({},this.defaultWmsParams);for(var n in e)n in i&&(i[n]=e[n]);e=L.setOptions(this,e),window.devicePixelRatio&&window.devicePixelRatio>1&&(i.scale=2),i.width=i.height=e.tileSize*(e.detectRetina&&L.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e,i,n){var o=L.TileLayer.prototype.getTileUrl.call(this,t,e,i,n);if(this.options.uppercase)var s="&TILECOL="+t+"&TILEROW="+(this.options.tms?this._globalTileRange.max.y-e:String(e))+"&TILEMATRIX="+String(i);else var s="&tilecol="+t+"&tilerow="+(this.options.tms?this._globalTileRange.max.y-e:String(e))+"&tilematrix="+String(i);return o+L.Util.getParamString(this.wmsParams,o,this.options.uppercase)+s},setParams:function(t,e){return L.extend(this.wmsParams,t),e||this.redraw(),this}}),L.tileLayer.wmts=function(t,e){return new L.TileLayer.WMTS(t,e)},L.TileLayer.WMTS.LONLAT=L.TileLayer.extend({defaultWmsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixSet:"",format:"image/jpeg"},initialize:function(t,e){this._url=t;var i=L.extend({},this.defaultWmsParams);for(var n in e)n in i&&(i[n]=e[n]);
e=L.setOptions(this,e),window.devicePixelRatio&&window.devicePixelRatio>1&&(i.scale=2),i.width=i.height=e.tileSize*(e.detectRetina&&L.Browser.retina?2:1),this.wmtsParams=i,this.matrixIds=e.matrixIds||this.getDefaultMatrix(),L.setOptions(this,e)},onAdd:function(t){L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e,i,n){var o=this._map;crs=o.options.crs,tileSize=this.options.tileSize,nwPoint=n.multiplyBy(tileSize),nwPoint.x+=1,nwPoint.y-=1,sePoint=nwPoint.add(new L.Point(tileSize,tileSize)),nw=crs.project(o.unproject(nwPoint,i)),se=crs.project(o.unproject(sePoint,i)),tilewidth=se.x-nw.x,ident=this.matrixIds[i].identifier,X0=this.matrixIds[i].topLeftCorner.lng,Y0=this.matrixIds[i].topLeftCorner.lat,tilecol=Math.floor((nw.x-X0)/tilewidth),tilerow=-Math.floor((nw.y-Y0)/tilewidth);var s=L.TileLayer.prototype.getTileUrl.call(this,t,e,i,n);return s+L.Util.getParamString(this.wmtsParams,s)+"&tilematrix="+ident+"&tilerow="+tilerow+"&tilecol="+tilecol},setParams:function(t,e){return L.extend(this.wmtsParams,t),e||this.redraw(),this},getDefaultMatrix:function(){for(var t=new Array(22),e=0;22>e;e++)t[e]={identifier:""+e,topLeftCorner:new L.LatLng(90,-180)};return t}}),L.tileLayer.wmts=function(t,e){return new L.TileLayer.WMTS(t,e)},L.tileLayer.wmts.lonlat=function(t,e){return new L.TileLayer.WMTS.LONLAT(t,e)},L.ImageOverlay=L.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=L.latLngBounds(e),L.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(L.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){L.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=L.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=L.Util.falseFn,t.onmousemove=L.Util.falseFn,t.onload=L.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;L.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new L.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();L.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){L.DomUtil.setOpacity(this._image,this.options.opacity)}}),L.imageOverlay=function(t,e,i){return new L.ImageOverlay(t,e,i)},L.Icon=L.Class.extend({initialize:function(t){L.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=L.point(n),s=L.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return L.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),L.icon=function(t){return new L.Icon(t)},L.VectorIcon={},L.VectorIcon.version="1.0.0",L.VectorIcon.MAP_POINT_PIN="M16,1 C7.7146,1 1,7.65636364 1,15.8648485 C1,24.0760606 16,51 16,51 C16,51 31,24.0760606 31,15.8648485 C31,7.65636364 24.2815,1 16,1 L16,1 Z",L.VectorIcon.Icon=L.Icon.extend({options:{iconSize:[0,0],anchor:[15,50],offset:[0,0],popupAnchor:[0,-50],shadowAnchor:[7,45],shadowSize:[54,51],className:"vector-marker",prefix:"fa",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white",type:1,width:0,height:0},initialize:function(t){return t=L.Util.setOptions(this,t)},createIcon:function(t){var e,i,n,o,s,a="";e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options,i.icon&&(a=this._createInner()),o="filter:alpha(opacity="+10*i.alpha+");opacity:"+i.alpha,n=L.VectorIcon.MAP_POINT_PIN;var r=i.iconSize[0]+Number(i.strokewidth),h=i.iconSize[1]+Number(i.strokewidth);return 1==i.type?(r=32,h=52,s='<path d="'+n+'" fill="'+i.markerColor+'" stroke="'+i.strokecolor+'" stroke-width="'+i.strokewidth+'" style="'+o+'"></path>'):2==i.type?s='<rect x="'+Math.floor(i.strokewidth)+'" y="'+i.strokewidth+'" width="'+Math.floor(i.iconSize[0]-i.strokewidth)+'" height="'+Math.floor(i.iconSize[1]-i.strokewidth)+'" fill="'+i.markerColor+'" stroke="'+i.strokecolor+'" stroke-width="'+i.strokewidth+'" style="'+o+'"></rect>':3==i.type&&(s='<circle cx="'+Math.floor(i.iconSize[0]/2+i.strokewidth)+'" cy="'+Math.floor(i.iconSize[1]/2+i.strokewidth)+'" r="'+(Math.floor(i.iconSize[1]/2)-i.strokewidth)+'" fill="'+i.markerColor+'" stroke="'+i.strokecolor+'" stroke-width="'+i.strokewidth+'" style="'+o+'"></circle>'),e.innerHTML='<svg width="'+i.iconSize[0]+'px" height="'+i.iconSize[1]+'px" viewBox="0 0 '+r+" "+h+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+s+a+"</svg>",this._setIconStyles(e,"icon"),e},_createInner:function(){var t,e,i,n,o;return t=void 0,n="",e="",i="",o=this.options,t=""===o.prefix||o.icon.slice(0,o.prefix.length+1)===o.prefix+"-"?o.icon:o.prefix+"-"+o.icon,o.spin&&"string"==typeof o.spinClass&&(n=o.spinClass),o.iconColor&&("white"===o.iconColor||"black"===o.iconColor?e="icon-"+o.iconColor:i="style='color: "+o.iconColor+"' "),"<i "+i+"class='"+o.extraClasses+" "+o.prefix+" "+t+" "+n+" "+e+"'></i>"},_setIconStyles:function(t,e){var i=this.options,n=i.iconSize||[23,36],o=L.point(i.offset)||{x:0,y:0},s=i.anchor||{x:0,y:0},a=(i[e+"Visibility"],"");s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.left=o.x+"px",t.style.top=o.y+"px"),n&&(t.style.width=n.x+"px",t.style.height=n.y+"px"),t.style.visibility=a,t.className="vector-marker-"+e+" "+i.className,t.style.position="relative"},createShadow:function(){var t;return t=document.createElement("div"),this._setIconStyles(t,"shadow"),t}}),L.VectorIcon.icon=function(t){return new L.VectorIcon.Icon(t)},L.ImagDivIcon=L.Icon.extend({updateIcon:function(t,e){this._setIconStyles(t,e)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(e&&"IMG"===e.tagName?e:null);return n.src=i,this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=L.point(i[e+"Size"]),o=L.point(i.offset)||{x:0,y:0},s=i.anchor||{x:0,y:0},a=(i[e+"Visibility"],""),r=L.point(i[e+"Position"])||{x:0,y:0};t.className="leaflet-marker-"+e+" "+(i.className||""),s&&(t.style.marginLeft=-s.x+o.x+"px",t.style.marginTop=-s.y+o.y+"px"),n&&(t.style.width=n.x+"px",t.style.height=n.y+"px"),t.src&&(t.style.background="url("+t.src+") no-repeat  "+r.x+"px  "+r.y+"px"),t.style.visibility=a},_createImg:function(t,e){return e=e||document.createElement("div")}}),L.TextDivIcon=L.ImagDivIcon.extend({options:{iconUrl:"",text:"",style:"",shadowUrl:null,iconSize:new L.Point(25,41),iconAnchor:new L.Point(13,41),popupAnchor:new L.Point(0,-33),className:"leaflet-div-icon"},createIcon:function(t){return this._createIcon("icon",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=document.createElement("div"),o=this._createImg(e&&"IMG"===e.tagName?e:null);o.src=i;var s=document.createElement("div");return s.setAttribute("class",this.options.style),s.innerHTML=this.options.text||"",n.appendChild(o),n.appendChild(s),this._setIconStyles(n,o,"icon"),n},_setIconStyles:function(t,e,i){var n=this.options,o=L.point(n[i+"Size"]),s=L.point(n.offset)||{x:0,y:0},a=n.anchor||{x:0,y:0},r=(n[i+"Visibility"],""),h=L.point(n[i+"Position"])||{x:0,y:0};t.className="leador-marker-"+i+" "+(n.className||""),a&&(t.style.marginLeft=-a.x+s.x+"px",t.style.marginTop=-a.y+s.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px",t.style.width=o.x+"px",t.style.height=o.y+"px"),e.src&&(e.style.background="url("+e.src+") no-repeat  "+h.x+"px  "+h.y+"px"),t.style.visibility=r},createShadow:function(){return null}}),L.Icon.Default=L.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return L.Icon.Default.imagePath||(L.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||L.Icon.Default.imagePath)+L.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=L.DomUtil.create("div","leaflet-default-icon-path",document.body),e=L.DomUtil.getStyle(t,"background-image")||L.DomUtil.getStyle(t,"backgroundImage");return document.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),L.Marker=L.Layer.extend({options:{icon:new L.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=L.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),L.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&L.DomUtil.addClass(o,e),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),L.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&L.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){L.DomUtil.setPosition(this._icon,t),this._shadow&&L.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(L.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),L.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new L.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;L.DomUtil.setOpacity(this._icon,t),this._shadow&&L.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),L.marker=function(t,e){return new L.Marker(t,e)},L.Util.extend(L.Marker.prototype,{options:L.Util.extend(L.Marker.prototype.options,{zIndexOffset:2,raiseOnDrag:!1,angleOffsetX:null,rotate:0}),getIcon:function(){return this.options.icon},rotate:function(t){this.options.rotate=t,this.update()},_initIcon:function(){var t=this.options,e=("leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),t.icon.createIcon(this._icon,"marker")),i=!1;if(e!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(e.title=t.title),t.alt&&(e.alt=t.alt)),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),t.opacity<1&&this._updateOpacity(),i)if(t.icon.options.isBefore){var n=this.getPane().childNodes[0];n?this.getPane().insertBefore(this._icon,n):this.getPane().appendChild(this._icon)}else this.getPane().appendChild(this._icon);this._initInteraction()},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this._icon&&(L.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon)),this._icon=null},_setPos:function(t){this._setPosOrigin&&this._setPosOrigin(t),this._light&&L.DomUtil.setPosition(this._light,t);var e=this._icon;if(L.Browser.ie){e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.position="absolute";var i=this._transform();if(i)e.style[i]="rotate("+this.options.rotate+"deg)";else{var n=Math.cos(this.options.rotate*Math.PI/180),o=Math.sin(this.options.rotate*Math.PI/180);e.style.filter="progid:DXImageTransform.Microsoft.Matrix("+self.sizingMethod+",M11="+n+",M12="+-o+",M21="+o+",M22="+n+")"}}else L.DomUtil.setPosition(this._icon,t,this.options.rotate);this._shadow&&L.DomUtil.setPosition(this._shadow,t),-1!=this.options.zIndexOffset&&(this._zIndex=this.options.zIndexOffset),this._resetZIndex()},_transform:function(){for(var t=["WebkitTransform","MozTransform","OTransform","msTransform"],e=0;e<t.length;e++)if(t[e]in document.documentElement.style)return t[e];return!1},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)}}),L.Util.extend(L.Icon.prototype,{updateIcon:function(t,e){this._setIconStyles(t,e)},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"],o=L.point(i[e+"Position"])||{x:0,y:0};"number"==typeof n&&(n=[n,n]);var s=L.point(n),a=L.point(i.offset)||{x:0,y:0},r=i.anchor||{x:0,y:0};t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+a.x+"px",t.style.marginTop=-r.y+a.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px"),t.imgurl&&(t.style.background="url("+t.imgurl+") no-repeat  "+o.x+"px  "+o.y+"px")},_createDiv:function(t,e){return e=e||document.createElement("div")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},createIcon:function(t,e){return this._createIcon("icon",t,e)},_createIcon:function(t,e,i){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}if(i||(i="marker"),"marker"==i){var o=this._createDiv(e&&"IMG"===e.tagName?e:null);o.imgurl=n}else if("groundimage"==i)var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o}}),L.GroundImage=L.Marker.extend({initialize:function(t,e){L.setOptions(this,e),t&&(this._bounds=L.latLngBounds(t),this._latlng=L.latLng(t.getNorthWest()))},update:function(){var t=this._icon;if(t){var e=this._getIconSize({zoom:this._map.getZoom(),center:this._map.getCenter()}),i=new L.point(e[0]*this.options.anchor[0],e[1]*this.options.anchor[1]),n=this.options.offset;t.style.marginLeft=-i.x+n.x+"px",t.style.marginTop=-i.y+n.y+"px",t.style.width=e[0]+"px",t.style.height=e[1]+"px";var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},setBounds:function(t,e){if(this._bounds=L.latLngBounds(t),this._latlng=L.latLng(t.getNorthWest()),!e){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}},getBounds:function(){return this._bounds},_initIcon:function(){var t=this.options,e=t.icon.createIcon(this._icon,"groundimage"),i=!1;e!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(e.title=t.title),t.alt&&(e.alt=t.alt)),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction()},_setPos:function(t){L.DomUtil.setPosition(this._icon,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_animateZoom:function(t){this.update()},_initInteraction:function(){if(this.options.interactive&&(L.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),L.Handler.GroundImageDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new L.Handler.GroundImageDrag(this),t&&this.dragging.enable()}},_getIconSize:function(t){var e=this._map;if(!e)return[0,0];var i=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center).round(),n=this._map._latLngToNewLayerPoint(this._bounds.getSouthEast(),t.zoom,t.center).round();return[n.x-i.x,n.y-i.y]}}),L.Marker.include({glow:null,flare:null,color:"#ff0000",offset:{x:0,y:0},light:null,_initIcon:function(){this._initIconOrigin(),"marker-icon.png"==this.options.icon.options.iconUrl&&this.createLight()},createLight:function(){this.light=this._light=L.DivIcon.prototype.createIcon(),L.DomUtil.remove(this.light),L.DomUtil.remove(this._light),L.DomUtil.addClass(this.light,"light"),this.glow=L.DomUtil.create("span","glow",this.light),this.flare=L.DomUtil.create("span","flare",this.light),"permanent"===this.options.highlight?L.DomUtil.addClass(this.light,"permanent"):"temporary"===this.options.highlight&&L.DomUtil.addClass(this.light,"temporary"),this.getPane().appendChild(this.light),this.color=this.options.pulseColor,this.offset=this.options.pulseOffset,this.setColor(this.color),this.setPulseOffset(this.offset),this.update()},_setStyle:function(){this.light.setAttribute("style","opacity: 1;"),this._light.setAttribute("style","opacity: 1;"),this.glow.setAttribute("style","background:-webkit-radial-gradient("+L.DomUtil.hexToRgba(this.color,100).rgba+", "+L.DomUtil.hexToRgba(this.color,0).rgba+" 70%)!important;margin-left:"+this.offset.x+"px;margin-top:"+this.offset.y+"px;"),this.flare.setAttribute("style","background:"+L.DomUtil.hexToRgba(this.color,100).rgba+" !important;margin-left:"+this.offset.x+"px;margin-top:"+this.offset.y+"px;"),this.update()},_removePulse:function(){this.glow&&this.glow.setAttribute("style",""),this.flare&&this.flare.setAttribute("style",""),this.light&&(this.light.setAttribute("style","opacity: 0;"),this._light.setAttribute("style","opacity: 0;"))},setColor:function(t){this.color=t,this._setStyle()},setPulseOffset:function(t){this.offset=t,this._setStyle()},enableTemporaryHighlight:function(){this.options.highlight="temporary",L.DomUtil.addClass(this._light,"temporary")},disableTemporaryHighlight:function(t){delete this.options.highlight,L.DomUtil.removeClass(this._light,"temporary")},enablePermanentHighlight:function(){this.options.highlight="permanent",L.DomUtil.addClass(this._light,"permanent")},disablePermanentHighlight:function(t){delete this.options.highlight,L.DomUtil.removeClass(this._light,"permanent")},_initIconOrigin:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),L.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&L.DomUtil.addClass(o,e),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane("shadowPane").appendChild(this._shadow)}}),L.DivIcon=L.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var n=L.point(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),L.divIcon=function(t){return new L.DivIcon(t)},function(t){L.Icon.Pulse=L.DivIcon.extend({options:{className:"",iconSize:[1,1],color:"red",animate:!0,heartbeat:2},initialize:function(t){L.setOptions(this,t);var e="lpi-"+(new Date).getTime()+"-"+Math.round(1e5*Math.random()),i=["background-color: "+this.options.color],n=["box-shadow: 0 0 35px 20px "+this.options.color,"animation: pulsate "+this.options.heartbeat+"s ease-out","animation-iteration-count: infinite","animation-delay: "+(this.options.heartbeat+.1)+"s"];this.options.animate||(n.push("animation: none"),n.push("box-shadow:none"));var o=["."+e+"{"+i.join(";")+";}","."+e+":after{"+n.join(";")+";}"].join(""),s=document.createElement("style");s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o)),document.getElementsByTagName("head")[0].appendChild(s),this.options.className=this.options.className+" leaflet-pulsing-icon "+e,L.DivIcon.prototype.initialize.call(this,t)}}),L.icon.pulse=function(t){return new L.Icon.Pulse(t)},L.Marker.Pulse=L.Marker.extend({initialize:function(t,e){e.icon=L.icon.pulse(e),L.Marker.prototype.initialize.call(this,t,e)}}),L.marker.pulse=function(t,e){return new L.Marker.Pulse(t,e)}}(window),L.Util.extend(L.DivIcon.prototype,{createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;return e.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(e.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(e,"icon"),e}}),L.DivOverlay=L.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){L.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(L.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)):L.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=L.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?L.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),L.Popup=L.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof L.Path||this._source.on("preclick",L.DomEvent.stopPropagation))},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof L.Path||this._source.off("preclick",L.DomEvent.stopPropagation))},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=L.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var i=this._closeButton=L.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",L.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=L.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=L.DomUtil.create("div",t+"-content",n),L.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",t+"-tip-container",e),this._tip=L.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",L.DomUtil.addClass(t,s)):L.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();L.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(L.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new L.Point(this._containerLeft,-i-this._containerBottom);o._add(L.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(o),a=L.point(this.options.autoPanPadding),r=L.point(this.options.autoPanPaddingTopLeft||a),h=L.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),d=0,u=0;s.x+n+h.x>l.x&&(d=s.x+n-l.x+h.x),s.x-d-r.x<0&&(d=s.x-r.x),s.y+i+h.y>l.y&&(u=s.y+i-l.y+h.y),s.y-u-r.y<0&&(u=s.y-r.y),(d||u)&&t.fire("autopanstart").panBy([d,u])}},_onCloseButtonClick:function(t){this._close(),L.DomEvent.stop(t)},_getAnchor:function(){return L.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),L.popup=function(t,e){return new L.Popup(t,e)},L.Map.mergeOptions({closePopupOnClick:!0}),L.Map.include({openPopup:function(t,e,i){return t instanceof L.Popup||(t=new L.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),L.Layer.include({bindPopup:function(t,e){return t instanceof L.Popup?(L.setOptions(t,e),this._popup=t,t._source=this):((!this._popup||e)&&(this._popup=new L.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof L.Layer||(e=t,t=this),t instanceof L.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return L.DomEvent.stop(t),e instanceof L.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),L.Map.mergeOptions({closePopupOnClick:!1}),L.Util.extend(L.Popup.prototype,{options:L.Util.extend(L.Popup.prototype.options,{maxWidth:700,minHeight:50,maxHeight:700,closeOnClick:!1,anchor:[.5,1],zoomAnimation:!1,width:0,height:0,title:""}),initialize:function(t,e){if(L.setOptions(this,t),this._source=e,0==t.type){this._anchorOffset=[-.5,-1],this._popupContent=L.DomUtil.create("div","leafletmap-window"),this._popupContent.style.width=t.width+4+"px",this._popupContent.style.left="18px";var i=L.DomUtil.create("div","leafletmap-window-title");i.style.width=t.width-6+"px",i.innerHTML=t.title;var n=L.DomUtil.create("div","leafletmap-window-content");n.style.width=t.width-6+"px",n.style.height=t.height-28+"px",this._popupContent.appendChild(i),this._popupContent.appendChild(n)}else this._anchorOffset=[0,0],
this._popupContent=L.DomUtil.create("div","leaflet-zoom-animated"),this._popupContent.style.position="absolute",L.DomEvent.disableClickPropagation(this._popupContent).disableScrollPropagation(this._popupContent).on(this._popupContent,"contextmenu",L.DomEvent.stopPropagation)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),t._fadeAnimated&&!this.options.type&&L.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),"string"==typeof this._container?this.getPane().innerHTML=this._container:this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&!this.options.type&&L.DomUtil.setOpacity(this._container,1),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source.on("preclick",L.DomEvent.stopPropagation))},onRemove:function(t,e){t&&t._fadeAnimated?(L.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)):L.DomUtil.remove(this._container),e&&this.fire("removetip",{type:"removetip"}),t&&t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source.off("preclick",L.DomEvent.stopPropagation))},setTitle:function(t){this.options.type||(this._popupContent.childNodes[0].innerHTML=t),this._content=this._popupContent,this.update()},setContent:function(t){return this.options.type?(this._popupContent.innerHTML=t,this._container=this._popupContent):this._popupContent.childNodes[1].innerHTML=t,this._content=this._popupContent,this.update(),this},setSize:function(t,e){this.options.width=t,this.options.height=e,this.options.type?(this._popupContent.childNodes[0].style.width=t+"px",this._popupContent.childNodes[0].style.height=e+"px"):(this._popupContent.style.width=t+4+"px",this._popupContent.style.left="18px",this._popupContent.childNodes[0].style.width=t-6+"px",this._popupContent.childNodes[1].style.width=t-6+"px",this._popupContent.childNodes[1].style.height=e-28+"px")},update:function(t){t instanceof Array&&(this.options.autoPanPaddingTopLeft=[t[0].x,t[0].y],this.options.autoPanPaddingBottomRight=[t[1].x,t[1].y]),this._map&&(this._container.style.visibility="hidden",this.options.type||(this._updateContent(),this._updateLayout()),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_close:function(){this._map&&(this._map.closePopup(this),this.fire("tipclick",{type:"tipclick"}))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.height="",e.whiteSpace="nowrap";var i=t.offsetWidth||this.options.width;i||(i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth)),e.width=i+1+"px",this.options.width=i;var n=t.offsetHeight||this.options.height;n||(n=Math.min(n,this.options.maxHeight),n=Math.max(n,this.options.minHeight)),e.height=n+1+"px",this.options.height=n,e.whiteSpace="";var o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",L.DomUtil.addClass(t,s)):L.DomUtil.removeClass(t,s)},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=L.point(this.options.offset),i=this.options.anchor;t=t.subtract([this.options.width*(i[0]+this._anchorOffset[0]),this.options.height*(i[1]+this._anchorOffset[1])]),this._zoomAnimated?L.DomUtil.setPosition(this._container,t):e=e.add(t);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._container.offsetWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);if(0!=this.options.type){var i=this.options.anchor;e=e.subtract([this.options.width*(i[0]+this._anchorOffset[0]),this.options.height*(i[1]+this._anchorOffset[1])])}L.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=this._container.offsetHeight,i=this._container.offsetWidth,n=new L.Point(this._containerLeft,-e-this._containerBottom||0);this._zoomAnimated&&n._add(L.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(n),s=L.point(this.options.autoPanPadding),a=L.point(this.options.autoPanPaddingTopLeft||s),r=L.point(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),l=0,d=0;o.x+i+r.x>h.x&&(l=o.x+i-h.x+r.x),o.x-l-a.x<0&&(l=o.x-a.x),o.y+e+r.y>h.y&&(d=o.y+e-h.y+r.y),o.y-d-a.y<0&&(d=o.y-a.y),(l||d)&&t.fire("autopanstart").panBy([l,d])}}}),L.Map.include({openPopup:function(t,e,i){return t instanceof L.Popup||(t=new L.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&(L.stamp(this._popup)!=L.stamp(t)&&this._popup.fire("tipclose",{type:"tipclose"}),this.closePopup()),this._popup=t,this.addLayer(t))}}),L.Marker.include({_getPopupAnchor:function(){return this.options.anchor||[0,0]}}),L.LayerGroup=L.Layer.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return L.stamp(t)}}),L.layerGroup=function(t){return new L.LayerGroup(t)},L.FeatureGroup=L.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),L.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),L.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new L.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),L.featureGroup=function(t){return new L.FeatureGroup(t)},L.Renderer=L.Layer.extend({options:{padding:.1},initialize:function(t){L.setOptions(this,t),L.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&L.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){L.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=L.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),a=this._map.project(t,e),r=a.subtract(s),h=o.multiplyBy(-i).add(n).add(o).subtract(r);L.Browser.any3d?L.DomUtil.setTransform(this._container,h,i):L.DomUtil.setPosition(this._container,h)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new L.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),L.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&L.canvas()||L.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===undefined)return!1;var e=this._paneRenderers[t];return e===undefined&&(e=L.SVG&&L.svg({pane:t})||L.Canvas&&L.canvas({pane:t}),this._paneRenderers[t]=e),e}}),L.Path=L.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return L.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(L.Browser.touch?10:0)}}),L.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,n=typeof Uint8Array!=undefined+""?Uint8Array:Array,o=new n(i);o[0]=o[i-1]=1,this._simplifyDPStep(t,o,e,0,i-1);var s,a=[];for(s=0;i>s;s++)o[s]&&a.push(t[s]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>h&&(s=a,h=r);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n,o){var s,a,r,h=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(h|l))return[t,e];if(h&l)return!1;s=h||l,a=this._getEdgeIntersection(t,e,s,i,o),r=this._getBitCode(a,i),s===h?(t=a,h=r):(e=a,l=r)}},_getEdgeIntersection:function(t,e,i,n,o){var s,a,r=e.x-t.x,h=e.y-t.y,l=n.min,d=n.max;return 8&i?(s=t.x+r*(d.y-t.y)/h,a=d.y):4&i?(s=t.x+r*(l.y-t.y)/h,a=l.y):2&i?(s=d.x,a=t.y+h*(d.x-t.x)/r):1&i&&(s=l.x,a=t.y+h*(l.x-t.x)/r),new L.Point(s,a,o)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var o,s=e.x,a=e.y,r=i.x-s,h=i.y-a,l=r*r+h*h;return l>0&&(o=((t.x-s)*r+(t.y-a)*h)/l,o>1?(s=i.x,a=i.y):o>0&&(s+=r*o,a+=h*o)),r=t.x-s,h=t.y-a,n?r*r+h*h:new L.Point(s,a)}},L.Polyline=L.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){L.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,s=L.LineUtil._sqClosestPointOnSegment,a=0,r=this._parts.length;r>a;a++)for(var h=this._parts[a],l=1,d=h.length;d>l;l++){e=h[l-1],i=h[l];var u=s(t,e,i,!0);n>u&&(n=u,o=s(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,a,r=this._rings[0],h=r.length;if(!h)return null;for(t=0,e=0;h-1>t;t++)e+=r[t].distanceTo(r[t+1])/2;if(0===e)return this._map.layerPointToLatLng(r[0]);for(t=0,n=0;h-1>t;t++)if(o=r[t],s=r[t+1],i=o.distanceTo(s),n+=i,n>e)return a=(n-e)/i,this._map.layerPointToLatLng([s.x-a*(s.x-o.x),s.y-a*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=L.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new L.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,o=t.length;o>n;n++)i?(e[n]=L.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new L.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new L.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,o,s=t[0]instanceof L.LatLng,a=t.length;if(s){for(o=[],n=0;a>n;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;a>n;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,o,s,a,r,h=this._parts;for(e=0,n=0,o=this._rings.length;o>e;e++)for(r=this._rings[e],i=0,s=r.length;s-1>i;i++)a=L.LineUtil.clipSegment(r[i],r[i+1],t,i,!0),a&&(h[n]=h[n]||[],h[n].push(a[0]),(a[1]!==r[i+1]||i===s-2)&&(h[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;n>i;i++)t[i]=L.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),L.polyline=function(t,e){return new L.Polyline(t,e)},L.Polyline._flat=function(t){return!L.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},L.Util.extend(L.Polyline.prototype,{spliceLatLngs:function(){var t=this._latlngs.length>1?this._latlngs:this._latlngs[0],e=[].splice.apply(t,arguments);return this._convertLatLngs(t,!0),this.redraw(),e}}),L.Sector=L.Path.extend({_bounds:new L.LatLngBounds,_angle:120,_pixelRadius:0,options:{},initialize:function(t,e,i,n){var o=this;L.setOptions(o,n),o._position=t,o._radius=e,o._degree=isNaN(i)?90:Math.max(0,Math.min(parseInt(i),360))},getBounds:function(){return this._bounds},setRadius:function(t){this._radius=t,this._reset()},setOrientation:function(t){this._degree=t,this._reset()},setAngle:function(t){this._angle=t,this._reset()},setPosition:function(t){this._position=t,this._reset()},_update:function(){this._map&&this._renderer._updateSector(this)},_updatePath:function(){this._renderer._updatePoly(this)},_getLatLngByOffset:function(t,e,i){t.lng=Number(t.lng),t.lat=Number(t.lat);var n=2*Math.asin(Math.sin(Math.round(e)/12756274)/Math.cos(t.lat*Math.PI/180)),o=t.lng+180*n/Math.PI,s=2*Math.asin(Math.round(i)/12756274),a=t.lat+180*s/Math.PI;return new L.LatLng(a,o)},_project:function(){var t=this,e=t._map,i=t._position,n=t._radius;if(e&&i&&n){var o=e.latLngToLayerPoint(i),s=o.x,a=o.y,r=e.latLngToLayerPoint(t._getLatLngByOffset(i,n,0));n=Math.abs(o.x-r.x),t._pixelRadius=n;var h=t._angle,l=!1,d=t._degree>=0?t._degree:360+t._degree,u=d-h/2;u=u>=0?u:360+u;var c=0,p=u/90,f=y1=x2=y2=x3=y3=0;switch(p){case 1:f=s,y1=a-n,l=!0;break;case 2:f=s+n,y1=a,l=!0;break;case 3:f=s,y1=a+n,l=!0;break;case 0:case 4:f=s-n,y1=a,l=!0}if(!l)switch(p=Math.ceil(p),u=0>u?360+u:u,p){case 1:c=Math.PI*u/180;var m=c?Math.abs(n*Math.sin(c)):0,g=c?Math.abs(n*Math.cos(c)):n;f=s-g,y1=a-m;break;case 2:c=Math.PI*(u-90)/180;var g=c?Math.abs(n*Math.sin(c)):n,m=c?Math.abs(n*Math.cos(c)):0;f=s+g,y1=a-m;break;case 3:c=Math.PI*(u-180)/180;var m=c?Math.abs(n*Math.sin(c)):0,g=c?Math.abs(n*Math.cos(c)):n;f=s+g,y1=a+m;break;default:c=Math.abs(Math.PI*(u-270)/180);var g=c?Math.abs(n*Math.sin(c)):0,m=c?Math.abs(n*Math.cos(c)):n;f=s-g,y1=a+m}l=!1;var _=u+h;switch(_>360&&(_-=360),p=_/90){case 1:x2=s,y2=a-n,l=!0;break;case 2:x2=s+n,y2=a,l=!0;break;case 3:x2=s,y2=a+n,l=!0;break;case 0:case 4:x2=s-n,y2=a,l=!0}if(!l)switch(p=Math.ceil(p)){case 1:c=Math.PI*(90-(90-u-h))/180;var m=Math.abs(n*Math.sin(c)),g=Math.abs(n*Math.cos(c));x2=s-g,y2=a-m;break;case 2:c=Math.PI*(90-(180-u-h))/180;var g=Math.abs(n*Math.sin(c)),m=Math.abs(n*Math.cos(c));x2=s+g,y2=a-m;break;case 3:c=Math.PI*(90-(270-u-h))/180;var m=Math.abs(n*Math.sin(c)),g=Math.abs(n*Math.cos(c));x2=s+g,y2=a+m;break;case 5:c=Math.PI*(90-(450-u-h))/180;var m=Math.abs(n*Math.sin(c)),g=Math.abs(n*Math.cos(c));x2=s-g,y2=a-m;break;default:c=Math.PI*(90-(360-u-h))/180;var g=Math.abs(n*Math.sin(c)),m=Math.abs(n*Math.cos(c));x2=s-g,y2=a+m}l=!1;var v=t._distanceByPixel({x:f,y:y1},{x:x2,y:y2});p=d/90;var y=n+v/4;switch(p){case 1:x3=s,y3=a-y,topFlag=!0;break;case 2:x3=s+y,y3=a,topFlag=!0;break;case 3:x3=s,y3=a+y,topFlag=!0;break;case 0:case 4:x3=s-y,y3=a,topFlag=!0}if(!l)switch(p=Math.ceil(p)){case 1:c=Math.PI*d/180;var m=Math.abs(y*Math.sin(c)),g=Math.abs(y*Math.cos(c));x3=s-g,y3=a-m;break;case 2:c=Math.PI*(d-90)/180;var g=Math.abs(y*Math.sin(c)),m=Math.abs(y*Math.cos(c));x3=s+g,y3=a-m;break;case 3:c=Math.PI*(d-180)/180;var m=Math.abs(y*Math.sin(c)),g=Math.abs(y*Math.cos(c));x3=s+g,y3=a+m;break;default:c=Math.PI*(d-270)/180;var g=Math.abs(y*Math.sin(c)),m=Math.abs(y*Math.cos(c));x3=s-g,y3=a+m}s=Math.round(s),a=Math.round(a),f=Math.round(f),y1=Math.round(y1),x2=Math.round(x2),y2=Math.round(y2),x3=Math.round(x3),y3=Math.round(y3);var b=Math.min(s,f,x2,x3),x=Math.min(a,y1,y2,y3),w=Math.max(s,f,x2,x3),M=Math.max(a,y1,y2,y3),P=new L.Point(b,x),D=new L.Point(w,M);P=e.layerPointToLatLng(P),D=e.layerPointToLatLng(D);var C=new L.LatLng(Math.min(P.lat,D.lat),Math.min(P.lng,D.lng)),k=new L.LatLng(Math.max(P.lat,D.lat),Math.max(P.lng,D.lng));t._bounds=new L.LatLngBounds(C,k),t._parts={x:s,y:a,r:n,x1:f,y1:y1,x2:x2,y2:y2,x3:x3,y3:y3}}},_distanceByPixel:function(t,e){var i=Math.pow(e.x-t.x,2),n=Math.pow(e.y-t.y,2);return Math.sqrt(i+n)}}),L.PolyUtil={},L.PolyUtil.clipPolygon=function(t,e,i){var n,o,s,a,r,h,l,d,u,c=[1,4,2,8],p=L.LineUtil;for(o=0,l=t.length;l>o;o++)t[o]._code=p._getBitCode(t[o],e);for(a=0;4>a;a++){for(d=c[a],n=[],o=0,l=t.length,s=l-1;l>o;s=o++)r=t[o],h=t[s],r._code&d?h._code&d||(u=p._getEdgeIntersection(h,r,d,e,i),u._code=p._getBitCode(u,e),n.push(u)):(h._code&d&&(u=p._getEdgeIntersection(h,r,d,e,i),u._code=p._getBitCode(u,e),n.push(u)),n.push(r));t=n}return t},L.Polygon=L.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,a,r,h,l=this._rings[0],d=l.length;if(!d)return null;for(s=a=r=0,t=0,e=d-1;d>t;e=t++)i=l[t],n=l[e],o=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*o,r+=(i.y+n.y)*o,s+=3*o;return h=0===s?l[0]:[a/s,r/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=L.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof L.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){L.Polyline.prototype._setLatLngs.call(this,t),L.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return L.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new L.Point(e,e);if(t=new L.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,o=0,s=this._rings.length;s>o;o++)n=L.PolyUtil.clipPolygon(this._rings[o],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),L.polygon=function(t,e){return new L.Polygon(t,e)},L.Util.extend(L.Polygon.prototype,{_clipPoints:function(){var t=this._renderer._bounds,e=3*this.options.weight,i=new L.Point(e,e);if(t=new L.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,o=0,s=this._rings.length;s>o;o++)n=L.PolyUtil.clipPolygon(this._rings[o],t,!0),n.length&&this._parts.push(n)}}}),L.Rectangle=L.Polygon.extend({initialize:function(t,e){L.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=L.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),L.rectangle=function(t,e){return new L.Rectangle(t,e)},L.CircleMarker=L.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){L.setOptions(this,e),this._latlng=L.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return L.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new L.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),L.circleMarker=function(t,e){return new L.CircleMarker(t,e)},L.Util.extend(L.CircleMarker.prototype,{getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))}}),L.Circle=L.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=L.extend({},i,{radius:e})),L.setOptions(this,e),this._latlng=L.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new L.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:L.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===L.CRS.Earth.distance){var o=Math.PI/180,s=this._mRadius/L.CRS.Earth.R/o,a=i.project([e+s,t]),r=i.project([e-s,t]),h=a.add(r).divideBy(2),l=i.unproject(h).lat,d=Math.acos((Math.cos(s*o)-Math.sin(e*o)*Math.sin(l*o))/(Math.cos(e*o)*Math.cos(l*o)))/o;(isNaN(d)||0===d)&&(d=s/Math.cos(Math.PI/180*e)),this._point=h.subtract(i.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(h.x-i.project([l,t-d]).x),1),this._radiusY=Math.max(Math.round(h.y-a.y),1)}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}}),L.circle=function(t,e,i){return new L.Circle(t,e,i)},L.SVG=L.Renderer.extend({getEvents:function(){var t=L.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=L.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=L.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){L.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),L.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=L.SVG.create("path");t.options.className&&L.DomUtil.addClass(e,t.options.className),t.options.interactive&&L.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[L.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){L.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[L.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,L.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n=t._radiusY||i,o="a"+i+","+n+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){L.DomUtil.toFront(t._path)},_bringToBack:function(t){L.DomUtil.toBack(t._path)}}),L.extend(L.SVG,{create:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,o,s,a,r,h="";for(i=0,o=t.length;o>i;i++){for(a=t[i],n=0,s=a.length;s>n;n++)r=a[n],h+=(n?"L":"M")+r.x+" "+r.y;h+=e?L.Browser.svg?"z":"x":""}return h||"M0 0"}}),L.Browser.svg=!(!document.createElementNS||!L.SVG.create("svg").createSVGRect),L.svg=function(t){return L.Browser.svg||L.Browser.vml?new L.SVG(t):null},L.Util.extend(L.SVG.prototype,{_initPath:function(t){var e=t._path=L.SVG.create("path");t.options.className&&L.DomUtil.addClass(e,t.options.className),t.options.interactive&&L.DomUtil.addClass(e,"leaflet-interactive"),L.DomEvent.on(e,"click dblclick mousedown mouseup contextmenu",function(t){this.fire("click")},this),this._updateStyle(t),this._layers[L.stamp(t)]=t},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_updatePoly:function(t,e){this._setPath(t,L.SVG.pointsToPath(t._parts,e,t.options))},_updateSector:function(t){var e=t._parts,i=e?"M "+e.x+" "+e.y+" "+e.x2+" "+e.y2+" C "+e.x2+" "+e.y2+" "+e.x3+" "+e.y3+" "+e.x1+" "+e.y1+" z":"M 0 0 z";this._setPath(t,i)}}),L.extend(L.SVG,{pointsToPath:function(t,e,i){var n,o,s,a,r,h,l,d="",u="",c=i.arrow,p=parseInt(i.weight)+3;for(n=0,s=t.length;s>n;n++){for(r=t[n],o=0,a=r.length;a>o;o++)h=r[o],d+=(o?" L":"M")+h.x+" "+h.y,c&&a-1>o&&(l={x:Math.round(2*r[o+1].x-h.x),y:Math.round(2*r[o+1].y-h.y)},u+=this._drawPolylineArrow(r[o+1],l,p));d+=e?L.Browser.svg?"z":"x":""}return d+u||"M0 0"},_drawPolylineArrow:function(t,e,i){var n,o,s,a,r,h,l=Math.sqrt((t.y-e.y)*(t.y-e.y)+(t.x-e.x)*(t.x-e.x));n=parseInt(t.x)+parseInt(1*i*(t.x-e.x+(t.y-e.y)/2)/l),o=parseInt(t.y)+parseInt(1*i*(t.y-e.y-(t.x-e.x)/2)/l),s=parseInt(t.x)+parseInt(1*i*(t.x-e.x-(t.y-e.y)/2)/l),a=parseInt(t.y)+parseInt(1*i*(t.y-e.y+(t.x-e.x)/2)/l),r=Math.round(t.x),h=Math.round(t.y);var d="",u="";return n&&(d=" M"+n+" "+o+" L"+r+" "+h,u=" M"+s+" "+a+" L"+r+" "+h),d+u}}),L.Browser.vml=!L.Browser.svg&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(i){return!1}}(),L.SVG.include(L.Browser.vml?{_initContainer:function(){this._container=L.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(L.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=L.SVG.create("shape");L.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=L.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;L.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=L.SVG.create("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=L.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=L.SVG.create("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){L.DomUtil.toFront(t._container)},_bringToBack:function(t){L.DomUtil.toBack(t._container)}}:{}),L.Browser.vml&&(L.SVG.create=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),L.SVG.include(L.Browser.vml?{_updateSector:function(t){var e=t._parts,i=e?"m "+e.x+" "+e.y+" l "+e.x2+" "+e.y2+" c "+e.x2+" "+e.y2+" "+e.x3+" "+e.y3+" "+e.x1+" "+e.y1+" x e":"m 0,0 x e";this._setPath(t,i)}}:{}),L.Canvas=L.Renderer.extend({onAdd:function(){L.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");L.DomEvent.on(t,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},L.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=L.Browser.retina?2:1;L.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",L.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_initPath:function(t){this._updateDashArray(t),this._layers[L.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),
this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||L.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new L.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,a=t._parts,r=a.length,h=this._ctx;if(r){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),h.setLineDash&&h.setLineDash(t.options&&t.options._dashArray||[]),i=0;r>i;i++){for(n=0,o=a[i].length;o>n;n++)s=a[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(L.DomEvent._fakeStop(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(L.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,o=this._drawFirst;o;o=o.next)i=o.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),L.Browser.canvas=function(){return!!document.createElement("canvas").getContext}(),L.canvas=function(t){return L.Browser.canvas?new L.Canvas(t):null},L.Polyline.prototype._containsPoint=function(t,e){var i,n,o,s,a,r,h=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;s>i;i++)for(r=this._parts[i],n=0,a=r.length,o=a-1;a>n;o=n++)if((e||0!==n)&&L.LineUtil.pointToSegmentDistance(t,r[o],r[n])<=h)return!0;return!1},L.Polygon.prototype._containsPoint=function(t){var e,i,n,o,s,a,r,h,l=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,r=this._parts.length;r>o;o++)for(e=this._parts[o],s=0,h=e.length,a=h-1;h>s;a=s++)i=e[s],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(l=!l);return l||L.Polyline.prototype._containsPoint.call(this,t,!0)},L.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},L.Util.extend(L.Canvas.prototype,{_updateCircle:function(t){if(!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_handleMouseHover:function(t,e){var i,n;if(!this._hoveredLayer)for(i in this._drawnLayers)if(n=this._drawnLayers[i],n.options.interactive&&n._containsPoint(e)){L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n;break}this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)}});var eventsKey="_leaflet_events";L.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],i);else{e=L.Util.splitWords(e);for(var s=0,a=e.length;a>s;s++)this._on(t,e[s],i,n)}return this},off:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],i);else{e=L.Util.splitWords(e);for(var s=0,a=e.length;a>s;s++)this._off(t,e[s],i,n)}return this},_on:function(t,e,i,n){var o=e+L.stamp(i)+(n?"_"+L.stamp(n):"");if(t[eventsKey]&&t[eventsKey][o])return this;var s=function(e){return i.call(n||t,e||window.event)},a=s;return L.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,s,o):L.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener?this.addDoubleTapListener(t,s,o):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,L.DomEvent._isExternalTarget(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&L.Browser.android&&(s=function(t){return L.DomEvent._filterClick(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s),t[eventsKey]=t[eventsKey]||{},t[eventsKey][o]=s,this},_off:function(t,e,i,n){var o=e+L.stamp(i)+(n?"_"+L.stamp(n):""),s=t[eventsKey]&&t[eventsKey][o];return s?(L.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):L.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[eventsKey][o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,L.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return L.DomEvent.on(t,"mousewheel",L.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=L.DomEvent.stopPropagation;return L.DomEvent.on(t,L.Draggable.START.join(" "),e),L.DomEvent.on(t,{click:L.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return L.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new L.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new L.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:L.Browser.win&&L.Browser.chrome?2:L.Browser.gecko?window.devicePixelRatio:1,getWheelDelta:function(t){return L.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/L.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){L.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=L.DomEvent._lastClick&&i-L.DomEvent._lastClick;return n&&n>100&&500>n||t.target._simulatedClick&&!t._simulated?void L.DomEvent.stop(t):(L.DomEvent._lastClick=i,void e(t))}},L.DomEvent.addListener=L.DomEvent.on,L.DomEvent.removeListener=L.DomEvent.off,L.Draggable=L.Evented.extend({options:{clickTolerance:3},statics:{START:L.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(L.DomEvent.on(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(L.Draggable._dragging===this&&this.finishDrag(),L.DomEvent.off(this._dragStartTarget,L.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!L.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(L.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(L.Draggable._dragging=this,this._preventOutline&&L.DomUtil.preventOutline(this._element),L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY),L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this).on(document,L.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new L.Point(e.clientX,e.clientY),n=i.subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(L.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=L.DomUtil.getPosition(this._element).subtract(n),L.DomUtil.addClass(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),L.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,L.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=L.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){L.DomUtil.removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in L.Draggable.MOVE)L.DomEvent.off(document,L.Draggable.MOVE[t],this._onMove,this).off(document,L.Draggable.END[t],this._onUp,this);L.DomUtil.enableImageDrag(),L.DomUtil.enableTextSelection(),this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,L.Draggable._dragging=!1}}),L.Handler=L.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),L.Map.mergeOptions({dragging:!0,inertia:!L.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),L.Map.Drag=L.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new L.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}L.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){L.DomUtil.removeClass(this._map._container,"leaflet-grab"),L.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=L.latLngBounds(this._map.options.maxBounds);this._offsetLimit=L.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,r=o.multiplyBy(a/s),h=r.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,h),d=r.multiplyBy(l/h),u=l/(i.inertiaDeceleration*a),c=d.multiplyBy(-u/2).round();c.x||c.y?(c=e._limitOffset(c,e.options.maxBounds),L.Util.requestAnimFrame(function(){e.panBy(c,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),L.Map.addInitHook("addHandler","dragging",L.Map.Drag),L.DomEvent._on=function(t,e,i,n){var o=e+L.stamp(i)+(n?"_"+L.stamp(n):"");if(t[eventsKey]&&t[eventsKey][o])return this;var s=function(e){return i.call(n||t,e||window.event)},a=s;return L.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,s,o):L.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener?this.addDoubleTapListener(t,s,o):"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",s,!1),t.addEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,L.DomEvent._isExternalTarget(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&L.Browser.android&&(s=function(t){return L.DomEvent._filterClick(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s),t[eventsKey]=t[eventsKey]||{},t[eventsKey][o]=s,this},L.DomEvent._off=function(t,e,i,n){var o=e+L.stamp(i)+(n?"_"+L.stamp(n):""),s=t[eventsKey]&&t[eventsKey][o];return s?(L.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):L.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1)):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[eventsKey][o]=null,this):this},L.DomEvent.disableScrollPropagation=function(t){return L.DomEvent.on(t,"mousewheel MozMousePixelScroll",L.DomEvent.stopPropagation)},L.DomEvent.getWheelDelta=function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},L.Util.extend(L.Draggable.prototype,{initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i,L.DomUtil.disableImageDrag(),L.DomUtil.disableTextSelection()},_onDown:function(t){if(this._moved=!1,!L.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(L.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&this._enabled&&(L.Draggable._dragging=!0,this._preventOutline&&L.DomUtil.preventOutline(this._element),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new L.Point(e.clientX,e.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),L.DomEvent.on(document,L.Draggable.MOVE[t.type],this._onMove,this).on(document,L.Draggable.END[t.type],this._onUp,this)}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),L.DomUtil.setPosition(this._element,this._newPos,this._element.rotate),this.fire("drag",t)},_onUp:function(){L.DomUtil.removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(L.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in L.Draggable.MOVE)L.DomEvent.off(document,L.Draggable.MOVE[t],this._onMove,this).off(document,L.Draggable.END[t],this._onUp,this);this._moved&&this._moving&&(L.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,L.Draggable._dragging=!1}}),L.Util.extend(L.Map.Drag.prototype,{_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t).fire("change")},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend").fire("changed");else{var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,r=o.multiplyBy(a/s),h=r.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,h),d=r.multiplyBy(l/h),u=l/(i.inertiaDeceleration*a),c=d.multiplyBy(-u/2).round();c.x||c.y?(c=e._limitOffset(c,e.options.maxBounds),L.Util.requestAnimFrame(function(){e.panBy(c,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend").fire("changed")}}}),L.Map.mergeOptions({doubleClickZoom:!0}),L.Map.DoubleClickZoom=L.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),L.Map.addInitHook("addHandler","doubleClickZoom",L.Map.DoubleClickZoom),L.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),L.Map.ScrollWheelZoom=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=L.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(L.bind(this._performZoom,this),n),L.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,a=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),L.Map.addInitHook("addHandler","scrollWheelZoom",L.Map.ScrollWheelZoom),L.Util.extend(L.Map.ScrollWheelZoom.prototype,{addHooks:function(){L.DomEvent.on(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:L.DomEvent.preventDefault},this),this._delta=0},removeHooks:function(){L.DomEvent.off(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:L.DomEvent.preventDefault},this)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();t.stop(),e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),L.extend(L.DomEvent,{_touchstart:L.Browser.msPointer?"MSPointerDown":L.Browser.pointer?"pointerdown":"touchstart",_touchend:L.Browser.msPointer?"MSPointerUp":L.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function n(t){var e;if(e=L.Browser.pointer?L.DomEvent._pointersCount:t.touches.length,!(e>1)){var i=Date.now(),n=i-(s||i);a=t.touches?t.touches[0]:t,r=n>0&&h>=n,s=i}}function o(){if(r&&!a.cancelBubble){if(L.Browser.pointer){var t,i,n={};for(i in a)t=a[i],n[i]=t&&t.bind?t.bind(a):t;a=n}a.type="dblclick",e(a),s=null}}var s,a,r=!1,h=250,l="_leaflet_",d=this._touchstart,u=this._touchend;return t[l+d+i]=n,t[l+u+i]=o,t[l+"dblclick"+i]=e,t.addEventListener(d,n,!1),t.addEventListener(u,o,!1),L.Browser.edge||t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],o=t[i+this._touchend+e],s=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,o,!1),L.Browser.edge||t.removeEventListener("dblclick",s,!1),this}}),L.extend(L.DomEvent,{POINTER_DOWN:L.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:L.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:L.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:L.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,e,i){var n=L.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;L.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+i]=n,t.addEventListener(this.POINTER_DOWN,n,!1),!this._pointerDocListener){var o=L.bind(this._globalPointerUp,this);document.documentElement.addEventListener(this.POINTER_DOWN,L.bind(this._globalPointerDown,this),!0),document.documentElement.addEventListener(this.POINTER_MOVE,L.bind(this._globalPointerMove,this),!0),document.documentElement.addEventListener(this.POINTER_UP,o,!0),document.documentElement.addEventListener(this.POINTER_CANCEL,o,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var i in this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=L.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=L.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),L.Map.mergeOptions({touchZoom:L.Browser.touch&&!L.Browser.android23,bounceAtZoomLimits:!0}),L.Map.TouchZoom=L.Handler.extend({addHooks:function(){L.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),L.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){L.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),L.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),L.DomEvent.on(document,"touchmove",this._onTouchMove,this).on(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>o||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),L.Util.cancelAnimFrame(this._animRequest);var a=L.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=L.Util.requestAnimFrame(a,this,!0),L.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,L.Util.cancelAnimFrame(this._animRequest),L.DomEvent.off(document,"touchmove",this._onTouchMove).off(document,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),L.Map.addInitHook("addHandler","touchZoom",L.Map.TouchZoom),L.Map.mergeOptions({tap:!0,tapTolerance:15}),L.Map.Tap=L.Handler.extend({addHooks:function(){L.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){L.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(L.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new L.Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&L.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(L.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),L.DomEvent.on(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),L.DomEvent.off(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&L.DomUtil.removeClass(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new L.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}),L.Browser.touch&&!L.Browser.pointer&&L.Map.addInitHook("addHandler","tap",L.Map.Tap),L.Map.mergeOptions({boxZoom:!0}),L.Map.BoxZoom=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(this._resetState(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void L.DomEvent.on(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=L.DomUtil.create("div","leaflet-zoom-box",this._container),L.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new L.Bounds(this._point,this._startPoint),i=e.getSize();L.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._container,"leaflet-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(L.bind(this._resetState,this),0);var e=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{
boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),L.Map.addInitHook("addHandler","boxZoom",L.Map.BoxZoom),L.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),L.Map.Keyboard=L.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),L.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),L.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){L.DomEvent.on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){L.DomEvent.off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=L.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}L.DomEvent.stop(t)}}}),L.Map.addInitHook("addHandler","keyboard",L.Map.Keyboard),L.Util.extend(L.Map.Keyboard.prototype,{keyCodes:L.Util.extend(L.Map.Keyboard.prototype.keyCodes,{left:[37,36,65],right:[39,35,68],down:[40,34,83],up:[38,33,87]})}),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),L.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=L.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(n);i&&L.DomUtil.setPosition(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),L.Util.extend(L.Handler.MarkerDrag.prototype,{_ischangeOffset:!1,addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new L.Draggable(t,t,!0),this._draggable._updatePosition=function(){var t=this._lastEvent;this.fire("predrag",t);var e=t.touches?t.touches[0]:t;this.fire("drag",{offset:this._startPoint.subtract(new L.Point(e.clientX,e.clientY))}),this._startPoint=new L.Point(e.clientX,e.clientY)}),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),L.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&L.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart");var t=this._marker.options,e=this._marker.getElement(),i=this._marker.dragging;if(t.raiseOnDrag&&!i._ischangeOffset){i._ischangeOffset=!0;var n=t.icon.options.iconSize,o=t.angleOffsetX,s=parseInt(n[0]);null==t.angleOffsetX&&(o=s/2);var a=parseInt(e.style.marginLeft)+o-5.5,r=parseInt(e.style.marginTop)+(n[1]-11)+5.5,h=L.DomUtil.create("div","");h.style.cssText="position:absolute;background:url("+t.raiseUrl+") ;width:11px;height:11px;overflow: hidden;margin-top:"+r+"px;margin-left:"+a+"px",L.Browser.ie?(h.style.transform=e.style.transform,h.style.top=e.style.top,h.style.left=e.style.left,h.style.position="absolute"):h.style.transform=e.style.transform,i._bottomEle=h,e.parentNode.appendChild(h),e.style.marginTop=parseInt(e.style.marginTop)-25+"px"}},_onDrag:function(t){this._transformPoints(t.offset,t),this._marker.fire("move",t).fire("drag",t)},_transformPoints:function(t,e){var i=this._marker;if(i._latlng){var n=i._map.containerPointToLatLng(i._map.latLngToContainerPoint(i._latlng)._subtract(t));i._latlng=n,e.latlng=n,i.setLatLng(n)}var o=this._marker.getElement(),s=this._marker.dragging;s._bottomEle&&(L.Browser.ie?(s._bottomEle.style.top=o.style.top,s._bottomEle.style.left=o.style.left):s._bottomEle.style.transform=o.style.transform)},_onDragEnd:function(t){t.latlng=this._marker._latlng,this._marker.fire("moveend").fire("dragend",t);var e=this._marker.getElement(),i=this._marker.dragging;if(e){i._ischangeOffset&&(i._ischangeOffset=!1,e.style.marginTop=parseInt(e.style.marginTop)+25+"px");var n=i._bottomEle;n&&(e.parentNode.removeChild(n),i._bottomEle=null)}}}),L.Handler.GroundImageDrag=L.Handler.MarkerDrag.extend({_transformPoints:function(t,e){var i=this._marker;if(i._latlng){var n=i._map.containerPointToLatLng(i._map.latLngToContainerPoint(i._latlng)._subtract(t));i._latlng=n,e.latlng=n;var o=i._bounds;o._northEast=i._map.containerPointToLatLng(i._map.latLngToContainerPoint(o._northEast)._subtract(t)),o._southWest=i._map.containerPointToLatLng(i._map.latLngToContainerPoint(o._southWest)._subtract(t)),i.setLatLng(n)}var s=this._marker.getElement(),a=this._marker.dragging;a._bottomEle&&(L.Browser.ie?(a._bottomEle.style.top=s.style.top,a._bottomEle.style.left=s.style.left):a._bottomEle.style.transform=s.style.transform)}}),L.Browser.svg?L.Path.include({_resetTransform:function(){this._renderer._rootGroup.setAttributeNS(null,"transform","")},_applyTransform:function(t){this._renderer._rootGroup.setAttributeNS(null,"transform","matrix("+t.join(" ")+")")}}):L.Path.include({_resetTransform:function(){this._skew&&(this._skew.on=!1,this._renderer._rootGroup.removeChild(this._skew),this._skew=null)},_applyTransform:function(t){var e=this._skew;e||(e=this._createElement("skew"),this._renderer._rootGroup.appendChild(e),e.style.behavior="url(#default#VML)",this._skew=e);var i=t[0].toFixed(8)+" "+t[1].toFixed(8)+" "+t[2].toFixed(8)+" "+t[3].toFixed(8)+" 0 0",n=Math.floor(t[4]).toFixed()+", "+Math.floor(t[5]).toFixed(),o=this._renderer._rootGroup.style,s=parseFloat(o.left),a=parseFloat(o.top),r=parseFloat(o.width),h=parseFloat(o.height);isNaN(s)&&(s=0),isNaN(a)&&(a=0),(isNaN(r)||!r)&&(r=1),(isNaN(h)||!h)&&(h=1);var l=(-s/r-.5).toFixed(8)+" "+(-a/h-.5).toFixed(8);e.on="f",e.matrix=i,e.origin=l,e.offset=n,e.on=!0}}),L.Path.include({_onMouseClick:function(t){this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)}}),L.Handler.PathDrag=L.Handler.extend({initialize:function(t){this._Object=t},addHooks:function(){var t=this,e=t._Object._path;t._draggable||(t._draggable=new L.Draggable(e,e,!0),t._draggable._onDown=function(e){if((!t._Object||!t._Object._map||1!=t._Object._map._toolOpened)&&(this._moved=!1,!L.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(L.Draggable._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&this._enabled&&(L.Draggable._dragging=!0,this._preventOutline&&L.DomUtil.preventOutline(this._element),!this._moving))){this.fire("down");var i=e.touches?e.touches[0]:e;this._startPoint=new L.Point(i.clientX,i.clientY),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),L.DomEvent.on(document,L.Draggable.MOVE[e.type],this._onMove,this).on(document,L.Draggable.END[e.type],this._onUp,this)}},t._draggable._updatePosition=function(){var t=this._lastEvent;this.fire("predrag",t);var e=t.touches?t.touches[0]:t;this.fire("drag",{offset:this._startPoint.subtract(new L.Point(e.clientX,e.clientY))}),this._startPoint=new L.Point(e.clientX,e.clientY)}),t._draggable.on({dragstart:t._onDragStart,drag:t._onDrag,dragend:t._onDragEnd},t).enable(),L.DomUtil.addClass(t._Object._renderer._rootGroup,"leaflet-path-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),L.Path.CANVAS||L.DomUtil.removeClass(this._Object._renderer._rootGroup,"leaflet-path-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(t){this._Object.fire("movestart").fire("dragstart")},_onDrag:function(t){this._transformPoints(t.offset),this._Object.fire("move",t).fire("drag",t)},_onDragEnd:function(t){this._Object.fire("moveend").fire("dragend")},_transformPoints:function(t){var e,i,n,o=this._Object;if(o._latlng=o._latlng||o._position,o._latlng)o._latlng=o._map.containerPointToLatLng(o._map.latLngToContainerPoint(o._latlng)._subtract(t)),o.setLatLng(o._latlng);else if(o._latlngs){for(o._latlngs=o._latlngs.length>1?o._latlngs:o._latlngs[0],e=0,i=o._latlngs.length;i>e;e++){var n=o._latlngs[e],s=o._map.latLngToContainerPoint(n)._subtract(t);o._latlngs[e]=o._map.containerPointToLatLng(s)}o.setLatLngs(o._latlngs)}}}),L.Path.prototype.drag=function(t){t?(this.dragging||(this.dragging=new L.Handler.PathDrag(this)),this.dragging.enable()):this.dragging&&this.dragging.disable()},L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon",offset:[-5,-6]})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,o=this._poly._latlngs.length>1?this._poly._latlngs:this._poly._latlngs[0];for(t=0,i=o.length;i>t;t++)n=this._createMarker(o[t],t),n.on("click",this._onMarkerClick,this),this._markers.push(n);var s,a;for(t=0,e=i-1;i>t;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(s=this._markers[e],a=this._markers[t],this._createMiddleMarker(s,a),this._updatePrevNext(s,a))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:this.options.icon});return i._origLatLng=t,i._index=e,i.on("mousedown",this._onMarkerStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(i),i},_fireEdit:function(){this._poly.fire("editend")},_onMarkerStart:function(t){this._poly.fire("editstart")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw(),this._poly.fire("editing")},_onMarkerClick:function(t){if(!(this._poly._latlngs.length<3)){var e=t.target,i=e._index;this._markerGroup.removeLayer(e),this._markers.splice(i,1),this._poly.spliceLatLngs(i,1),this._updateIndexes(i,-1),this._updatePrevNext(e._prev,e._next),e._middleLeft&&this._markerGroup.removeLayer(e._middleLeft),e._middleRight&&this._markerGroup.removeLayer(e._middleRight),e._prev&&e._next?this._createMiddleMarker(e._prev,e._next):e._prev?e._next||(e._prev._middleRight=null):e._next._middleLeft=null,this._poly.fire("removeedit")}},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,o,s=this._getMiddleLatLng(t,e),a=this._createMarker(s);a.setOpacity(.6),t._middleRight=e._middleLeft=a,n=function(){var i=e._index;a._index=i,a.on("click",this._onMarkerClick,this),s.lat=a.getLatLng().lat,s.lng=a.getLatLng().lng,this._poly.spliceLatLngs(i,0,s),this._markers.splice(i,0,a),a.setOpacity(1),this._updateIndexes(i,1),e._index++,this._updatePrevNext(t,a),this._updatePrevNext(a,e),this._poly.fire("editstart")},o=function(){a.off("dragstart",n,this),a.off("dragend",o,this),this._createMiddleMarker(t,a),this._createMiddleMarker(a,e)},i=function(){},a.on("dragstart",n,this).on("dragend",o,this),this._markerGroup.addLayer(a)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._poly._map,n=i.latLngToLayerPoint(t.getLatLng()),o=i.latLngToLayerPoint(e.getLatLng());return i.layerPointToLatLng(n._add(o)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),offset:new L.Point(-6,-5),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){for(var t=0,e=this._resizeMarkers.length;e>t;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createResizeMarker()},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart).off("drag",this._onMarkerDrag).off("dragend",this._onMarkerDragEnd)},_onMarkerDragStart:function(t){var e=t.target;e.setOpacity(0)},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._shape.redraw()},_onMarkerDragEnd:function(t){var e=t.target;e.setOpacity(1),this._shape.fire("edit")},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds();t.getCenter()},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;i>e;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target,n=i._cornerIndex;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,i,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds(),i=e.getCenter(),n.setLatLng(i)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,i=this._shape.getLatLngs(),n=this._shape.getBounds(),o=n.getCenter(),s=[],a=0,r=i.length;r>a;a++)e=[i[a].lat-o.lat,i[a].lng-o.lng],s.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(s),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds()},_getCorners:function(){var t=this._shape.getBounds(),e=t.getNorthWest(),i=t.getNorthEast(),n=t.getSouthEast(),o=t.getSouthWest();return[e,i,n,o]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;i>e;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(t);return this._map.unproject([i.x+e,i.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._shape.getLatLng(),i=e.distanceTo(t);this._shape.setRadius(i)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Control=L.Class.extend({options:{position:"topright"},initialize:function(t){L.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return L.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),L.control=function(t){return new L.Control(t)},L.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var s=i+t+" "+i+o;e[t+o]=L.DomUtil.create("div",s,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=L.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){L.DomUtil.remove(this._controlContainer)}}),L.Control.Zoom=L.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=L.DomUtil.create("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var s=L.DomUtil.create("a",i,n);return s.innerHTML=t,s.href="#",s.title=e,s.setAttribute("role","button"),s.setAttribute("aria-label",e),L.DomEvent.on(s,"mousedown dblclick",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.stop).on(s,"click",o,this).on(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,e),L.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&L.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&L.DomUtil.addClass(this._zoomInButton,e)}}),L.control.zoom=function(t){return new L.Control.Zoom(t)},L.Util.extend(L.Control.prototype,{options:L.Util.extend(L.Control.prototype.options,{position:[0,0],visible:!0}),setPosition:function(t){this._map;return this.options.position=t,this._calculatePosition(),this},setOffset:function(t){this.options.offset=t,this._calculatePosition()},visible:function(t){var e=this._container;e&&(t?e.style.visibility="inherit":e.style.visibility="hidden"),this.options.visible=t},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition();L.DomUtil.addClass(e,"leaflet-control");var n=L.DomUtil.create("div","leaflet-top leaflet-left",t._controlContainer);return i.indexOf&&-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this.visible(this.options.visible),this._calculatePosition(),t.on("resize",this._calculatePosition,this),this},_calculatePosition:function(){var t=this,e=t._container;if(e&&t._map){var i=t.options,n=t._map.getSize(),o=n.x,s=n.y,a=o*i.position[0],r=s*i.position[1],h=e.offsetWidth||e.style.width,l=e.offsetHeight||e.style.height;switch(i.position.join(",")){case"0,0":break;case"0.5,0":a-=h/2;break;case"1,0":a-=h;break;case"1,0.5":a-=h,r-=l/2;break;case"1,1":a-=h,r-=l;break;case"0.5,1":a-=h/2,r-=l;break;case"0,0.5":r-=l/2;break;case"0,1":r-=l;break;default:r-=l/2}a+=Math.floor(i.offset.x),r+=Math.floor(i.offset.y),e.style.left=a+"px",e.style.top=r+"px"}},remove:function(){return this._map?(L.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("resize",this._calculatePosition,this),this._map=null,this):this}}),L.Util.extend(L.Control.Zoom.prototype,{options:L.Util.extend(L.Control.Zoom.prototype.options,{position:[0,0],offset:{x:10,y:10}})}),L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){L.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),L.control.attribution=function(t){return new L.Control.Attribution(t)},L.Util.extend(L.Control.Attribution.prototype,{options:L.Util.extend(L.Control.Attribution.prototype.options,{position:[1,1],offset:{x:-5,y:-5},prefix:""}),onAdd:function(t){return this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addAttribution:function(t){return t||t.id?(this._attributions[t.id]=t,this._update(),this):this},removeAttribution:function(t){return t&&this._attributions[t]?(this._attributions[t]=undefined,this._update(),this):void 0},getAttribution:function(t){return this._attributions[t]},getAttributions:function(){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(this._attributions[e]);return t},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(this._attributions[e].content);this._container.innerHTML=t.join(" | "),this._calculatePosition()}}}),L.Control.Scale=L.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=L.DomUtil.create("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=L.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=L.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=1e3>e?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),L.control.scale=function(t){return new L.Control.Scale(t)},L.Util.extend(L.Control.Scale.prototype,{options:L.Util.extend(L.Control.Scale.prototype.options,{position:[0,1],offset:{x:5,y:-5},maxWidth:150}),_updateMetric:function(t){var e=this._getRoundNum(t),i=1e3>e?e+"":e/1e3+"";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+"",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+"",n/o))}}),L.PosAnimation=L.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=L.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;i>e?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),L.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),L.Map.include({setView:function(t,e,i){if(e=e===undefined?this._zoom:this._limitZoom(e),t=this._limitCenter(L.latLng(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==undefined&&(i.zoom=L.extend({animate:i.animate},i.zoom),i.pan=L.extend({animate:i.animate,duration:i.duration},i.pan));var n=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(n)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this.fire("moveend").fire("changed"),this},panBy:function(t,e){if(t=L.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend").fire("changed");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new L.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart").fire("changed"),e.animate!==!1){L.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend").fire("changed");return this},_onPanTransitionStep:function(){this.fire("move").fire("change")},_onPanTransitionEnd:function(){L.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend").fire("changed")}}),L.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=L.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=L.bind(this._handleGeolocationResponse,this),i=L.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new L.LatLng(e,i),o=n.toBounds(t.coords.accuracy),s=this._locateOptions;if(s.setView){var a=this.getBoundsZoom(o);this.setView(n,s.maxZoom?Math.min(a,s.maxZoom):a)}var r={latlng:n,bounds:o,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(r[h]=t.coords[h]);this.fire("locationfound",r)}}),L.Label=(L.Layer?L.Layer:L.Class).extend({includes:L.Mixin.Events,options:{className:"",clickable:!0,direction:"right",noHide:!1,offset:[0,0],anchor:[0,0],opacity:1,zoomAnimation:!0,fontName:"",fontColor:"#ffffff",fontSize:12,fontBold:!0,title:"",type:"0"},initialize:function(t,e){L.setOptions(this,t),this._source=e,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._pane=this.options.pane?t._panes[this.options.pane]:this._source instanceof L.Marker?t._panes.markerPane:t._panes.popupPane,this._parentContainer||this._initLayout(),this._pane.appendChild(this._parentContainer),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),t.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&t.on("zoom",this._zoomAnimation,this)},onRemove:function(t){this._pane.removeChild(this._parentContainer),t.off({zoom:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(t){return this._latlng=L.latLng(t),
this._map&&this._updatePosition(),this},getLatLng:function(){return this._latlng},setContent:function(t){return this._previousContent=this._content,this._content=t,this._updateContent(),this},close:function(){var t=this._map;t&&t.removeLayer(this)},updateZIndex:function(t){this._zIndex=t,this._parentContainer&&this._zIndex&&(this._parentContainer.style.zIndex=t)},setOpacity:function(t){this.options.opacity=t,this._container&&L.DomUtil.setOpacity(this._container,t)},getOptions:function(){return this.options},getLabelSize:function(){return[this._labelWidth,this._labelHeight]},getElement:function(){return this._parentContainer},_initLayout:function(){this._parentContainer=L.DomUtil.create("div",""),this._parentContainer.style.position="absolute",this._parentContainer.style.zIndex=210,this._container=L.DomUtil.create("div","leafletmap-label "+this.options.className+" leafletmap-zoom-animated"),this._container.style.color=this.options.fontColor,this._container.style.font=this.options.fontSize+'px "'+this.options.fontName+'"',this._container.style.fontWeight=this.options.fontBold?"bold":"normal",this._container.style.border="1px solid rgb(128, 128, 128)",this._container.style.backgroundColor="rgb(255, 255, 255)",this._container.style.padding="1px 2px",this._container.style.whiteSpace="nowrap",this._parentContainer.appendChild(this._container),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._parentContainer.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._parentContainer.style.visibility="")},_updateContent:function(){this._content&&this._map&&("0"==this.options.type?(this._container.className=this.options.className+" leafletmap-zoom-animated",this._container.style.color=this.options.fontColor,this._container.style.font=this.options.fontSize+'px "'+this.options.fontName+'"',this._container.style.fontWeight=this.options.fontBold?"bold":"normal",this._container.innerHTML=this._content,this._prevContent=this._content):(this._parentContainer.removeChild(this._container),"string"==typeof this._content?(this._container=L.DomUtil.create("div",""),this._container.innerHTML=this._content):this._container=this._content,this._container.style.whiteSpace="nowrap",this._parentContainer.appendChild(this._container)),this._labelWidth=this._container.offsetWidth,this._labelHeight=this._container.offsetHeight)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},_setPosition:function(t){var e=this._map,i=this._parentContainer,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),s=this.options.direction,a=this._labelWidth,r=(this._labelHeight,L.point(this.options.offset)),h=L.point(this.options.anchor);"right"===s||"auto"===s&&o.x<n.x?(L.DomUtil.removeClass(i,"leafletmap-label-left"),t=t.add(r)):(L.DomUtil.addClass(i,"leafletmap-label-left"),L.DomUtil.removeClass(i,"leafletmap-label-right"),t=t.add(L.point(-r.x-a,r.y))),t=t.subtract(h),L.DomUtil.setPosition(i,t)},_zoomAnimation:function(t){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPosition(e)},_onMoveEnd:function(){this._updatePosition()},_onViewReset:function(t){t&&t.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var t=this._parentContainer,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(t,"leafletmap-clickable"),L.DomEvent.on(t,"click",this._onMouseClick,this),L.DomEvent.on(t,"contextmenu",function(t){L.DomEvent.preventDefault(t)},this);for(var i=0;i<e.length;i++)L.DomEvent.on(t,e[i],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var t=this._parentContainer,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.removeClass(t,"leafletmap-clickable"),L.DomEvent.off(t,"click",this._onMouseClick,this);for(var i=0;i<e.length;i++)L.DomEvent.off(t,e[i],this._fireMouseEvent,this)}},_onMouseClick:function(t){this.hasEventListeners(t.type)&&L.DomEvent.stopPropagation(t),this.fire(t.type,{originalEvent:t})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&L.DomEvent.preventDefault(t),"mousedown"!==t.type?L.DomEvent.stopPropagation(t):L.DomEvent.preventDefault(t)}}),L.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(t){this._labelNoHide!==t&&(this._labelNoHide=t,t?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(t,e){return this._labelNoHide=e.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),"object"==typeof t?this.label=t:this.label=new L.Label(e,this).setContent(t),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),L.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(t){this.label.setLatLng(t.latlng)}},L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include(L.BaseMarkerMethods),L.Marker.include({_originalUpdateZIndex:L.Marker.prototype._updateZIndex,_updateZIndex:function(t){var e=this._zIndex;this._originalUpdateZIndex(t),this.label&&this.label.updateZIndex(e)},_originalSetOpacity:L.Marker.prototype.setOpacity,setOpacity:function(t,e){this.options.labelHasSemiTransparency=e,this._originalSetOpacity(t)},_originalUpdateOpacity:L.Marker.prototype._updateOpacity,_updateOpacity:function(){var t=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:t)},_originalSetLatLng:L.Marker.prototype.setLatLng,setLatLng:function(t){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(t)}}),L.CircleMarker.mergeOptions({labelAnchor:new L.Point(0,0)}),L.CircleMarker.include(L.BaseMarkerMethods),L.Path.include({bindLabel:function(t,e){return this.label&&this.label.options===e||(this.label=new L.Label(e,this)),this.label.setContent(t),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(t){this.label&&this.label.setContent(t)},_showLabel:function(t){this.label.setLatLng(t.latlng),this._map.showLabel(this.label)},_moveLabel:function(t){this.label.setLatLng(t.latlng)},_hideLabel:function(){this.label.close()}}),L.Map.include({showLabel:function(t){return this.addLayer(t)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(t,e){return this.invoke("bindLabel",t,e)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(t){this.invoke("updateLabelContent",t)}}),function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(require("leaflet"))),"undefined"!=typeof e&&e.L&&t(e.L)}(function(t){t.Editable=t.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:t.Polygon,polylineClass:t.Polyline,markerClass:t.Marker,rectangleClass:t.Rectangle,circleClass:t.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:undefined,featuresLayer:undefined,polylineEditorClass:undefined,polygonEditorClass:undefined,markerEditorClass:undefined,rectangleEditorClass:undefined,circleEditorClass:undefined,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(e,i){t.setOptions(this,i),this._lastZIndex=this.options.zIndex,this.map=e,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(t,e){e=e||{},e.editTools=this,this.fire(t,e),this.map.fire(t,e)},createLineGuide:function(){var e=t.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return t.polyline([],e)},createVertexIcon:function(e){return t.Browser.touch?new t.Editable.TouchVertexIcon(e):new t.Editable.VertexIcon(e)},createEditLayer:function(){return this.options.editLayer||(new t.LayerGroup).addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||(new t.LayerGroup).addTo(this.map)},moveForwardLineGuide:function(t){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(t){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(t){this.forwardLineGuide._latlngs[0]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(t){this.backwardLineGuide._latlngs[0]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=t.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(e){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),e.reset(),this._drawingEditor=e,this.map.on("mousemove touchmove",e.onDrawingMouseMove,e),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),t.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(e){this.unblockEvents(),t.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,e=e||this._drawingEditor,e&&(this.map.off("mousemove touchmove",e.onDrawingMouseMove,e),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),e===this._drawingEditor&&(delete this._drawingEditor,e._drawing&&e.cancelDrawing()))},onMousedown:function(t){this._mouseDown=t,this._drawingEditor.onDrawingMouseDown(t)},onMouseup:function(e){if(this._mouseDown){var i=this._drawingEditor,n=this._mouseDown;if(this._mouseDown=null,i.onDrawingMouseUp(e),this._drawingEditor!==i)return;var o=t.point(n.originalEvent.clientX,n.originalEvent.clientY),s=t.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(o);Math.abs(s)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(e)}},drawing:function(){return this._drawingEditor&&this._drawingEditor.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(t){this._drawingEditor&&this._drawingEditor.commitDrawing(t)},connectCreatedToMap:function(t){return this.featuresLayer.addLayer(t)},startPolyline:function(t,e){var i=this.createPolyline([],e);return i.enableEdit(this.map).newShape(t),i},startPolygon:function(t,e){var i=this.createPolygon([],e);return i.enableEdit(this.map).newShape(t),i},startMarker:function(t,e){t=t||this.map.getCenter().clone();var i=this.createMarker(t,e);return i.enableEdit(this.map).startDrawing(),i},startRectangle:function(e,i){var n=e||t.latLng([0,0]),o=new t.LatLngBounds(n,n),s=this.createRectangle(o,i);return s.enableEdit(this.map).startDrawing(),s},startCircle:function(t,e){t=t||this.map.getCenter().clone();var i=this.createCircle(t,e);return i.enableEdit(this.map).startDrawing(),i},startHole:function(t,e){t.newHole(e)},createLayer:function(e,i,n){n=t.Util.extend({editOptions:{editTools:this}},n);var o=new e(i,n);return this.fireAndForward("editable:created",{layer:o}),o},createPolyline:function(t,e){return this.createLayer(e&&e.polylineClass||this.options.polylineClass,t,e)},createPolygon:function(t,e){return this.createLayer(e&&e.polygonClass||this.options.polygonClass,t,e)},createMarker:function(t,e){return this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)},createRectangle:function(t,e){return this.createLayer(e&&e.rectangleClass||this.options.rectangleClass,t,e)},createCircle:function(t,e){return this.createLayer(e&&e.circleClass||this.options.circleClass,t,e)}}),t.extend(t.Editable,{makeCancellable:function(t){t.cancel=function(){t._cancelled=!0}}}),t.Map.mergeOptions({editToolsClass:t.Editable,editable:!1,editOptions:{}}),t.Editable.VertexIcon=t.DivIcon.extend({options:{iconSize:new t.Point(8,8)}}),t.Editable.TouchVertexIcon=t.Editable.VertexIcon.extend({options:{iconSize:new t.Point(20,20)}}),t.Editable.VertexMarker=t.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(e,i,n,o){this.latlng=e,this.latlngs=i,this.editor=n,t.Marker.prototype.initialize.call(this,e,o),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(n.tools._lastZIndex+1)},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.addMiddleMarkers()},onRemove:function(e){this.middleMarker&&this.middleMarker["delete"](),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),t.Marker.prototype.onRemove.call(this,e)},onDrag:function(e){e.vertex=this,this.editor.onVertexMarkerDrag(e);var i=t.DomUtil.getPosition(this._icon),n=this._map.layerPointToLatLng(i);this.latlng.update(n),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();var o=this.getNext();o&&o.middleMarker&&o.middleMarker.updateLatLng()},onDragStart:function(t){t.vertex=this,this.editor.onVertexMarkerDragStart(t)},onDragEnd:function(t){t.vertex=this,this.editor.onVertexMarkerDragEnd(t)},onClick:function(t){t.vertex=this,this.editor.onVertexMarkerClick(t)},onMouseup:function(e){t.DomEvent.stop(e),e.vertex=this,this.editor.map.fire("mouseup",e)},onContextMenu:function(t){t.vertex=this,this.editor.onVertexMarkerContextMenu(t)},onMouseDown:function(t){t.vertex=this,this.editor.onVertexMarkerMouseDown(t)},"delete":function(){var t=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),t&&t.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t-1;0===t&&this.editor.CLOSED&&(e=this.getLastIndex());var i=this.latlngs[e];return i?i.__vertex:void 0}},getNext:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t+1;t===this.getLastIndex()&&this.editor.CLOSED&&(e=0);var i=this.latlngs[e];return i?i.__vertex:void 0}},addMiddleMarker:function(t){this.editor.hasMiddleMarkers()&&(t=t||this.getPrevious(),t&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(t,this,this.latlngs,this.editor)))},addMiddleMarkers:function(){if(this.editor.hasMiddleMarkers()){var t=this.getPrevious();t&&this.addMiddleMarker(t);var e=this.getNext();e&&e.resetMiddleMarker()}},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker["delete"](),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},"continue":function(){if(this.editor.continueBackward){var t=this.getIndex();0===t?this.editor.continueBackward(this.latlngs):t===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}}),t.Editable.mergeOptions({vertexMarkerClass:t.Editable.VertexMarker}),t.Editable.MiddleMarker=t.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(e,i,n,o,s){this.left=e,this.right=i,this.editor=o,this.latlngs=n,t.Marker.prototype.initialize.call(this,this.computeLatLng(),s),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){var e=this._map.latLngToContainerPoint(this.left.latlng),i=this._map.latLngToContainerPoint(this.right.latlng),n=t.point(this.options.icon.options.iconSize);e.distanceTo(i)<3*n.x?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){var t=this.editor.map.latLngToContainerPoint(this.left.latlng),e=this.editor.map.latLngToContainerPoint(this.right.latlng),i=(t.y+e.y)/2,n=(t.x+e.x)/2;return this.editor.map.containerPointToLatLng([n,i])},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),t.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),e.on("zoomend",this.setVisibility,this)},onRemove:function(e){delete this.right.middleMarker,t.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),e.off("zoomend",this.setVisibility,this),t.Marker.prototype.onRemove.call(this,e)},onMouseDown:function(e){var i=t.DomUtil.getPosition(this._icon),n=this.editor.map.layerPointToLatLng(i);if(e={originalEvent:e,latlng:n},0!==this.options.opacity&&(t.Editable.makeCancellable(e),this.editor.onMiddleMarkerMouseDown(e),!e._cancelled)){this.latlngs.splice(this.index(),0,e.latlng),this.editor.refresh();var o=this._icon,s=this.editor.addVertexMarker(e.latlng,this.latlngs),a=s._icon.parentNode;a.removeChild(s._icon),s._icon=o,a.appendChild(s._icon),s._initIcon(),s._initInteraction(),s.setOpacity(1),t.Draggable._dragging=!1,s.dragging._draggable._onDown(e.originalEvent),this["delete"]()}},"delete":function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),t.Editable.mergeOptions({middleMarkerClass:t.Editable.MiddleMarker}),t.Editable.BaseEditor=t.Handler.extend({initialize:function(e,i,n){t.setOptions(this,n),this.map=e,this.feature=i,this.feature.editor=this,this.editLayer=new t.LayerGroup,this.tools=this.options.editTools||e.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:function(){},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(t,e){e=e||{},e.layer=this.feature,this.feature.fire(t,e),this.tools.fireAndForward(t,e)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(t){this.fireAndForward("editable:drawing:commit",t)},onDrawingMouseDown:function(t){this.fireAndForward("editable:drawing:mousedown",t)},onDrawingMouseUp:function(t){this.fireAndForward("editable:drawing:mouseup",t)},startDrawing:function(){this._drawing||(this._drawing=t.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(t){this.onCommitDrawing(t),this.endDrawing()},cancelDrawing:function(){t.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(e){this.drawing()&&(t.Editable.makeCancellable(e),this.fireAndForward("editable:drawing:click",e),e._cancelled||(this.isConnected()||this.connect(e),this.processDrawingClick(e)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(t){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(t){this.fireAndForward("editable:drawing:move",t)},onDrawingMouseMove:function(t){this.onMove(t)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(t){this.onEditing(),this.fireAndForward("editable:dragstart",t)},onDrag:function(t){this.onMove(t),this.fireAndForward("editable:drag",t)},onDragEnd:function(t){this.fireAndForward("editable:dragend",t)}}),t.Editable.MarkerEditor=t.Editable.BaseEditor.extend({onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&this.feature.setLatLng(e.latlng)},processDrawingClick:function(t){this.fireAndForward("editable:drawing:clicked",t),this.commitDrawing(t)},connect:function(e){e&&(this.feature._latlng=e.latlng),t.Editable.BaseEditor.prototype.connect.call(this,e)}}),t.Editable.PathEditor=t.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return t.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&this.initVertexMarkers(),this},initVertexMarkers:function(e){if(this.enabled())if(e=e||this.getLatLngs(),t.Polyline._flat(e))this.addVertexMarkers(e);else for(var i=0;i<e.length;i++)this.initVertexMarkers(e[i])},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(t,e){return new this.tools.options.vertexMarkerClass(t,e,this)},addVertexMarkers:function(t){for(var e=0;e<t.length;e++)this.addVertexMarker(t[e],t)},refreshVertexMarkers:function(t){t=t||this.getDefaultLatLngs();for(var e=0;e<t.length;e++)t[e].__vertex.update()},addMiddleMarker:function(t,e,i){return new this.tools.options.middleMarkerClass(t,e,i,this)},onVertexMarkerClick:function(e){if(t.Editable.makeCancellable(e),this.fireAndForward("editable:vertex:click",e),!(e._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)){var i,n=e.vertex.getIndex();e.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(e):e.originalEvent.altKey?this.onVertexMarkerAltClick(e):e.originalEvent.shiftKey?this.onVertexMarkerShiftClick(e):e.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(e):n===e.vertex.getLastIndex()&&this._drawing===t.Editable.FORWARD?n>=this.MIN_VERTEX-1&&(i=!0):0===n&&this._drawing===t.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX?i=!0:0===n&&this._drawing===t.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?i=!0:this.onVertexRawMarkerClick(e),this.fireAndForward("editable:vertex:clicked",e),i&&this.commitDrawing(e)}},onVertexRawMarkerClick:function(t){this.fireAndForward("editable:vertex:rawclick",t),t._cancelled||this.vertexCanBeDeleted(t.vertex)&&t.vertex["delete"]()},vertexCanBeDeleted:function(t){return t.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(t){this.fireAndForward("editable:vertex:deleted",t)},onVertexMarkerCtrlClick:function(t){this.fireAndForward("editable:vertex:ctrlclick",t)},onVertexMarkerShiftClick:function(t){this.fireAndForward("editable:vertex:shiftclick",t)},onVertexMarkerMetaKeyClick:function(t){this.fireAndForward("editable:vertex:metakeyclick",t)},onVertexMarkerAltClick:function(t){this.fireAndForward("editable:vertex:altclick",t)},onVertexMarkerContextMenu:function(t){this.fireAndForward("editable:vertex:contextmenu",t)},onVertexMarkerMouseDown:function(t){this.fireAndForward("editable:vertex:mousedown",t)},onMiddleMarkerMouseDown:function(t){this.fireAndForward("editable:middlemarker:mousedown",t)},onVertexMarkerDrag:function(t){this.onMove(t),this.feature._bounds&&this.extendBounds(t),this.fireAndForward("editable:vertex:drag",t)},onVertexMarkerDragStart:function(t){this.fireAndForward("editable:vertex:dragstart",t)},onVertexMarkerDragEnd:function(t){this.fireAndForward("editable:vertex:dragend",t)},setDrawnLatLngs:function(t){this._drawnLatLngs=t||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),t.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),t.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(e){this._drawing===t.Editable.FORWARD?this._drawnLatLngs.push(e):this._drawnLatLngs.unshift(e),this.feature._bounds.extend(e),this.addVertexMarker(e,this._drawnLatLngs),this.refresh()},newPointForward:function(t){this.addLatLng(t),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t)},newPointBackward:function(t){this.addLatLng(t),this.tools.anchorBackwardLineGuide(t)},push:function(e){return e?void(this._drawing===t.Editable.FORWARD?this.newPointForward(e):this.newPointBackward(e)):console.error("L.Editable.PathEditor.push expect a vaild latlng as parameter")},removeLatLng:function(t){t.__vertex["delete"](),this.refresh()},pop:function(){if(!(this._drawnLatLngs.length<=1)){var e;return e=this._drawing===t.Editable.FORWARD?this._drawnLatLngs[this._drawnLatLngs.length-1]:this._drawnLatLngs[0],this.removeLatLng(e),this._drawing===t.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),e}},processDrawingClick:function(e){e.vertex&&e.vertex.editor===this||(this._drawing===t.Editable.FORWARD?this.newPointForward(e.latlng):this.newPointBackward(e.latlng),this.fireAndForward("editable:drawing:clicked",e))},onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&(this.tools.moveForwardLineGuide(e.latlng),this.tools.moveBackwardLineGuide(e.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(t){var e=this.addNewEmptyShape();e&&(this.setDrawnLatLngs(e[0]||e),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:e}),t&&this.newPointForward(t))},deleteShape:function(e,i){var n={shape:e};return t.Editable.makeCancellable(n),this.fireAndForward("editable:shape:delete",n),n._cancelled?void 0:(e=this._deleteShape(e,i),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:e}),e)},_deleteShape:function(t,e){if(e=e||this.getLatLngs(),e.length){var i=this,n=function(t,e){return e=t.splice(0,Number.MAX_VALUE)},o=function(t,e){return t.splice(t.indexOf(e),1),t.length||i._deleteShape(t),e};if(e===t)return n(e,t);for(var s=0;s<e.length;s++){if(e[s]===t)return o(e,t);if(-1!==e[s].indexOf(t))return o(e[s],t)}}},deleteShapeAt:function(t){var e=this.feature.shapeAt(t);return e?this.deleteShape(e):void 0},appendShape:function(t){this.insertShape(t)},prependShape:function(t){this.insertShape(t,0)},insertShape:function(t,e){this.ensureMulti(),t=this.formatShape(t),"undefined"==typeof e&&(e=this.feature._latlngs.length),this.feature._latlngs.splice(e,0,t),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(t){this.feature._bounds.extend(t.vertex.latlng)},onDragStart:function(e){this.editLayer.clearLayers(),t.Editable.BaseEditor.prototype.onDragStart.call(this,e)},onDragEnd:function(e){this.initVertexMarkers(),t.Editable.BaseEditor.prototype.onDragEnd.call(this,e)}}),t.Editable.PolylineEditor=t.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=t.Editable.BACKWARD,this.startDrawing()},continueBackward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(t[0])),this.startDrawingBackward())},continueForward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t[t.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(e){return e=e||this.feature._latlngs,!e.length||e[0]instanceof t.LatLng?e:this.getDefaultLatLngs(e[0])},ensureMulti:function(){this.feature._latlngs.length&&t.Polyline._flat(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},formatShape:function(e){return t.Polyline._flat(e)?e:e[0]?this.formatShape(e[0]):void 0},splitShape:function(e,i){if(i&&!(i>=e.length-1)){this.ensureMulti();var n=this.feature._latlngs.indexOf(e);if(-1!==n){var o=e.slice(0,i+1),s=e.slice(i);s[0]=t.latLng(s[0].lat,s[0].lng,s[0].alt),this.feature._latlngs.splice(n,1,o,s),this.refresh(),this.reset()}}}}),t.Editable.PolygonEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(e){t.Editable.PathEditor.prototype.newPointForward.call(this,e),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(e),2===this._drawnLatLngs.length&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(t){this.ensureNotFlat();var e=this.feature.shapeAt(t);if(e){var i=[];return e.push(i),i}},newHole:function(t){var e=this.addNewEmptyHole(t);e&&(this.setDrawnLatLngs(e),this.startDrawingForward(),t&&this.newPointForward(t))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){var t=[];return this.appendShape(t),
t}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&t.Polyline._flat(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){(!this.feature._latlngs.length||t.Polyline._flat(this.feature._latlngs))&&(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(e){var i=this.feature.parentShape(e.latlngs),n=t.Util.indexOf(i,e.latlngs);return n>0?!0:t.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,e)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:function(e){return!t.Polyline._flat(e)||e[0]&&0===e[0].length?e:[e]}}),t.Editable.RectangleEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(e){var i=e.vertex.getIndex(),n=e.vertex.getNext(),o=e.vertex.getPrevious(),s=(i+2)%4,a=e.vertex.latlngs[s],r=new t.LatLngBounds(e.latlng,a);o.latlng.update([e.latlng.lat,a.lng]),n.latlng.update([a.lat,e.latlng.lng]),this.updateBounds(r),this.refreshVertexMarkers()},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this.connect();var i=this.getDefaultLatLngs();3===i.length&&i.push(e.latlng);var n=new t.LatLngBounds(e.latlng,e.latlng);this.updateBounds(n),this.updateLatLngs(n),this.refresh(),this.reset(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),i[3].__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},getDefaultLatLngs:function(t){return t||this.feature._latlngs[0]},updateBounds:function(t){this.feature._bounds=t},updateLatLngs:function(t){for(var e=this.getDefaultLatLngs(),i=this.feature._boundsToLatLngs(t),n=0;n<e.length;n++)e[n].update(i[n])}}),t.Editable.CircleEditor=t.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(e,i,n){t.Editable.PathEditor.prototype.initialize.call(this,e,i,n),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x+t,e.y-t])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(e){1===e.vertex.getIndex()?this.resize(e):this.updateResizeLatLng(e),t.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,e)},resize:function(t){var e=this.feature._latlng.distanceTo(t.latlng);this.feature.setRadius(e),this.feature._resizeLatLng=this._resizeLatLng},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this._resizeLatLng.update(e.latlng),this.feature._latlng.update(e.latlng),this.connect(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},onDrag:function(e){t.Editable.PathEditor.prototype.onDrag.call(this,e),this.feature.dragging.updateLatLng(this._resizeLatLng)}});var e={createEditor:function(t){t=t||this._map;var e=(this.options.editOptions||{}).editTools||t.editTools;if(!e)throw Error("Unable to detect Editable instance.");var i=this.options.editorClass||this.getEditorClass(e);return new i(t,this,this.options.editOptions)},enableEdit:function(t){return this.editor||this.createEditor(t),this.editor.enable(),this.editor},editEnabled:function(){return this.editor&&this.editor.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},i={getEditorClass:function(e){return e&&e.options.polylineEditorClass?e.options.polylineEditorClass:t.Editable.PolylineEditor},shapeAt:function(e,i){var n=null;if(i=i||this._latlngs,!i.length)return n;if(t.Polyline._flat(i)&&this.isInLatLngs(e,i))n=i;else for(var o=0;o<i.length;o++)if(this.isInLatLngs(e,i[o]))return i[o];return n},isInLatLngs:function(e,i){if(!i)return!1;var n,o,s,a,r=[],h=this._clickTolerance();if(this._projectLatlngs(i,r,this._pxBounds),r=r[0],a=this._map.latLngToLayerPoint(e),!this._pxBounds.contains(a))return!1;for(n=1,s=r.length,o=0;s>n;o=n++)if(t.LineUtil.pointToSegmentDistance(a,r[o],r[n])<=h)return!0;return!1}},n={getEditorClass:function(e){return e&&e.options.polygonEditorClass?e.options.polygonEditorClass:t.Editable.PolygonEditor},shapeAt:function(e,i){var n=null;if(i=i||this._latlngs,!i.length)return n;if(t.Polyline._flat(i)&&this.isInLatLngs(e,i))n=i;else if(t.Polyline._flat(i[0])&&this.isInLatLngs(e,i[0]))n=i;else for(var o=0;o<i.length;o++)if(this.isInLatLngs(e,i[o][0]))return i[o];return n},isInLatLngs:function(t,e){var i,n,o,s,a,r=!1;for(o=0,a=e.length,s=a-1;a>o;s=o++)i=e[o],n=e[s],i.lat>t.lat!=n.lat>t.lat&&t.lng<(n.lng-i.lng)*(t.lat-i.lat)/(n.lat-i.lat)+i.lng&&(r=!r);return r},parentShape:function(e,i){if(i=i||this._latlngs){var n=t.Util.indexOf(i,e);if(-1!==n)return i;for(var o=0;o<i.length;o++)if(n=t.Util.indexOf(i[o],e),-1!==n)return i[o]}}},o={getEditorClass:function(e){return e&&e.options.markerEditorClass?e.options.markerEditorClass:t.Editable.MarkerEditor}},s={getEditorClass:function(e){return e&&e.options.rectangleEditorClass?e.options.rectangleEditorClass:t.Editable.RectangleEditor}},a={getEditorClass:function(e){return e&&e.options.circleEditorClass?e.options.circleEditorClass:t.Editable.CircleEditor}},r=function(){this.on("add",this._onEditableAdd)};t.Polyline&&(t.Polyline.include(e),t.Polyline.include(i),t.Polyline.addInitHook(r)),t.Polygon&&(t.Polygon.include(e),t.Polygon.include(n)),t.Marker&&(t.Marker.include(e),t.Marker.include(o),t.Marker.addInitHook(r)),t.Rectangle&&(t.Rectangle.include(e),t.Rectangle.include(s)),t.Circle&&(t.Circle.include(e),t.Circle.include(a)),t.LatLng.prototype.update=function(e){e=t.latLng(e),this.lat=e.lat,this.lng=e.lng}},window),L.Util.extend(L.Editable.prototype,{createMarker:function(t,e){var i=L.VectorIcon.icon({icon:"",iconSize:[25,41],prefix:"fa",markerColor:e.markerColor,strokewidth:3,strokecolor:e.strokecolor,alpha:.9,anchor:{x:12,y:40},spin:!0,type:1});return e=e||{},e.icon=i,this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)}}),L.Util.extend(L.Editable.VertexMarker.prototype,{initialize:function(t,e,i,n){this.latlng=t,this.latlngs=e,this.editor=i,L.Marker.prototype.initialize.call(this,t,n),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.options.icon.options.anchor=n.anchor,this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(i.tools._lastZIndex+1)}}),L.Util.extend(L.Editable.MiddleMarker.prototype,{initialize:function(t,e,i,n,o){this.left=t,this.right=e,this.editor=n,this.latlngs=i,L.Marker.prototype.initialize.call(this,this.computeLatLng(),o),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.options.icon.options.anchor=o.anchor,this.editor.editLayer.addLayer(this),this.setVisibility()}}),L.Util.extend(L.Editable.PathEditor.prototype,{addVertexMarker:function(t,e){var i={anchor:{x:5,y:5}};return new this.tools.options.vertexMarkerClass(t,e,this,i)},addMiddleMarker:function(t,e,i){var n={anchor:{x:5,y:5}};return new this.tools.options.middleMarkerClass(t,e,i,this,n)},startDrawing:function(){this.map.doubleClickZoom.disable(),this._drawnLatLngs||this.setDrawnLatLngs(),L.Editable.BaseEditor.prototype.startDrawing.call(this)}})}(window,document);