// doT.js
// 2011-2014, Laura Doktorova, https://github.com/olado/doT
// Licensed under the MIT license.
(function(){function n(b,a,d){return("string"===typeof a?a:a.toString()).replace(b.define||h,function(a,c,e,g){0===c.indexOf("def.")&&(c=c.substring(4));c in d||(":"===e?(b.defineParams&&g.replace(b.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=g)):(new Function("def","def['"+c+"']\x3d"+g))(d));return""}).replace(b.use||h,function(a,c){b.useParams&&(c=c.replace(b.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e)return a=(c+":"+e).replace(/'|\\/g,"_"),d.__exp=d.__exp||{},d.__exp[a]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+a+"']"}));var e=(new Function("def","return "+c))(d);return e?n(b,e,d):e})}function k(b){return b.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var f={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0},l;f.encodeHTMLSource=function(b){var a={"\x26":"\x26#38;","\x3c":"\x26#60;","\x3e":"\x26#62;",'"':"\x26#34;","'":"\x26#39;","/":"\x26#47;"},d=b?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(b){return b?b.toString().replace(d,function(b){return a[b]||b}):""}};l=function(){return this||(0,eval)("this")}();"undefined"!==typeof module&&module.exports?module.exports=f:"function"===typeof define&&define.amd?define(function(){return f}):l.doT=f;var q={start:"'+(",end:")+'",startencode:"'+encodeHTML("},r={start:"';out+\x3d(",end:");out+\x3d'",startencode:"';out+\x3dencodeHTML("},h=/$^/;f.template=function(b,a,d){a=a||f.templateSettings;var m=a.append?q:r,c,e=0,g;b=a.use||a.define?n(a,b,d||{}):b;b=("var out\x3d'"+(a.strip?b.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):b).replace(/'|\\/g,"\\$\x26").replace(a.interpolate||h,function(b,a){return m.start+k(a)+m.end}).replace(a.encode||h,function(b,a){c=!0;return m.startencode+k(a)+m.end}).replace(a.conditional||h,function(b,a,c){return a?c?"';}else if("+k(c)+"){out+\x3d'":"';}else{out+\x3d'":c?"';if("+k(c)+"){out+\x3d'":"';}out+\x3d'"}).replace(a.iterate||h,function(b,a,c,d){if(!a)return"';} } out+\x3d'";e+=1;g=d||"i"+e;a=k(a);return"';var arr"+e+"\x3d"+a+";if(arr"+e+"){var "+c+","+g+"\x3d-1,l"+e+"\x3darr"+e+".length-1;while("+g+"\x3cl"+e+"){"+c+"\x3darr"+e+"["+g+"+\x3d1];out+\x3d'"}).replace(a.evaluate||h,function(a,b){return"';"+k(b)+"out+\x3d'"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");c&&(a.selfcontained||!l||l._encodeHTML||(l._encodeHTML=f.encodeHTMLSource(a.doNotSkipEncoded)),b="var encodeHTML \x3d typeof _encodeHTML !\x3d\x3d 'undefined' ? _encodeHTML : ("+f.encodeHTMLSource.toString()+"("+(a.doNotSkipEncoded||"")+"));"+b);try{return new Function(a.varname,b)}catch(p){throw"undefined"!==typeof console&&console.log("Could not create a template function: "+b),p;}};f.compile=function(b,a){return f.template(b,null,a)}})();